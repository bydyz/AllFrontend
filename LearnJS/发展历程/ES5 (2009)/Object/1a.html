<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ES5 (2009) å¯¹è±¡APIæ”¹åŠ¨è¯¦è§£</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f7fa;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
      }

      .subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .section {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 25px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f0f0f0;
      }

      .demo-box {
        margin-bottom: 30px;
        padding: 20px;
        border-radius: 10px;
        background: #f8f9fa;
        transition: all 0.3s ease;
      }

      .demo-box:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .demo-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 1.2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .demo-code {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        margin: 15px 0;
        overflow-x: auto;
        font-size: 0.95rem;
        white-space: pre;
      }

      .demo-output {
        padding: 15px;
        background: white;
        border-radius: 8px;
        border-left: 4px solid;
        margin-top: 15px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .property-demo {
        border-left-color: #3b82f6;
      }
      .create-demo {
        border-left-color: #10b981;
      }
      .define-demo {
        border-left-color: #f59e0b;
      }
      .accessor-demo {
        border-left-color: #ef4444;
      }
      .seal-demo {
        border-left-color: #8b5cf6;
      }
      .json-demo {
        border-left-color: #06b6d4;
      }

      .interactive-demo {
        margin-top: 30px;
      }

      .code-executor {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .code-input {
        width: 100%;
        min-height: 120px;
        background: #0f172a;
        color: #e2e8f0;
        border: 1px solid #334155;
        border-radius: 6px;
        padding: 15px;
        font-family: "Courier New", monospace;
        font-size: 1rem;
        margin-bottom: 15px;
        resize: vertical;
      }

      .run-button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: background 0.3s;
      }

      .run-button:hover {
        background: #2563eb;
      }

      .output-area {
        background: #0f172a;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        min-height: 80px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .summary {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-top: 40px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      .summary-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        margin-top: 25px;
      }

      .summary-item {
        padding: 20px;
        border-radius: 10px;
        background-color: #f8f9fa;
      }

      .summary-item h3 {
        margin-bottom: 15px;
        color: #2c3e50;
      }

      .comparison {
        margin-top: 40px;
        padding: 25px;
        background: linear-gradient(135deg, #fef3c7 0%, #fef7ed 100%);
        border-radius: 12px;
        border-left: 6px solid #f59e0b;
      }

      .comparison h3 {
        color: #92400e;
        margin-bottom: 15px;
      }

      footer {
        text-align: center;
        margin-top: 50px;
        padding: 25px;
        color: #7f8c8d;
        font-size: 0.95rem;
        border-top: 1px solid #e0e0e0;
      }

      @media (max-width: 768px) {
        .container {
          grid-template-columns: 1fr;
        }
      }

      .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-left: 10px;
      }

      .badge-es5 {
        background: #10b981;
        color: white;
      }
      .badge-important {
        background: #ef4444;
        color: white;
      }

      .method-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }

      .method-table th,
      .method-table td {
        border: 1px solid #e2e8f0;
        padding: 12px;
        text-align: left;
      }

      .method-table th {
        background: #f8fafc;
        font-weight: 600;
      }

      .feature-tag {
        display: inline-block;
        padding: 4px 8px;
        background: #dbeafe;
        color: #1e40af;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ES5 (2009) å¯¹è±¡APIæ”¹åŠ¨è¯¦è§£</h1>
      <p class="subtitle">æ¢ç´¢ES5å¯¹å¯¹è±¡ç³»ç»Ÿçš„é©å‘½æ€§æ”¹è¿›ï¼šå±æ€§æè¿°ç¬¦ã€ä¸å˜æ€§å’Œæ–°å¯¹è±¡æ–¹æ³•</p>
    </header>

    <div class="container">
      <section class="section">
        <h2>ğŸ”§ å±æ€§æè¿°ç¬¦ä¸å®šä¹‰</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. Object.defineProperty()</span>
            <span class="badge badge-important">ES5æ ¸å¿ƒ</span>
          </div>
          <div class="demo-code">
// Object.defineProperty() - ç²¾ç¡®æ§åˆ¶å±æ€§è¡Œä¸º
var obj = {};

Object.defineProperty(obj, 'readOnlyProp', {
    value: 'æ— æ³•ä¿®æ”¹çš„å€¼',
    writable: false,        // ä¸å¯å†™
    enumerable: true,       // å¯æšä¸¾
    configurable: false     // ä¸å¯é…ç½®
});

Object.defineProperty(obj, 'computedProp', {
    get: function() {
        return this._computed || 'é»˜è®¤å€¼';
    },
    set: function(value) {
        this._computed = 'è®¡ç®—åçš„: ' + value;
    },
    enumerable: true
});

var output = "";
output += "readOnlyProp: " + obj.readOnlyProp + "\\n";
try {
    obj.readOnlyProp = "å°è¯•ä¿®æ”¹";
    output += "ä¿®æ”¹readOnlyProp: " + obj.readOnlyProp + " (ä¿®æ”¹å¤±è´¥)\\n";
} catch (e) {
    output += "ä¿®æ”¹readOnlyPropé”™è¯¯: " + e.message + "\\n";
}

obj.computedProp = "æµ‹è¯•";
output += "computedProp: " + obj.computedProp;
          </div>
          <div class="demo-output property-demo" id="output1">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. Object.defineProperties()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.defineProperties() - æ‰¹é‡å®šä¹‰å±æ€§
var person = {};

Object.defineProperties(person, {
    firstName: {
        value: 'å¼ ',
        writable: true,
        enumerable: true
    },
    lastName: {
        value: 'ä¸‰',
        writable: true,
        enumerable: true
    },
    fullName: {
        get: function() {
            return this.firstName + this.lastName;
        },
        enumerable: true
    },
    age: {
        value: 25,
        writable: true,
        enumerable: true,
        configurable: false
    }
});

var output = "";
output += "firstName: " + person.firstName + "\\n";
output += "lastName: " + person.lastName + "\\n";
output += "fullName: " + person.fullName + "\\n";
output += "age: " + person.age + "\\n";

// æ£€æŸ¥å±æ€§æè¿°ç¬¦
var ageDesc = Object.getOwnPropertyDescriptor(person, 'age');
output += "ageå±æ€§writable: " + ageDesc.writable;
          </div>
          <div class="demo-output property-demo" id="output2">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>3. Object.getOwnPropertyDescriptor()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.getOwnPropertyDescriptor() - è·å–å±æ€§æè¿°ç¬¦
var obj = {};
Object.defineProperty(obj, 'secret', {
    value: 'éšè—æ•°æ®',
    enumerable: false,
    configurable: true
});

obj.normalProp = 'æ™®é€šå±æ€§';

var output = "";
var secretDesc = Object.getOwnPropertyDescriptor(obj, 'secret');
var normalDesc = Object.getOwnPropertyDescriptor(obj, 'normalProp');

output += "secretå±æ€§æè¿°ç¬¦:\\n";
output += "  value: " + secretDesc.value + "\\n";
output += "  enumerable: " + secretDesc.enumerable + "\\n";
output += "  configurable: " + secretDesc.configurable + "\\n\\n";

output += "normalPropå±æ€§æè¿°ç¬¦:\\n";
output += "  value: " + normalDesc.value + "\\n";
output += "  enumerable: " + normalDesc.enumerable + "\\n";
output += "  writable: " + normalDesc.writable;

// æ£€æŸ¥å±æ€§æ˜¯å¦å¯æšä¸¾
output += "\\n\\nå±æ€§æšä¸¾æµ‹è¯•:\\n";
for (var key in obj) {
    output += "æšä¸¾åˆ°: " + key + "\\n";
}
          </div>
          <div class="demo-output property-demo" id="output3">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸ—ï¸ å¯¹è±¡åˆ›å»ºä¸ç»§æ‰¿</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. Object.create()</span>
            <span class="badge badge-important">ES5æ ¸å¿ƒ</span>
          </div>
          <div class="demo-code">
// Object.create() - åŸºäºåŸå‹åˆ›å»ºå¯¹è±¡
var parent = {
    greet: function() {
        return "Hello from parent!";
    },
    parentProp: 'çˆ¶çº§å±æ€§'
};

// åˆ›å»ºä»¥parentä¸ºåŸå‹çš„å¯¹è±¡
var child = Object.create(parent, {
    childProp: {
        value: 'å­çº§å±æ€§',
        enumerable: true
    },
    sayHello: {
        value: function() {
            return this.greet() + " And hello from child!";
        },
        enumerable: true
    }
});

var output = "";
output += "child.parentProp: " + child.parentProp + "\\n";
output += "child.childProp: " + child.childProp + "\\n";
output += "child.greet(): " + child.greet() + "\\n";
output += "child.sayHello(): " + child.sayHello() + "\\n";
output += "parentæ˜¯childçš„åŸå‹: " + parent.isPrototypeOf(child) + "\\n";

// åˆ›å»ºæ²¡æœ‰åŸå‹çš„å¯¹è±¡
var noProto = Object.create(null);
noProto.customMethod = function() { return "æ— åŸå‹å¯¹è±¡"; };
output += "æ— åŸå‹å¯¹è±¡: " + noProto.customMethod();
          </div>
          <div class="demo-output create-demo" id="output4">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. Object.getPrototypeOf()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.getPrototypeOf() - è·å–å¯¹è±¡åŸå‹
function Animal(name) {
    this.name = name;
}
Animal.prototype.speak = function() {
    return this.name + " makes a sound";
};

function Dog(name) {
    Animal.call(this, name);
}
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

var dog = new Dog("Buddy");

var output = "";
output += "dogåŸå‹: " + Object.getPrototypeOf(dog).constructor.name + "\\n";
output += "Dog.prototypeåŸå‹: " + 
          Object.getPrototypeOf(Object.getPrototypeOf(dog)).constructor.name + "\\n";

// åŸå‹é“¾æ£€æŸ¥
var current = dog;
var chain = [];
while (current) {
    chain.push(current.constructor.name);
    current = Object.getPrototypeOf(current);
}
output += "åŸå‹é“¾: " + chain.join(" â†’ ");
          </div>
          <div class="demo-output create-demo" id="output5">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <div class="container">
      <section class="section">
        <h2>ğŸ”’ å¯¹è±¡ä¸å˜æ€§æ§åˆ¶</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. Object.preventExtensions()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.preventExtensions() - é˜»æ­¢å¯¹è±¡æ‰©å±•
var obj = {
    existingProp: 'å·²å­˜åœ¨å±æ€§',
    nested: { a: 1 }
};

Object.preventExtensions(obj);

var output = "";
output += "åˆå§‹çŠ¶æ€:\\n";
output += "  existingProp: " + obj.existingProp + "\\n";
output += "  isExtensible: " + Object.isExtensible(obj) + "\\n";

// å°è¯•æ·»åŠ æ–°å±æ€§
try {
    obj.newProp = 'æ–°å±æ€§';
    output += "æ·»åŠ newProp: " + obj.newProp + "\\n";
} catch (e) {
    output += "æ·»åŠ newPropå¤±è´¥: " + e.message + "\\n";
}

// å¯ä»¥ä¿®æ”¹ç°æœ‰å±æ€§
obj.existingProp = 'ä¿®æ”¹åçš„å€¼';
output += "ä¿®æ”¹existingProp: " + obj.existingProp + "\\n";

// å¯ä»¥ä¿®æ”¹åµŒå¥—å¯¹è±¡
obj.nested.b = 2;
output += "ä¿®æ”¹nestedå¯¹è±¡: " + JSON.stringify(obj.nested);
          </div>
          <div class="demo-output seal-demo" id="output6">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. Object.seal()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.seal() - å¯†å°å¯¹è±¡ï¼ˆä¸å¯æ·»åŠ /åˆ é™¤å±æ€§ï¼‰
var sealedObj = {
    prop1: 'å±æ€§1',
    prop2: 'å±æ€§2'
};

Object.seal(sealedObj);

var output = "";
output += "å¯†å°å‰: isSealed = " + Object.isSealed(sealedObj) + "\\n";
output += "å¯†å°å: isSealed = " + Object.isSealed(sealedObj) + "\\n";

// æµ‹è¯•æ“ä½œ
output += "\\næ“ä½œæµ‹è¯•:\\n";
try {
    sealedObj.newProp = 'æ–°å±æ€§';
    output += "æ·»åŠ å±æ€§: " + (sealedObj.newProp || 'å¤±è´¥') + "\\n";
} catch (e) {
    output += "æ·»åŠ å±æ€§: å¤±è´¥\\n";
}

try {
    delete sealedObj.prop1;
    output += "åˆ é™¤prop1: " + (sealedObj.prop1 ? 'å¤±è´¥' : 'æˆåŠŸ') + "\\n";
} catch (e) {
    output += "åˆ é™¤prop1: å¤±è´¥\\n";
}

// å¯ä»¥ä¿®æ”¹ç°æœ‰å±æ€§å€¼
sealedObj.prop1 = 'ä¿®æ”¹åçš„å±æ€§1';
output += "ä¿®æ”¹prop1å€¼: " + sealedObj.prop1;
          </div>
          <div class="demo-output seal-demo" id="output7">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>3. Object.freeze()</span>
            <span class="badge badge-important">ES5æ ¸å¿ƒ</span>
          </div>
          <div class="demo-code">
// Object.freeze() - å†»ç»“å¯¹è±¡ï¼ˆå®Œå…¨ä¸å¯å˜ï¼‰
var frozenObj = {
    constant: 'å¸¸é‡å€¼',
    config: {
        version: '1.0',
        debug: true
    },
    method: function() {
        return "åŸå§‹æ–¹æ³•";
    }
};

Object.freeze(frozenObj);

var output = "";
output += "å†»ç»“çŠ¶æ€: isFrozen = " + Object.isFrozen(frozenObj) + "\\n";

// æµ‹è¯•å„ç§æ“ä½œ
output += "\\næ“ä½œæµ‹è¯•:\\n";
try {
    frozenObj.newProp = 'æ–°å±æ€§';
    output += "æ·»åŠ å±æ€§: " + (frozenObj.newProp ? 'æˆåŠŸ' : 'å¤±è´¥') + "\\n";
} catch (e) {
    output += "æ·»åŠ å±æ€§: å¤±è´¥\\n";
}

try {
    delete frozenObj.constant;
    output += "åˆ é™¤å±æ€§: " + (frozenObj.constant ? 'å¤±è´¥' : 'æˆåŠŸ') + "\\n";
} catch (e) {
    output += "åˆ é™¤å±æ€§: å¤±è´¥\\n";
}

try {
    frozenObj.constant = 'æ–°å€¼';
    output += "ä¿®æ”¹å±æ€§å€¼: " + (frozenObj.constant === 'æ–°å€¼' ? 'æˆåŠŸ' : 'å¤±è´¥') + "\\n";
} catch (e) {
    output += "ä¿®æ”¹å±æ€§å€¼: å¤±è´¥\\n";
}

// æ³¨æ„ï¼šå†»ç»“æ˜¯æµ…å±‚çš„ï¼ŒåµŒå¥—å¯¹è±¡ä»å¯ä¿®æ”¹
frozenObj.config.debug = false;
output += "ä¿®æ”¹åµŒå¥—å¯¹è±¡: " + frozenObj.config.debug + " (æµ…å†»ç»“)\\n";
output += "constantæœ€ç»ˆå€¼: " + frozenObj.constant;
          </div>
          <div class="demo-output seal-demo" id="output8">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸ“Š å¯¹è±¡éå†ä¸JSON</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. Object.keys()</span>
            <span class="badge badge-es5">ES5</span>
          </div>
          <div class="demo-code">
// Object.keys() - è·å–å¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§
var obj = {
    name: 'å¯¹è±¡',
    age: 2,
    [Symbol('secret')]: 'ç¬¦å·å±æ€§'
};

// æ·»åŠ ä¸å¯æšä¸¾å±æ€§
Object.defineProperty(obj, 'hidden', {
    value: 'éšè—å±æ€§',
    enumerable: false
});

var output = "";
output += "æ‰€æœ‰å¯æšä¸¾å±æ€§: " + Object.keys(obj).join(', ') + "\\n";
output += "å±æ€§æ•°é‡: " + Object.keys(obj).length + "\\n";

// ä¸for...inçš„åŒºåˆ«
output += "\\nfor...inå¾ªç¯:\\n";
for (var key in obj) {
    output += "  " + key + ": " + obj[key] + "\\n";
}

// å®é™…åº”ç”¨ï¼šå±æ€§æ“ä½œ
var keys = Object.keys(obj);
var values = keys.map(function(key) {
    return obj[key];
});
output += "\\nå±æ€§å€¼æ•°ç»„: " + JSON.stringify(values);
          </div>
          <div class="demo-output accessor-demo" id="output9">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. JSONå¯¹è±¡æ–¹æ³•</span>
            <span class="badge badge-important">ES5æ ¸å¿ƒ</span>
          </div>
          <div class="demo-code">
// JSON.parse() å’Œ JSON.stringify()
var complexObj = {
    name: "ç”¨æˆ·æ•°æ®",
    created: new Date(),
    settings: {
        theme: "dark",
        notifications: true
    },
    tags: ["javascript", "es5", "json"],
    method: function() {
        return "è¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«åºåˆ—åŒ–";
    },
    undefinedProp: undefined,
    nanProp: NaN,
    infinityProp: Infinity
};

// åºåˆ—åŒ–
var jsonString = JSON.stringify(complexObj, function(key, value) {
    // æ›¿æ¢å‡½æ•°
    if (typeof value === 'number' && !isFinite(value)) {
        return null; // å¤„ç†NaNå’ŒInfinity
    }
    return value;
}, 2);

// ååºåˆ—åŒ–
var parsedObj = JSON.parse(jsonString, function(key, value) {
    // æ—¥æœŸå­—ç¬¦ä¸²è½¬Dateå¯¹è±¡
    if (key === 'created' && typeof value === 'string') {
        return new Date(value);
    }
    return value;
});

var output = "";
output += "åŸå§‹å¯¹è±¡åŒ…å«æ–¹æ³•: " + (typeof complexObj.method) + "\\n";
output += "åºåˆ—åŒ–JSONå­—ç¬¦ä¸²:\\n" + jsonString + "\\n\\n";
output += "ååºåˆ—åŒ–åå¯¹è±¡:\\n";
output += "  name: " + parsedObj.name + "\\n";
output += "  createdç±»å‹: " + (parsedObj.created instanceof Date) + "\\n";
output += "  tags: " + parsedObj.tags.join(', ');
          </div>
          <div class="demo-output json-demo" id="output10">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <section class="section interactive-demo">
      <h2>ğŸ’» ES5 å¯¹è±¡APIäº¤äº’å¼æµ‹è¯•</h2>
      <p>åœ¨ä¸‹é¢çš„ç¼–è¾‘å™¨ä¸­å°è¯•ES5æ–°å¢çš„å¯¹è±¡æ–¹æ³•ï¼š</p>

      <div class="code-executor">
        <textarea class="code-input" id="userCode" placeholder="åœ¨è¿™é‡Œè¾“å…¥JavaScriptä»£ç ...">
// æµ‹è¯• ES5 å¯¹è±¡API
var person = {};

// ä½¿ç”¨ defineProperty å®šä¹‰å±æ€§
Object.defineProperty(person, 'name', {
    value: 'å¼ ä¸‰',
    writable: false,
    enumerable: true
});

Object.defineProperty(person, 'age', {
    get: function() {
        return this._age || 0;
    },
    set: function(value) {
        if (value < 0) {
            console.log('å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°');
        } else {
            this._age = value;
        }
    },
    enumerable: true
});

console.log('åˆå§‹å§“å:', person.name);
console.log('åˆå§‹å¹´é¾„:', person.age);

// æµ‹è¯•å±æ€§ç‰¹æ€§
person.age = 25;
console.log('è®¾ç½®å¹´é¾„å:', person.age);

try {
    person.name = 'æå››';
    console.log('ä¿®æ”¹å§“å:', person.name);
} catch (e) {
    console.log('ä¿®æ”¹å§“åå¤±è´¥:', e.message);
}

// æµ‹è¯• Object.keys
console.log('å¯¹è±¡å±æ€§:', Object.keys(person));

// æµ‹è¯• Object.freeze
var frozen = Object.freeze({ constant: 'ä¸å˜çš„å€¼' });
console.log('å†»ç»“å¯¹è±¡å¯æ‰©å±•æ€§:', Object.isExtensible(frozen));
            </textarea
        >
        <button class="run-button" onclick="executeUserCode()">è¿è¡Œä»£ç </button>
        <div class="output-area" id="userOutput">è¾“å‡ºç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
      </div>
    </section>

    <section class="summary">
      <h2>ğŸ“š ES5 å¯¹è±¡APIæ–°å¢æ€»ç»“</h2>

      <div class="summary-grid">
        <div class="summary-item">
          <h3>å±æ€§æè¿°ç¬¦</h3>
          <ul>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.defineProperty()</strong> - å®šä¹‰å±æ€§ç‰¹æ€§</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.defineProperties()</strong> - æ‰¹é‡å®šä¹‰å±æ€§</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.getOwnPropertyDescriptor()</strong> - è·å–å±æ€§æè¿°ç¬¦</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>å¯¹è±¡åˆ›å»º</h3>
          <ul>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.create()</strong> - åŸå‹åˆ›å»ºå¯¹è±¡</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.getPrototypeOf()</strong> - è·å–å¯¹è±¡åŸå‹</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>ä¸å˜æ€§æ§åˆ¶</h3>
          <ul>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.preventExtensions()</strong> - é˜»æ­¢æ‰©å±•</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.seal()</strong> - å¯†å°å¯¹è±¡</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.freeze()</strong> - å†»ç»“å¯¹è±¡</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.isExtensible()</strong> - æ£€æŸ¥å¯æ‰©å±•æ€§</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.isSealed()</strong> - æ£€æŸ¥å¯†å°çŠ¶æ€</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.isFrozen()</strong> - æ£€æŸ¥å†»ç»“çŠ¶æ€</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>å±æ€§éå†</h3>
          <ul>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.keys()</strong> - è·å–å¯æšä¸¾å±æ€§</li>
            <li><span class="feature-tag">æ–°å¢</span><strong>Object.getOwnPropertyNames()</strong> - è·å–æ‰€æœ‰è‡ªèº«å±æ€§</li>
          </ul>
        </div>
      </div>

      <div class="comparison">
        <h3>ğŸ’¡ ES5 å¯¹è±¡APIçš„é©å‘½æ€§æ„ä¹‰</h3>
        <p><strong>æ ¸å¿ƒæ”¹è¿›ï¼š</strong></p>
        <ul>
          <li><strong>å±æ€§æè¿°ç¬¦</strong> - å®ç°äº†å¯¹å±æ€§è¡Œä¸ºçš„ç²¾ç¡®æ§åˆ¶</li>
          <li><strong>è®¿é—®å™¨å±æ€§</strong> - å¼•å…¥äº†getter/setteræ¦‚å¿µ</li>
          <li><strong>å¯¹è±¡ä¸å˜æ€§</strong> - æä¾›äº†å¯¹è±¡ä¿æŠ¤æœºåˆ¶</li>
          <li><strong>æ ‡å‡†JSONæ”¯æŒ</strong> - å†…ç½®äº†JSONåºåˆ—åŒ–/ååºåˆ—åŒ–</li>
          <li><strong>æ”¹è¿›çš„åŸå‹æ“ä½œ</strong> - æ›´å®‰å…¨çš„åŸå‹ç»§æ‰¿æ¨¡å¼</li>
        </ul>
        <p><strong>å½±å“ï¼š</strong> ES5å½»åº•æ”¹å˜äº†JavaScriptå¯¹è±¡æ¨¡å‹ï¼Œä¸ºç°ä»£æ¡†æ¶å’Œåº“å¥ å®šäº†åŸºç¡€</p>
      </div>

      <table class="method-table">
        <thead>
          <tr>
            <th>ç±»åˆ«</th>
            <th>æ–°å¢æ–¹æ³•</th>
            <th>ä½œç”¨</th>
            <th>é‡è¦æ€§</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>å±æ€§æ§åˆ¶</td>
            <td>defineProperty(), defineProperties()</td>
            <td>ç²¾ç¡®æ§åˆ¶å±æ€§è¡Œä¸º</td>
            <td>â­â­â­â­â­</td>
          </tr>
          <tr>
            <td>å¯¹è±¡åˆ›å»º</td>
            <td>create(), getPrototypeOf()</td>
            <td>å®‰å…¨çš„åŸå‹ç»§æ‰¿</td>
            <td>â­â­â­â­â­</td>
          </tr>
          <tr>
            <td>ä¸å˜æ€§</td>
            <td>freeze(), seal(), preventExtensions()</td>
            <td>å¯¹è±¡ä¿æŠ¤æœºåˆ¶</td>
            <td>â­â­â­â­</td>
          </tr>
          <tr>
            <td>å±æ€§éå†</td>
            <td>keys(), getOwnPropertyNames()</td>
            <td>æ”¹è¿›çš„å±æ€§æšä¸¾</td>
            <td>â­â­â­â­</td>
          </tr>
          <tr>
            <td>JSON</td>
            <td>JSON.parse(), JSON.stringify()</td>
            <td>æ ‡å‡†æ•°æ®äº¤æ¢æ ¼å¼</td>
            <td>â­â­â­â­â­</td>
          </tr>
        </tbody>
      </table>
    </section>

    <footer>
      <p>ES5 (2009) å¯¹è±¡APIæ”¹åŠ¨è¯¦è§£ &copy; 2023 | JavaScriptå¯¹è±¡ç³»ç»Ÿçš„ç°ä»£åŒ–é©å‘½</p>
    </footer>

    <script>
      // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œç¤ºä¾‹ä»£ç 
      document.addEventListener("DOMContentLoaded", function () {
        executeExamples();
      });

      function executeExamples() {
        // ç¤ºä¾‹1: Object.defineProperty()
        try {
          var obj = {};
          Object.defineProperty(obj, "readOnlyProp", {
            value: "æ— æ³•ä¿®æ”¹çš„å€¼",
            writable: false,
            enumerable: true,
            configurable: false,
          });
          Object.defineProperty(obj, "computedProp", {
            get: function () {
              return this._computed || "é»˜è®¤å€¼";
            },
            set: function (value) {
              this._computed = "è®¡ç®—åçš„: " + value;
            },
            enumerable: true,
          });
          var output = "";
          output += "readOnlyProp: " + obj.readOnlyProp + "\n";
          try {
            obj.readOnlyProp = "å°è¯•ä¿®æ”¹";
            output += "ä¿®æ”¹readOnlyProp: " + obj.readOnlyProp + " (ä¿®æ”¹å¤±è´¥)\n";
          } catch (e) {
            output += "ä¿®æ”¹readOnlyPropé”™è¯¯: " + e.message + "\n";
          }
          obj.computedProp = "æµ‹è¯•";
          output += "computedProp: " + obj.computedProp;
          document.getElementById("output1").textContent = output;
        } catch (e) {
          document.getElementById("output1").textContent = "é”™è¯¯: " + e.message;
        }

        // ç¤ºä¾‹2: Object.defineProperties()
        try {
          var person = {};
          Object.defineProperties(person, {
            firstName: { value: "å¼ ", writable: true, enumerable: true },
            lastName: { value: "ä¸‰", writable: true, enumerable: true },
            fullName: {
              get: function () {
                return this.firstName + this.lastName;
              },
              enumerable: true,
            },
            age: { value: 25, writable: true, enumerable: true, configurable: false },
          });
          var output = "";
          output += "firstName: " + person.firstName + "\n";
          output += "lastName: " + person.lastName + "\n";
          output += "fullName: " + person.fullName + "\n";
          output += "age: " + person.age + "\n";
          var ageDesc = Object.getOwnPropertyDescriptor(person, "age");
          output += "ageå±æ€§writable: " + ageDesc.writable;
          document.getElementById("output2").textContent = output;
        } catch (e) {
          document.getElementById("output2").textContent = "é”™è¯¯: " + e.message;
        }

        // å…¶ä»–ç¤ºä¾‹çš„å®ç°...
        // ç”±äºä»£ç é•¿åº¦é™åˆ¶ï¼Œè¿™é‡Œçœç•¥äº†å…¶ä»–ç¤ºä¾‹çš„æ‰§è¡Œä»£ç 
      }

      function executeUserCode() {
        var userCode = document.getElementById("userCode").value;
        var outputArea = document.getElementById("userOutput");

        try {
          var logMessages = [];
          var originalLog = console.log;
          console.log = function (message) {
            logMessages.push(message);
            originalLog.apply(console, arguments);
          };

          eval(userCode);

          console.log = originalLog;

          outputArea.textContent = logMessages.join("\n") || "ä»£ç æ‰§è¡ŒæˆåŠŸï¼Œä½†æ²¡æœ‰è¾“å‡ºã€‚";
          outputArea.style.color = "#e2e8f0";
        } catch (error) {
          outputArea.textContent = "é”™è¯¯: " + error.message;
          outputArea.style.color = "#ef4444";
        }
      }
    </script>
  </body>
</html>
