<div id="previewArea">
  <input type="text" id="previewInput" placeholder="输入内容" />
</div>
<div id="previewOutput"></div>

<script>
  const previewOutput = document.getElementById("previewOutput");

  // 在捕获阶段拦截输入事件，进行预处理
  document.getElementById("previewInput").addEventListener("input", function (event) {
    // 正常的输入处理
    previewOutput.textContent = `正常处理: ${event.target.value}`;
  });

  // 在捕获阶段进行数据验证或转换
  document.getElementById("previewInput").addEventListener(
    "input",
    function (event) {
      // 在捕获阶段进行数据清理
      let value = event.target.value;
      value = value.replace(/[^a-zA-Z0-9]/g, ""); // 移除非字母数字字符

      // 如果值被修改，更新输入框
      if (value !== event.target.value) {
        event.target.value = value;
        previewOutput.textContent += ` | 清理后: ${value}`;
      }
    },
    true
  ); // 使用捕获阶段，确保先执行
</script>
