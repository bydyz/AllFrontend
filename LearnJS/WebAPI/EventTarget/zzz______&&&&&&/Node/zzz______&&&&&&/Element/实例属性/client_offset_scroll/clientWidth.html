<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clientWidth å±æ€§è¯¦è§£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.3rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .content {
        display: grid;
        grid-template-columns: 1fr;
        margin-bottom: 40px;
      }

      .demo-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .explanation-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #2ecc71;
      }

      h3 {
        color: #2c3e50;
        margin: 25px 0 15px 0;
      }

      .demo-container {
        position: relative;
        width: 100%;
        height: 450px;
        border: 2px solid #34495e;
        margin: 25px 0;
        background: #ecf0f1;
        padding: 30px;
        border-radius: 10px;
        overflow: hidden;
      }

      .target-element {
        width: 350px;
        height: 250px;
        padding: 25px;
        margin: 20px auto;
        border: 15px solid #e74c3c;
        background: #3498db33;
        border-radius: 8px;
        position: relative;
        overflow: auto;
        transition: all 0.3s ease;
      }

      .content-area {
        width: 500px;
        height: 400px;
        background: linear-gradient(45deg, #2ecc7133, #f39c1233);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 20px;
        border: 2px dashed #2ecc71;
        border-radius: 6px;
      }

      .dimension-visualization {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
      }

      .clientWidth-highlight {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        background: rgba(46, 204, 113, 0.3);
        border: 2px solid #2ecc71;
        transition: width 0.3s ease;
      }

      .dimension-label {
        position: absolute;
        background: rgba(255, 255, 255, 0.9);
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin: 20px 0;
      }

      button {
        padding: 12px 15px;
        background: #2ecc71;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 600;
      }

      button:hover {
        background: #27ae60;
        transform: translateY(-2px);
      }

      button.secondary {
        background: #3498db;
      }

      button.secondary:hover {
        background: #2980b9;
      }

      .property-display {
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .property-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 10px 0;
        padding: 8px 12px;
        background: #34495e;
        border-radius: 6px;
      }

      .property-name {
        font-weight: bold;
        font-size: 1.1rem;
      }

      .property-value {
        font-family: "Courier New", monospace;
        font-size: 1.2rem;
        color: #f1c40f;
        font-weight: bold;
      }

      .style-controls {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .control-group {
        margin: 15px 0;
      }

      .control-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
      }

      .range-slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #2ecc71;
        cursor: pointer;
      }

      .range-value {
        text-align: center;
        font-weight: bold;
        color: #2ecc71;
        margin-top: 5px;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th {
        background: #2ecc71;
        color: white;
        padding: 12px 15px;
        text-align: left;
      }

      .comparison-table td {
        padding: 10px 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .special-cases {
        background: #fff9e6;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #f1c40f;
        margin: 20px 0;
      }

      .case-example {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        border: 1px solid #e9ecef;
      }

      .scrollbar-demo {
        background: #e8f8f0;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border: 2px solid #2ecc71;
      }

      .element-breakdown {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 20px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .breakdown-layer {
        width: 300px;
        padding: 12px;
        text-align: center;
        margin: 3px 0;
        border: 2px solid;
        border-radius: 6px;
        font-weight: bold;
      }

      .margin-layer {
        border-color: #9b59b6;
        background: #9b59b633;
        color: #9b59b6;
      }
      .border-layer {
        border-color: #e74c3c;
        background: #e74c3c33;
        color: #e74c3c;
      }
      .padding-layer {
        border-color: #3498db;
        background: #3498db33;
        color: #3498db;
      }
      .content-layer {
        border-color: #2ecc71;
        background: #2ecc7133;
        color: #2ecc71;
      }

      @media (max-width: 968px) {
        .content {
          grid-template-columns: 1fr;
        }

        .controls {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>clientWidth å±æ€§è¯¦è§£</h1>
        <p class="subtitle">æ·±å…¥ç†è§£ clientWidth çš„å·¥ä½œåŸç†ã€è®¡ç®—æ–¹å¼å’Œå®é™…åº”ç”¨</p>
      </header>

      <div class="content">
        <div class="demo-section">
          <h2>äº¤äº’æ¼”ç¤º</h2>
          <p>è°ƒæ•´å…ƒç´ æ ·å¼ï¼Œè§‚å¯Ÿ clientWidth å€¼çš„å˜åŒ–</p>

          <div class="demo-container">
            <div class="target-element" id="targetElement">
              <div class="dimension-visualization" id="dimensionVisualization">
                <div class="clientWidth-highlight" id="clientWidthHighlight"></div>
              </div>
              <div class="content-area" id="contentArea">
                <h3>ç›®æ ‡å…ƒç´ </h3>
                <p>clientWidth = å†…å®¹å®½åº¦ + å·¦å³å†…è¾¹è·</p>
                <p><strong>ä¸åŒ…å«è¾¹æ¡†å’Œæ»šåŠ¨æ¡</strong></p>
                <div class="scrollbar-demo">
                  <p>è¿™ä¸ªåŒºåŸŸæ¯”å®¹å™¨å®½ï¼Œç”¨äºæ¼”ç¤ºæ»šåŠ¨æ¡</p>
                  <p>â† å°è¯•å‘å³æ»šåŠ¨ â†’</p>
                </div>
              </div>
            </div>
          </div>

          <div class="element-breakdown">
            <h4>å…ƒç´ ç›’æ¨¡å‹åˆ†è§£</h4>
            <div class="breakdown-layer margin-layer">å¤–è¾¹è· Margin</div>
            <div class="breakdown-layer border-layer">è¾¹æ¡† Border</div>
            <div class="breakdown-layer padding-layer">å†…è¾¹è· Padding â† clientWidth åŒ…å«</div>
            <div class="breakdown-layer content-layer">å†…å®¹ Content â† clientWidth åŒ…å«</div>
          </div>

          <div class="style-controls">
            <div class="control-group">
              <label class="control-label">å†…è¾¹è· (Padding):</label>
              <input type="range" min="0" max="50" value="25" class="range-slider" id="paddingSlider" />
              <div class="range-value" id="paddingValue">25px</div>
            </div>

            <div class="control-group">
              <label class="control-label">è¾¹æ¡†å®½åº¦ (Border):</label>
              <input type="range" min="0" max="30" value="15" class="range-slider" id="borderSlider" />
              <div class="range-value" id="borderValue">15px</div>
            </div>

            <div class="control-group">
              <label class="control-label">å†…å®¹å®½åº¦:</label>
              <input type="range" min="300" max="800" value="500" class="range-slider" id="contentWidthSlider" />
              <div class="range-value" id="contentWidthValue">500px</div>
            </div>
          </div>

          <div class="controls">
            <button onclick="toggleScrollbar()">åˆ‡æ¢æ»šåŠ¨æ¡</button>
            <button onclick="changeElementWidth()">æ”¹å˜å…ƒç´ å®½åº¦</button>
            <button class="secondary" onclick="addMoreContent()">æ·»åŠ æ›´å¤šå†…å®¹</button>
            <button class="secondary" onclick="resetAll()">é‡ç½®æ‰€æœ‰</button>
          </div>

          <div class="property-display">
            <h3 style="color: white; margin-top: 0">å°ºå¯¸å±æ€§å¯¹æ¯”</h3>
            <div class="property-item">
              <span class="property-name">clientWidth:</span>
              <span class="property-value" id="clientWidthVal">350px</span>
            </div>
            <div class="property-item">
              <span class="property-name">offsetWidth:</span>
              <span class="property-value" id="offsetWidthVal">400px</span>
            </div>
            <div class="property-item">
              <span class="property-name">scrollWidth:</span>
              <span class="property-value" id="scrollWidthVal">550px</span>
            </div>
            <div class="property-item">
              <span class="property-name">CSS width:</span>
              <span class="property-value" id="cssWidthVal">350px</span>
            </div>
            <div class="property-item">
              <span class="property-name">æ»šåŠ¨æ¡å®½åº¦:</span>
              <span class="property-value" id="scrollbarWidthVal">0px</span>
            </div>
          </div>
        </div>

        <div class="explanation-section">
          <h2>clientWidth è¯¦è§£</h2>

          <div class="special-cases">
            <h3>ğŸ“Œ clientWidth æ ¸å¿ƒå®šä¹‰</h3>
            <p><strong>clientWidth = å†…å®¹å®½åº¦ + å·¦å³å†…è¾¹è· - å‚ç›´æ»šåŠ¨æ¡å®½åº¦</strong></p>
            <p>è¡¨ç¤ºå…ƒç´ å†…éƒ¨å¯è§†å†…å®¹çš„å®½åº¦ï¼Œä¸åŒ…æ‹¬è¾¹æ¡†å’Œæ»šåŠ¨æ¡ã€‚</p>
          </div>

          <h3>è®¡ç®—å…¬å¼</h3>
          <div class="code-block" style="white-space: pre;">
// clientWidth è®¡ç®—å…¬å¼
element.clientWidth = element.width + padding-left + padding-right - vertical-scrollbar-width

// å®é™…è®¡ç®—ç¤ºä¾‹
const element = document.getElementById('example');
const style = window.getComputedStyle(element);

const contentWidth = parseInt(style.width);
const paddingLeft = parseInt(style.paddingLeft);
const paddingRight = parseInt(style.paddingRight);
const scrollbarWidth = element.offsetWidth - element.clientWidth - 
                      parseInt(style.borderLeftWidth) - parseInt(style.borderRightWidth);

console.log('clientWidth:', element.clientWidth);
console.log('æ‰‹åŠ¨è®¡ç®—:', contentWidth + paddingLeft + paddingRight - scrollbarWidth);
          </div>

          <h3>ä¸å…¶ä»–å®½åº¦å±æ€§çš„å¯¹æ¯”</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>å±æ€§</th>
                <th>åŒ…å«å†…å®¹</th>
                <th>ä¸åŒ…å«å†…å®¹</th>
                <th>å…¸å‹ç”¨é€”</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>clientWidth</strong></td>
                <td>å†…å®¹ + å†…è¾¹è·</td>
                <td>è¾¹æ¡†ã€æ»šåŠ¨æ¡</td>
                <td>è·å–å¯è§†å†…å®¹åŒºåŸŸå®½åº¦</td>
              </tr>
              <tr>
                <td>offsetWidth</td>
                <td>å†…å®¹ + å†…è¾¹è· + è¾¹æ¡† + æ»šåŠ¨æ¡</td>
                <td>å¤–è¾¹è·</td>
                <td>è·å–å…ƒç´ æ•´ä½“å®½åº¦</td>
              </tr>
              <tr>
                <td>scrollWidth</td>
                <td>å…¨éƒ¨å†…å®¹ + å†…è¾¹è·</td>
                <td>è¾¹æ¡†ã€æ»šåŠ¨æ¡</td>
                <td>è·å–å†…å®¹æ€»å®½åº¦</td>
              </tr>
              <tr>
                <td>getComputedStyle().width</td>
                <td>CSSè®¾ç½®çš„å®½åº¦</td>
                <td>å†…è¾¹è·ã€è¾¹æ¡†</td>
                <td>è·å–CSSå®½åº¦å€¼</td>
              </tr>
            </tbody>
          </table>

          <h3>ç‰¹æ®Šæƒ…å†µå’Œæ³¨æ„äº‹é¡¹</h3>

          <div class="case-example">
            <h4>æƒ…å†µ 1: æ»šåŠ¨æ¡çš„å½±å“</h4>
            <p>å½“å­˜åœ¨å‚ç›´æ»šåŠ¨æ¡æ—¶ï¼ŒclientWidth ä¼šè‡ªåŠ¨å‡å»æ»šåŠ¨æ¡å®½åº¦ï¼š</p>
            <div class="code-block" style="white-space: pre;">
// æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µ
element.style.overflow = 'auto';
console.log('æœ‰æ»šåŠ¨æ¡ - clientWidth:', element.clientWidth);
console.log('æœ‰æ»šåŠ¨æ¡ - offsetWidth:', element.offsetWidth);

// æ— æ»šåŠ¨æ¡çš„æƒ…å†µ  
element.style.overflow = 'hidden';
console.log('æ— æ»šåŠ¨æ¡ - clientWidth:', element.clientWidth);
console.log('æ— æ»šåŠ¨æ¡ - offsetWidth:', element.offsetWidth);

// æ»šåŠ¨æ¡å®½åº¦è®¡ç®—
const scrollbarWidth = element.offsetWidth - element.clientWidth - 
                      element.clientLeft - (element.offsetWidth - element.clientWidth - element.clientLeft);
            </div>
          </div>

          <div class="case-example">
            <h4>æƒ…å†µ 2: å†…è”å…ƒç´ </h4>
            <p>å¯¹äºå†…è”å…ƒç´ ï¼ŒclientWidth é€šå¸¸ä¸º 0ï¼š</p>
            <div class="code-block" style="white-space: pre;">
const span = document.createElement('span');
span.textContent = 'è¿™æ˜¯ä¸€ä¸ªå†…è”å…ƒç´ ';
document.body.appendChild(span);

console.log('å†…è”å…ƒç´  clientWidth:', span.clientWidth); // é€šå¸¸ä¸º 0
console.log('å†…è”å…ƒç´  offsetWidth:', span.offsetWidth); // å®é™…å®½åº¦

// è¦ä½¿å†…è”å…ƒç´ æœ‰ clientWidthï¼Œéœ€è¦è®¾ç½®ä¸ºå—çº§å…ƒç´ 
span.style.display = 'inline-block';
console.log('inline-block clientWidth:', span.clientWidth); // ç°åœ¨æœ‰å€¼
            </div>
          </div>

          <div class="case-example">
            <h4>æƒ…å†µ 3: éšè—å…ƒç´ </h4>
            <p>å¯¹äº display: none çš„å…ƒç´ ï¼ŒclientWidth ä¸º 0ï¼š</p>
            <div class="code-block" style="white-space: pre;">
element.style.display = 'none';
console.log('éšè—å…ƒç´  clientWidth:', element.clientWidth); // 0

element.style.display = 'block';
console.log('æ˜¾ç¤ºå…ƒç´  clientWidth:', element.clientWidth); // æ­£å¸¸å€¼
            </div>
          </div>

          <h3>å®é™…åº”ç”¨åœºæ™¯</h3>
          <div class="code-block" style="white-space: pre;">
// åº”ç”¨ 1: å“åº”å¼å¸ƒå±€æ£€æµ‹
function isMobileLayout() {
    return document.documentElement.clientWidth < 768;
}

// åº”ç”¨ 2: æ£€æµ‹å…ƒç´ æ˜¯å¦éœ€è¦æ»šåŠ¨æ¡
function needsHorizontalScrollbar(element) {
    return element.scrollWidth > element.clientWidth;
}

function needsVerticalScrollbar(element) {
    return element.scrollHeight > element.clientHeight;
}

// åº”ç”¨ 3: è®¡ç®—å¯ç”¨ç©ºé—´
function calculateAvailableSpace(container, margin = 10) {
    return {
        width: container.clientWidth - margin * 2,
        height: container.clientHeight - margin * 2
    };
}

// åº”ç”¨ 4: åŠ¨æ€è°ƒæ•´å†…å®¹å¤§å°
function fitContentToContainer(content, container) {
    const availableWidth = container.clientWidth - 20; // ç•™å‡ºè¾¹è·
    const availableHeight = container.clientHeight - 20;
    
    content.style.maxWidth = availableWidth + 'px';
    content.style.maxHeight = availableHeight + 'px';
}

// åº”ç”¨ 5: è‡ªå®šä¹‰æ»šåŠ¨æ¡å®ç°
function createCustomScrollbar(container) {
    const scrollbar = document.createElement('div');
    const trackWidth = 16; // æ»šåŠ¨æ¡è½¨é“å®½åº¦
    
    // è®¡ç®—æ»šåŠ¨æ¡ä½ç½®å’Œå¤§å°
    const visibleRatio = container.clientWidth / container.scrollWidth;
    const thumbWidth = container.clientWidth * visibleRatio - trackWidth;
    
    scrollbar.style.width = thumbWidth + 'px';
    // ... å…¶ä»–æ»šåŠ¨æ¡é€»è¾‘
}

// åº”ç”¨ 6: è§†å£æ£€æµ‹
function isElementInViewport(element) {
    const rect = element.getBoundingClientRect();
    const viewportWidth = window.innerWidth || document.documentElement.clientWidth;
    
    return (
        rect.left >= 0 &&
        rect.right <= viewportWidth
    );
}
          </div>

          <h3>æ€§èƒ½è€ƒè™‘</h3>
          <div class="special-cases">
            <p><strong>clientWidth ä¼šè§¦å‘é‡æ’ (reflow)</strong></p>
            <p>é¢‘ç¹è¯»å– clientWidth å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå»ºè®®ï¼š</p>
            <ul>
              <li>ç¼“å­˜ clientWidth å€¼ï¼Œé¿å…é‡å¤è¯»å–</li>
              <li>åœ¨æ‰¹é‡æ“ä½œä¸­ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰éœ€è¦çš„å°ºå¯¸</li>
              <li>ä½¿ç”¨ ResizeObserver ç›‘å¬å°ºå¯¸å˜åŒ–</li>
            </ul>
            <div class="code-block" style="white-space: pre;">
// ä¸å¥½çš„åšæ³• - æ¯æ¬¡å¾ªç¯éƒ½è¯»å– clientWidth
for (let i = 0; i < elements.length; i++) {
    if (elements[i].clientWidth > 500) {
        // ...
    }
}

// å¥½çš„åšæ³• - ç¼“å­˜å€¼
const containerWidth = container.clientWidth;
for (let i = 0; i < elements.length; i++) {
    if (elements[i].offsetWidth > containerWidth) {
        // ...
    }
}
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // è·å–DOMå…ƒç´ 
      const targetElement = document.getElementById("targetElement");
      const contentArea = document.getElementById("contentArea");
      const clientWidthHighlight = document.getElementById("clientWidthHighlight");

      // è·å–æ§åˆ¶å…ƒç´ 
      const paddingSlider = document.getElementById("paddingSlider");
      const borderSlider = document.getElementById("borderSlider");
      const contentWidthSlider = document.getElementById("contentWidthSlider");

      // è·å–æ˜¾ç¤ºå…ƒç´ 
      const clientWidthVal = document.getElementById("clientWidthVal");
      const offsetWidthVal = document.getElementById("offsetWidthVal");
      const scrollWidthVal = document.getElementById("scrollWidthVal");
      const cssWidthVal = document.getElementById("cssWidthVal");
      const scrollbarWidthVal = document.getElementById("scrollbarWidthVal");
      const paddingValue = document.getElementById("paddingValue");
      const borderValue = document.getElementById("borderValue");
      const contentWidthValue = document.getElementById("contentWidthValue");

      // æ›´æ–°å±æ€§æ˜¾ç¤º
      function updateProperties() {
        const clientWidth = targetElement.clientWidth;
        const offsetWidth = targetElement.offsetWidth;
        const scrollWidth = targetElement.scrollWidth;
        const computedStyle = window.getComputedStyle(targetElement);

        clientWidthVal.textContent = clientWidth + "px";
        offsetWidthVal.textContent = offsetWidth + "px";
        scrollWidthVal.textContent = scrollWidth + "px";
        cssWidthVal.textContent = computedStyle.width;

        // è®¡ç®—æ»šåŠ¨æ¡å®½åº¦
        const scrollbarWidth = offsetWidth - clientWidth - parseInt(computedStyle.borderLeftWidth) - parseInt(computedStyle.borderRightWidth);
        scrollbarWidthVal.textContent = Math.max(0, scrollbarWidth) + "px";

        // æ›´æ–°å¯è§†åŒ–
        updateVisualization();
      }

      // æ›´æ–°å¯è§†åŒ–
      function updateVisualization() {
        const clientWidth = targetElement.clientWidth;
        const clientLeft = targetElement.clientLeft;

        clientWidthHighlight.style.width = clientWidth + "px";
        clientWidthHighlight.style.left = clientLeft + "px";

        // æ›´æ–°æ ‡ç­¾
        updateDimensionLabels();
      }

      // æ›´æ–°å°ºå¯¸æ ‡ç­¾
      function updateDimensionLabels() {
        // æ¸…é™¤æ—§æ ‡ç­¾
        document.querySelectorAll(".dimension-label").forEach(label => label.remove());

        const rect = targetElement.getBoundingClientRect();
        const containerRect = targetElement.parentElement.getBoundingClientRect();

        const relativeTop = rect.top - containerRect.top;
        const relativeLeft = rect.left - containerRect.left;
        const clientWidth = targetElement.clientWidth;
        const clientLeft = targetElement.clientLeft;

        // clientWidth æ ‡ç­¾
        const widthLabel = document.createElement("div");
        widthLabel.className = "dimension-label";
        widthLabel.style.top = relativeTop - 30 + "px";
        widthLabel.style.left = relativeLeft + clientLeft + clientWidth / 2 - 50 + "px";
        widthLabel.textContent = `clientWidth: ${clientWidth}px`;
        targetElement.parentElement.appendChild(widthLabel);

        // clientLeft æ ‡ç­¾
        const leftLabel = document.createElement("div");
        leftLabel.className = "dimension-label";
        leftLabel.style.top = relativeTop + 50 + "px";
        leftLabel.style.left = relativeLeft - 80 + "px";
        leftLabel.textContent = `clientLeft: ${clientLeft}px`;
        targetElement.parentElement.appendChild(leftLabel);
      }

      // æ§åˆ¶å‡½æ•°
      function toggleScrollbar() {
        if (targetElement.style.overflow === "hidden") {
          targetElement.style.overflow = "auto";
        } else {
          targetElement.style.overflow = "hidden";
        }
        updateProperties();
      }

      function changeElementWidth() {
        const currentWidth = parseInt(targetElement.style.width) || 350;
        const newWidth = currentWidth === 350 ? 250 : 350;
        targetElement.style.width = newWidth + "px";
        updateProperties();
      }

      function addMoreContent() {
        const newContent = document.createElement("div");
        newContent.style.background = "rgba(155, 89, 182, 0.3)";
        newContent.style.padding = "15px";
        newContent.style.margin = "10px 0";
        newContent.style.border = "2px solid #9b59b6";
        newContent.style.borderRadius = "4px";
        newContent.innerHTML = "<h4>æ–°å¢å†…å®¹åŒºå—</h4><p>è¿™å¢åŠ äº†å†…å®¹çš„æ€»ä½“å®½åº¦</p>";

        contentArea.appendChild(newContent);
        updateProperties();
      }

      function resetAll() {
        targetElement.style.padding = "25px";
        targetElement.style.borderWidth = "15px";
        targetElement.style.width = "";
        targetElement.style.overflow = "auto";
        contentArea.style.width = "500px";
        contentArea.innerHTML = `
                <h3>ç›®æ ‡å…ƒç´ </h3>
                <p>clientWidth = å†…å®¹å®½åº¦ + å·¦å³å†…è¾¹è·</p>
                <p><strong>ä¸åŒ…å«è¾¹æ¡†å’Œæ»šåŠ¨æ¡</strong></p>
                <div class="scrollbar-demo">
                    <p>è¿™ä¸ªåŒºåŸŸæ¯”å®¹å™¨å®½ï¼Œç”¨äºæ¼”ç¤ºæ»šåŠ¨æ¡</p>
                    <p>â† å°è¯•å‘å³æ»šåŠ¨ â†’</p>
                </div>
            `;

        paddingSlider.value = 25;
        borderSlider.value = 15;
        contentWidthSlider.value = 500;
        paddingValue.textContent = "25px";
        borderValue.textContent = "15px";
        contentWidthValue.textContent = "500px";

        updateProperties();
      }

      // äº‹ä»¶ç›‘å¬
      paddingSlider.addEventListener("input", function () {
        const padding = parseInt(this.value);
        targetElement.style.padding = padding + "px";
        paddingValue.textContent = padding + "px";
        updateProperties();
      });

      borderSlider.addEventListener("input", function () {
        const border = parseInt(this.value);
        targetElement.style.borderWidth = border + "px";
        borderValue.textContent = border + "px";
        updateProperties();
      });

      contentWidthSlider.addEventListener("input", function () {
        const width = parseInt(this.value);
        contentArea.style.width = width + "px";
        contentWidthValue.textContent = width + "px";
        updateProperties();
      });

      // åˆå§‹åŒ–
      updateProperties();

      // æ§åˆ¶å°æ¼”ç¤º
      setTimeout(() => {
        console.log("=== clientWidth å±æ€§æ¼”ç¤º ===");
        console.log("clientWidth:", targetElement.clientWidth, "px");
        console.log("offsetWidth:", targetElement.offsetWidth, "px");
        console.log("scrollWidth:", targetElement.scrollWidth, "px");

        const computedStyle = window.getComputedStyle(targetElement);
        console.log("CSS width:", computedStyle.width);
        console.log("Padding:", computedStyle.padding);
        console.log("Border:", computedStyle.borderWidth);

        console.log("\nğŸ” clientWidth è®¡ç®—éªŒè¯:");
        const contentWidth = parseInt(computedStyle.width) || 350;
        const paddingLeft = parseInt(computedStyle.paddingLeft);
        const paddingRight = parseInt(computedStyle.paddingRight);
        const scrollbarWidth = targetElement.offsetWidth - targetElement.clientWidth - parseInt(computedStyle.borderLeftWidth) - parseInt(computedStyle.borderRightWidth);

        console.log("è®¡ç®—å€¼:", contentWidth + paddingLeft + paddingRight - scrollbarWidth, "px");
        console.log("å®é™… clientWidth:", targetElement.clientWidth, "px");
        console.log("æ˜¯å¦ç›¸ç­‰:", contentWidth + paddingLeft + paddingRight - scrollbarWidth === targetElement.clientWidth);
      }, 1000);
    </script>
  </body>
</html>
