<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>scroll* 属性详解</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.3rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .demo-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      .explanation-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #2ecc71;
      }

      h3 {
        color: #2c3e50;
        margin: 25px 0 15px 0;
      }

      .scroll-container {
        width: 100%;
        height: 400px;
        border: 3px solid #34495e;
        margin: 25px 0;
        background: #ecf0f1;
        padding: 15px;
        overflow: auto;
        border-radius: 10px;
        position: relative;
      }

      .scroll-content {
        width: 800px;
        height: 700px;
        background: linear-gradient(45deg, #3498db33, #2ecc7133, #e74c3c33, #f39c1233);
        padding: 30px;
        position: relative;
      }

      .grid-lines {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .grid-line {
        position: absolute;
        background: rgba(52, 152, 219, 0.3);
      }

      .grid-line.vertical {
        width: 1px;
        height: 100%;
      }

      .grid-line.horizontal {
        width: 100%;
        height: 1px;
      }

      .grid-label {
        position: absolute;
        background: rgba(255, 255, 255, 0.9);
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
        color: #2c3e50;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin: 20px 0;
      }

      button {
        padding: 12px 20px;
        background: #2ecc71;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        font-weight: 600;
      }

      button:hover {
        background: #27ae60;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      button.secondary {
        background: #3498db;
      }

      button.secondary:hover {
        background: #2980b9;
      }

      .property-display {
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .property-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 12px 0;
        padding: 10px;
        background: #34495e;
        border-radius: 6px;
      }

      .property-name {
        font-weight: bold;
        font-size: 1.1rem;
      }

      .property-value {
        font-family: "Courier New", monospace;
        font-size: 1.2rem;
        color: #f1c40f;
        font-weight: bold;
      }

      .scroll-indicator {
        position: absolute;
        background: rgba(231, 76, 60, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: bold;
        z-index: 10;
        pointer-events: none;
      }

      .scrollTop-indicator {
        top: 10px;
        right: 10px;
      }

      .scrollLeft-indicator {
        bottom: 10px;
        left: 10px;
      }

      .scroll-visualization {
        position: absolute;
        border: 2px solid #e74c3c;
        background: rgba(231, 76, 60, 0.1);
        pointer-events: none;
        z-index: 5;
      }

      .explanation-box {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        border-left: 5px solid #2ecc71;
      }

      .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 25px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th {
        background: #2ecc71;
        color: white;
        padding: 15px;
        text-align: left;
      }

      .comparison-table td {
        padding: 12px 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .comparison-table tr:hover {
        background: #e8f5e8;
      }

      .practical-examples {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 25px 0;
      }

      .example-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border: 2px solid #e9ecef;
      }

      .example-card h4 {
        color: #2c3e50;
        margin-bottom: 10px;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #ecf0f1;
        border-radius: 4px;
        margin: 15px 0;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: #2ecc71;
        width: 0%;
        transition: width 0.3s ease;
      }

      .note {
        background: #fff9e6;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #f1c40f;
        margin: 20px 0;
      }

      @media (max-width: 968px) {
        .content {
          grid-template-columns: 1fr;
        }

        .controls {
          grid-template-columns: 1fr;
        }

        .practical-examples {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>scroll* 属性详解</h1>
        <p class="subtitle">深入理解 scrollTop, scrollLeft, scrollWidth, scrollHeight 的工作原理和应用场景</p>
      </header>

      <div class="content">
        <div class="demo-section">
          <h2>交互演示</h2>
          <p>滚动下方容器或使用控制按钮来观察 scroll* 属性的变化</p>

          <div class="scroll-container" id="scrollContainer">
            <div class="scroll-content" id="scrollContent">
              <div class="grid-lines" id="gridLines"></div>
              <h3>可滚动内容区域</h3>
              <p>这是一个可以水平和垂直滚动的内容区域。</p>
              <p>尝试滚动并观察右侧属性值的变化。</p>

              <div style="margin-top: 50px">
                <div style="width: 600px; height: 200px; background: rgba(52, 152, 219, 0.3); padding: 20px; margin: 20px 0">
                  <h4>内容区块 1</h4>
                  <p>这个区块用于演示滚动效果。</p>
                </div>

                <div style="width: 400px; height: 300px; background: rgba(46, 204, 113, 0.3); padding: 20px; margin: 40px 0 40px 200px">
                  <h4>内容区块 2</h4>
                  <p>注意观察 scrollTop 和 scrollLeft 的变化。</p>
                </div>

                <div style="width: 500px; height: 250px; background: rgba(231, 76, 60, 0.3); padding: 20px; margin: 60px 0 60px 100px">
                  <h4>内容区块 3</h4>
                  <p>scrollWidth 和 scrollHeight 显示内容的总尺寸。</p>
                </div>
              </div>
            </div>
          </div>

          <div class="progress-bar">
            <div class="progress-fill" id="scrollProgress"></div>
          </div>
          <div style="text-align: center; margin-bottom: 20px">
            <span id="progressText">滚动进度: 0%</span>
          </div>

          <div class="controls">
            <button onclick="scrollToTop()">滚动到顶部</button>
            <button onclick="scrollToBottom()">滚动到底部</button>
            <button onclick="scrollToLeft()">滚动到左侧</button>
            <button onclick="scrollToRight()">滚动到右侧</button>
            <button class="secondary" onclick="addMoreContent()">添加更多内容</button>
            <button class="secondary" onclick="resetContent()">重置内容</button>
          </div>

          <div class="property-display">
            <h3 style="color: white; margin-top: 0">scroll* 属性值</h3>
            <div class="property-item">
              <span class="property-name">scrollWidth:</span>
              <span class="property-value" id="scrollWidthVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">scrollHeight:</span>
              <span class="property-value" id="scrollHeightVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">scrollTop:</span>
              <span class="property-value" id="scrollTopVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">scrollLeft:</span>
              <span class="property-value" id="scrollLeftVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">clientWidth:</span>
              <span class="property-value" id="clientWidthVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">clientHeight:</span>
              <span class="property-value" id="clientHeightVal">0px</span>
            </div>
          </div>
        </div>

        <div class="explanation-section">
          <h2>属性详解</h2>

          <div class="explanation-box">
            <h3>scrollWidth & scrollHeight</h3>
            <p><strong>定义：</strong>元素内容的实际总宽度和高度，包括：</p>
            <ul style="margin: 10px 0 10px 20px">
              <li>所有内容的宽度/高度（包括因溢出而不可见的部分）</li>
              <li>内边距 (padding)</li>
              <li>伪元素的尺寸</li>
            </ul>
            <p><strong>注意：</strong>不包含边框(border)、外边距(margin)或滚动条</p>
            <p><strong>典型用例：</strong>检测内容是否溢出，是否需要滚动条</p>
          </div>

          <div class="explanation-box">
            <h3>scrollTop & scrollLeft</h3>
            <p><strong>定义：</strong>元素内容垂直/水平滚动的像素数。</p>
            <p><strong>scrollTop：</strong>内容顶部到可视区域顶部的距离</p>
            <p><strong>scrollLeft：</strong>内容左侧到可视区域左侧的距离</p>
            <p><strong>重要特性：</strong>这些属性是可读写的，可以通过设置它们来控制滚动位置</p>
          </div>

          <div class="code-block" style="white-space: pre;">
// 获取滚动容器元素
const container = document.getElementById('scrollContainer');

// 读取 scroll* 属性
console.log('内容总宽度:', container.scrollWidth);
console.log('内容总高度:', container.scrollHeight);
console.log('垂直滚动距离:', container.scrollTop);
console.log('水平滚动距离:', container.scrollLeft);

// 设置滚动位置（可读写属性）
container.scrollTop = 100; // 向下滚动 100px
container.scrollLeft = 50; // 向右滚动 50px

// 监听滚动事件
container.addEventListener('scroll', function() {
    console.log('当前滚动位置 - Top:', this.scrollTop, 'Left:', this.scrollLeft);
    
    // 检测是否滚动到底部
    const isAtBottom = this.scrollTop + this.clientHeight >= this.scrollHeight;
    if (isAtBottom) {
        console.log('已滚动到底部！');
    }
    
    // 计算滚动百分比
    const scrollPercent = (this.scrollTop / (this.scrollHeight - this.clientHeight)) * 100;
    console.log('垂直滚动进度:', scrollPercent.toFixed(2) + '%');
});
          </div>

          <h3>与其他尺寸属性对比</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>属性</th>
                <th>描述</th>
                <th>是否包含溢出内容</th>
                <th>是否可写</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>scrollWidth/Height</strong></td>
                <td>内容总尺寸（包括不可见部分）</td>
                <td>是</td>
                <td>否</td>
              </tr>
              <tr>
                <td><strong>scrollTop/Left</strong></td>
                <td>滚动位置</td>
                <td>不适用</td>
                <td>是</td>
              </tr>
              <tr>
                <td>clientWidth/Height</td>
                <td>可视区域尺寸</td>
                <td>否</td>
                <td>否</td>
              </tr>
              <tr>
                <td>offsetWidth/Height</td>
                <td>元素整体尺寸</td>
                <td>否</td>
                <td>否</td>
              </tr>
            </tbody>
          </table>

          <h3>实际应用示例</h3>
          <div class="practical-examples">
            <div class="example-card">
              <h4>1. 无限滚动加载</h4>
              <p>当用户滚动接近底部时自动加载更多内容</p>
              <div class="code-block" style="font-size: 0.8rem; padding: 15px; white-space: pre;">
container.addEventListener('scroll', function() {
    const threshold = 100; // 距离底部100px时触发
    if (this.scrollTop + this.clientHeight >= this.scrollHeight - threshold) {
        loadMoreContent();
    }
});
              </div>
            </div>

            <div class="example-card">
              <h4>2. 阅读进度指示器</h4>
              <p>显示用户在内容中的阅读进度</p>
              <div class="code-block" style="font-size: 0.8rem; padding: 15px; white-space: pre;">
function updateProgress() {
    const scrollableHeight = container.scrollHeight - container.clientHeight;
    const progress = (container.scrollTop / scrollableHeight) * 100;
    progressBar.style.width = progress + '%';
}
              </div>
            </div>

            <div class="example-card">
              <h4>3. 回到顶部按钮</h4>
              <p>平滑滚动回到页面顶部</p>
              <div class="code-block" style="font-size: 0.8rem; padding: 15px; white-space: pre;">
function scrollToTop() {
    container.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}
              </div>
            </div>

            <div class="example-card">
              <h4>4. 滚动监听导航</h4>
              <p>根据滚动位置高亮对应的导航项</p>
              <div class="code-block" style="font-size: 0.8rem; padding: 15px; white-space: pre;">
window.addEventListener('scroll', function() {
    const sections = document.querySelectorAll('section');
    const scrollPosition = window.scrollY;
    
    sections.forEach(section => {
        if (scrollPosition >= section.offsetTop - 100) {
            // 高亮对应的导航项
        }
    });
});
              </div>
            </div>
          </div>

          <div class="note"><strong>重要提示：</strong>scrollTop 和 scrollLeft 在不同浏览器中的行为可能略有差异。对于文档根元素，请使用 document.documentElement 而不是 document.body。</div>
        </div>
      </div>
    </div>

    <script>
      // 获取DOM元素
      const scrollContainer = document.getElementById("scrollContainer");
      const scrollContent = document.getElementById("scrollContent");
      const gridLines = document.getElementById("gridLines");

      // 获取属性显示元素
      const scrollWidthVal = document.getElementById("scrollWidthVal");
      const scrollHeightVal = document.getElementById("scrollHeightVal");
      const scrollTopVal = document.getElementById("scrollTopVal");
      const scrollLeftVal = document.getElementById("scrollLeftVal");
      const clientWidthVal = document.getElementById("clientWidthVal");
      const clientHeightVal = document.getElementById("clientHeightVal");
      const scrollProgress = document.getElementById("scrollProgress");
      const progressText = document.getElementById("progressText");

      // 创建网格线
      function createGridLines() {
        gridLines.innerHTML = "";

        // 垂直网格线
        for (let i = 0; i <= 800; i += 100) {
          const line = document.createElement("div");
          line.className = "grid-line vertical";
          line.style.left = i + "px";
          gridLines.appendChild(line);

          const label = document.createElement("div");
          label.className = "grid-label";
          label.style.left = i + 5 + "px";
          label.style.top = "5px";
          label.textContent = i + "px";
          gridLines.appendChild(label);
        }

        // 水平网格线
        for (let i = 0; i <= 700; i += 100) {
          const line = document.createElement("div");
          line.className = "grid-line horizontal";
          line.style.top = i + "px";
          gridLines.appendChild(line);

          const label = document.createElement("div");
          label.className = "grid-label";
          label.style.left = "5px";
          label.style.top = i + 5 + "px";
          label.textContent = i + "px";
          gridLines.appendChild(label);
        }
      }

      // 更新属性显示的函数
      function updateProperties() {
        scrollWidthVal.textContent = scrollContainer.scrollWidth + "px";
        scrollHeightVal.textContent = scrollContainer.scrollHeight + "px";
        scrollTopVal.textContent = scrollContainer.scrollTop + "px";
        scrollLeftVal.textContent = scrollContainer.scrollLeft + "px";
        clientWidthVal.textContent = scrollContainer.clientWidth + "px";
        clientHeightVal.textContent = scrollContainer.clientHeight + "px";

        // 更新滚动进度
        const scrollableHeight = scrollContainer.scrollHeight - scrollContainer.clientHeight;
        const scrollableWidth = scrollContainer.scrollWidth - scrollContainer.clientWidth;

        if (scrollableHeight > 0) {
          const verticalProgress = (scrollContainer.scrollTop / scrollableHeight) * 100;
          const horizontalProgress = scrollableWidth > 0 ? (scrollContainer.scrollLeft / scrollableWidth) * 100 : 0;

          scrollProgress.style.width = verticalProgress + "%";
          progressText.textContent = `滚动进度: ${verticalProgress.toFixed(1)}%`;
        }

        updateScrollIndicators();
      }

      // 更新滚动指示器
      function updateScrollIndicators() {
        // 移除旧的指示器
        document.querySelectorAll(".scroll-indicator").forEach(indicator => indicator.remove());

        // 创建scrollTop指示器
        const topIndicator = document.createElement("div");
        topIndicator.className = "scroll-indicator scrollTop-indicator";
        topIndicator.textContent = `scrollTop: ${scrollContainer.scrollTop}px`;
        scrollContainer.appendChild(topIndicator);

        // 创建scrollLeft指示器
        const leftIndicator = document.createElement("div");
        leftIndicator.className = "scroll-indicator scrollLeft-indicator";
        leftIndicator.textContent = `scrollLeft: ${scrollContainer.scrollLeft}px`;
        scrollContainer.appendChild(leftIndicator);
      }

      // 控制函数
      function scrollToTop() {
        scrollContainer.scrollTo({ top: 0, behavior: "smooth" });
      }

      function scrollToBottom() {
        scrollContainer.scrollTo({
          top: scrollContainer.scrollHeight - scrollContainer.clientHeight,
          behavior: "smooth",
        });
      }

      function scrollToLeft() {
        scrollContainer.scrollTo({ left: 0, behavior: "smooth" });
      }

      function scrollToRight() {
        scrollContainer.scrollTo({
          left: scrollContainer.scrollWidth - scrollContainer.clientWidth,
          behavior: "smooth",
        });
      }

      function addMoreContent() {
        const newContent = document.createElement("div");
        newContent.style.width = "600px";
        newContent.style.height = "200px";
        newContent.style.background = "rgba(155, 89, 182, 0.3)";
        newContent.style.padding = "20px";
        newContent.style.margin = "30px 0";
        newContent.innerHTML = '<h4>新添加的内容</h4><p>这是通过点击"添加更多内容"按钮添加的新区块。</p>';

        scrollContent.appendChild(newContent);
        updateProperties();
      }

      function resetContent() {
        scrollContent.innerHTML = `
                <div class="grid-lines" id="gridLines"></div>
                <h3>可滚动内容区域</h3>
                <p>这是一个可以水平和垂直滚动的内容区域。</p>
                <p>尝试滚动并观察右侧属性值的变化。</p>
                
                <div style="margin-top: 50px;">
                    <div style="width: 600px; height: 200px; background: rgba(52, 152, 219, 0.3); padding: 20px; margin: 20px 0;">
                        <h4>内容区块 1</h4>
                        <p>这个区块用于演示滚动效果。</p>
                    </div>
                    
                    <div style="width: 400px; height: 300px; background: rgba(46, 204, 113, 0.3); padding: 20px; margin: 40px 0 40px 200px;">
                        <h4>内容区块 2</h4>
                        <p>注意观察 scrollTop 和 scrollLeft 的变化。</p>
                    </div>
                    
                    <div style="width: 500px; height: 250px; background: rgba(231, 76, 60, 0.3); padding: 20px; margin: 60px 0 60px 100px;">
                        <h4>内容区块 3</h4>
                        <p>scrollWidth 和 scrollHeight 显示内容的总尺寸。</p>
                    </div>
                </div>
            `;

        // 重新获取gridLines元素并创建网格
        const newGridLines = scrollContent.querySelector("#gridLines");
        if (newGridLines) {
          gridLines = newGridLines;
          createGridLines();
        }

        updateProperties();
      }

      // 初始化
      createGridLines();
      updateProperties();

      // 监听滚动事件
      scrollContainer.addEventListener("scroll", updateProperties);

      // 添加窗口调整大小监听
      window.addEventListener("resize", updateProperties);

      // 添加详细说明
      setTimeout(() => {
        console.log("=== scroll* 属性详解 ===");
        console.log("scrollWidth:", scrollContainer.scrollWidth, "px (内容总宽度)");
        console.log("scrollHeight:", scrollContainer.scrollHeight, "px (内容总高度)");
        console.log("scrollTop:", scrollContainer.scrollTop, "px (垂直滚动距离)");
        console.log("scrollLeft:", scrollContainer.scrollLeft, "px (水平滚动距离)");
        console.log("clientWidth:", scrollContainer.clientWidth, "px (可视区域宽度)");
        console.log("clientHeight:", scrollContainer.clientHeight, "px (可视区域高度)");
      }, 1000);
    </script>
  </body>
</html>
