<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clientTop 属性详解</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.3rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .content {
        display: grid;
        grid-template-columns: 1fr;
        margin-bottom: 40px;
      }

      .demo-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .explanation-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #e74c3c;
      }

      h3 {
        color: #2c3e50;
        margin: 25px 0 15px 0;
      }

      .demo-container {
        position: relative;
        width: 100%;
        height: 400px;
        border: 2px solid #34495e;
        margin: 25px 0;
        background: #ecf0f1;
        padding: 40px;
        border-radius: 10px;
        overflow: hidden;
      }

      .target-element {
        width: 300px;
        height: 200px;
        padding: 25px;
        margin: 0 auto;
        border: 10px solid #e74c3c;
        background: #3498db33;
        border-radius: 8px;
        position: relative;
        transition: all 0.3s ease;
      }

      .content-area {
        width: 100%;
        height: 100%;
        background: #2ecc7133;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        border: 2px dashed #2ecc71;
        border-radius: 4px;
        padding: 15px;
      }

      .border-visualization {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
      }

      .top-border-highlight {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 0;
        background: rgba(231, 76, 60, 0.6);
        transition: height 0.3s ease;
      }

      .clientTop-indicator {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        background: #e74c3c;
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: bold;
        white-space: nowrap;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 20px 0;
      }

      button {
        padding: 12px 15px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 600;
      }

      button:hover {
        background: #2980b9;
        transform: translateY(-2px);
      }

      button.border-btn {
        background: #e74c3c;
      }

      button.border-btn:hover {
        background: #c0392b;
      }

      .property-display {
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .property-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 10px 0;
        padding: 8px 12px;
        background: #34495e;
        border-radius: 6px;
      }

      .property-name {
        font-weight: bold;
        font-size: 1.1rem;
      }

      .property-value {
        font-family: "Courier New", monospace;
        font-size: 1.2rem;
        color: #f1c40f;
        font-weight: bold;
      }

      .border-controls {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .control-group {
        margin: 15px 0;
      }

      .control-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
      }

      .range-slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #e74c3c;
        cursor: pointer;
      }

      .range-value {
        text-align: center;
        font-weight: bold;
        color: #e74c3c;
        margin-top: 5px;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th {
        background: #e74c3c;
        color: white;
        padding: 12px 15px;
        text-align: left;
      }

      .comparison-table td {
        padding: 10px 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .special-cases {
        background: #fff9e6;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #f1c40f;
        margin: 20px 0;
      }

      .case-example {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        border: 1px solid #e9ecef;
      }

      @media (max-width: 968px) {
        .content {
          grid-template-columns: 1fr;
        }

        .controls {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>clientTop 属性详解</h1>
        <p class="subtitle">深入理解 clientTop 的工作原理、应用场景和特殊案例</p>
      </header>

      <div class="content">
        <div class="demo-section">
          <h2>交互演示</h2>
          <p>调整上边框宽度，观察 clientTop 值的变化</p>

          <div class="demo-container">
            <div class="target-element" id="targetElement">
              <div class="border-visualization" id="borderVisualization">
                <div class="top-border-highlight" id="topBorderHighlight"></div>
                <div class="clientTop-indicator" id="clientTopIndicator">clientTop: 10px</div>
              </div>
              <div class="content-area">
                <h3>目标元素</h3>
                <p>clientTop = 上边框宽度</p>
                <p>当前上边框: <span id="currentBorderTop">10px</span></p>
              </div>
            </div>
          </div>

          <div class="border-controls">
            <div class="control-group">
              <label class="control-label">上边框宽度 (border-top-width):</label>
              <input type="range" min="0" max="50" value="10" class="range-slider" id="borderTopSlider" />
              <div class="range-value" id="borderTopValue">10px</div>
            </div>

            <div class="control-group">
              <label class="control-label">边框样式:</label>
              <select class="range-slider" id="borderStyleSelect" style="padding: 8px">
                <option value="solid">solid</option>
                <option value="dashed">dashed</option>
                <option value="dotted">dotted</option>
                <option value="double">double</option>
                <option value="groove">groove</option>
              </select>
            </div>
          </div>

          <div class="controls">
            <button onclick="setBorderTop(5)">薄边框 (5px)</button>
            <button onclick="setBorderTop(20)">厚边框 (20px)</button>
            <button onclick="setBorderTop(0)">无边框</button>
            <button class="border-btn" onclick="setAsymmetricBorder()">不对称边框</button>
            <button class="border-btn" onclick="addScrollbar()">添加滚动条</button>
            <button onclick="resetAll()">重置</button>
          </div>

          <div class="property-display">
            <h3 style="color: white; margin-top: 0">属性值对比</h3>
            <div class="property-item">
              <span class="property-name">clientTop:</span>
              <span class="property-value" id="clientTopVal">10px</span>
            </div>
            <div class="property-item">
              <span class="property-name">border-top-width:</span>
              <span class="property-value" id="borderTopWidthVal">10px</span>
            </div>
            <div class="property-item">
              <span class="property-name">clientHeight:</span>
              <span class="property-value" id="clientHeightVal">200px</span>
            </div>
            <div class="property-item">
              <span class="property-name">offsetHeight:</span>
              <span class="property-value" id="offsetHeightVal">240px</span>
            </div>
          </div>
        </div>

        <div class="explanation-section">
          <h2>clientTop 详解</h2>

          <div class="special-cases">
            <h3>📌 clientTop 核心定义</h3>
            <p><strong>clientTop = 元素上边框的宽度 (border-top-width)</strong></p>
            <p>这是一个只读属性，返回元素的顶部边框宽度，以像素为单位。</p>
          </div>

          <h3>基本计算公式</h3>
          <div class="code-block" style="white-space: pre;">
// clientTop 等于上边框宽度
element.clientTop === element.getBoundingClientRect().top - element.clientTop

// 元素总高度计算
element.offsetHeight = element.clientHeight + element.clientTop + element.clientBottom
// 注意：没有 clientBottom 属性，这里用 clientTop 表示上边框
          </div>

          <h3>与其他边框属性的关系</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>属性</th>
                <th>描述</th>
                <th>对应CSS</th>
                <th>是否可写</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>clientTop</strong></td>
                <td>上边框宽度</td>
                <td>border-top-width</td>
                <td>只读</td>
              </tr>
              <tr>
                <td>clientLeft</td>
                <td>左边框宽度</td>
                <td>border-left-width</td>
                <td>只读</td>
              </tr>
              <tr>
                <td>offsetWidth</td>
                <td>包含边框的整体宽度</td>
                <td>width + padding + border</td>
                <td>只读</td>
              </tr>
              <tr>
                <td>clientWidth</td>
                <td>不包含边框的内容宽度</td>
                <td>width + padding</td>
                <td>只读</td>
              </tr>
            </tbody>
          </table>

          <h3>特殊情况和注意事项</h3>

          <div class="case-example">
            <h4>情况 1: 不同边框样式</h4>
            <p>clientTop 只关心边框宽度，不关心边框样式：</p>
            <div class="code-block" style="white-space: pre;">
// 无论边框样式如何，clientTop 都返回宽度值
element.style.borderTop = '5px solid red';      // clientTop = 5
element.style.borderTop = '5px dashed blue';    // clientTop = 5
element.style.borderTop = '5px dotted green';   // clientTop = 5
            </div>
          </div>

          <div class="case-example">
            <h4>情况 2: 不对称边框</h4>
            <p>clientTop 只返回上边框宽度，与其他边框无关：</p>
            <div class="code-block" style="white-space: pre;">
// 设置不对称边框
element.style.borderTop = '10px solid red';
element.style.borderRight = '20px solid blue';
element.style.borderBottom = '30px solid green';
element.style.borderLeft = '5px solid yellow';

console.log(element.clientTop);    // 10 (上边框宽度)
console.log(element.clientLeft);   // 5 (左边框宽度)
            </div>
          </div>

          <div class="case-example">
            <h4>情况 3: 滚动条的影响</h4>
            <p>clientTop 不受滚动条影响，始终返回边框宽度：</p>
            <div class="code-block" style="white-space: pre;">
// 即使有滚动条，clientTop 也不变
element.style.overflow = 'auto';  // 显示滚动条
console.log(element.clientTop);   // 仍然返回边框宽度

// 但 clientWidth/clientHeight 会减去滚动条宽度
console.log(element.clientWidth); // 会减去垂直滚动条宽度
            </div>
          </div>

          <h3>实际应用场景</h3>
          <div class="code-block" style="white-space: pre;">
// 应用 1: 精确定位计算
function positionRelativeToBorder(element, targetX, targetY) {
    // 考虑边框偏移
    const x = targetX - element.clientLeft;
    const y = targetY - element.clientTop;
    return { x, y };
}

// 应用 2: 精确尺寸计算
function getInnerDimensions(element) {
    return {
        width: element.clientWidth,
        height: element.clientHeight,
        topBorder: element.clientTop,
        leftBorder: element.clientLeft
    };
}

// 应用 3: 边框检测
function hasTopBorder(element) {
    return element.clientTop > 0;
}

// 应用 4: 动态布局调整
function adjustForBorders(container, children) {
    const borderOffset = container.clientTop + container.clientLeft;
    children.forEach(child => {
        child.style.margin = borderOffset + 'px';
    });
}
          </div>

          <h3>常见误区</h3>
          <div class="special-cases">
            <p>❌ <strong>误区1:</strong> clientTop 是元素到父元素顶部的距离</p>
            <p>✅ <strong>正确:</strong> clientTop 是元素自身的上边框宽度</p>

            <p>❌ <strong>误区2:</strong> clientTop 包含滚动条</p>
            <p>✅ <strong>正确:</strong> clientTop 只包含边框，滚动条影响 clientWidth/Height</p>

            <p>❌ <strong>误区3:</strong> clientTop 可以设置</p>
            <p>✅ <strong>正确:</strong> clientTop 是只读属性，要通过 CSS border 属性修改</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 获取DOM元素
      const targetElement = document.getElementById("targetElement");
      const topBorderHighlight = document.getElementById("topBorderHighlight");
      const clientTopIndicator = document.getElementById("clientTopIndicator");
      const borderTopSlider = document.getElementById("borderTopSlider");
      const borderTopValue = document.getElementById("borderTopValue");
      const borderStyleSelect = document.getElementById("borderStyleSelect");
      const currentBorderTop = document.getElementById("currentBorderTop");

      // 获取属性显示元素
      const clientTopVal = document.getElementById("clientTopVal");
      const borderTopWidthVal = document.getElementById("borderTopWidthVal");
      const clientHeightVal = document.getElementById("clientHeightVal");
      const offsetHeightVal = document.getElementById("offsetHeightVal");

      // 更新属性显示
      function updateProperties() {
        const clientTop = targetElement.clientTop;
        const computedStyle = window.getComputedStyle(targetElement);
        const borderTopWidth = computedStyle.borderTopWidth;

        clientTopVal.textContent = clientTop + "px";
        borderTopWidthVal.textContent = borderTopWidth;
        clientHeightVal.textContent = targetElement.clientHeight + "px";
        offsetHeightVal.textContent = targetElement.offsetHeight + "px";
        currentBorderTop.textContent = borderTopWidth;

        // 更新可视化
        updateVisualization();
      }

      // 更新可视化
      function updateVisualization() {
        const clientTop = targetElement.clientTop;

        // 更新高亮区域高度
        topBorderHighlight.style.height = clientTop + "px";

        // 更新指示器位置和文本
        clientTopIndicator.textContent = `clientTop: ${clientTop}px`;
        clientTopIndicator.style.top = clientTop / 2 - 15 + "px";
      }

      // 设置上边框宽度
      function setBorderTop(width) {
        const borderStyle = borderStyleSelect.value;
        targetElement.style.borderTop = `${width}px ${borderStyle} #e74c3c`;
        borderTopSlider.value = width;
        borderTopValue.textContent = width + "px";
        updateProperties();
      }

      // 设置不对称边框
      function setAsymmetricBorder() {
        targetElement.style.borderTop = "15px solid #e74c3c";
        targetElement.style.borderRight = "8px solid #3498db";
        targetElement.style.borderBottom = "25px solid #2ecc71";
        targetElement.style.borderLeft = "5px solid #f39c12";
        updateProperties();
      }

      // 添加滚动条
      function addScrollbar() {
        const contentArea = targetElement.querySelector(".content-area");
        contentArea.style.width = "150%";
        contentArea.style.height = "150%";
        targetElement.style.overflow = "auto";
        updateProperties();
      }

      // 重置所有
      function resetAll() {
        targetElement.style.border = "10px solid #e74c3c";
        targetElement.style.overflow = "visible";
        const contentArea = targetElement.querySelector(".content-area");
        contentArea.style.width = "100%";
        contentArea.style.height = "100%";
        borderTopSlider.value = 10;
        borderTopValue.textContent = "10px";
        borderStyleSelect.value = "solid";
        updateProperties();
      }

      // 事件监听
      borderTopSlider.addEventListener("input", function () {
        setBorderTop(parseInt(this.value));
      });

      borderStyleSelect.addEventListener("change", function () {
        setBorderTop(parseInt(borderTopSlider.value));
      });

      // 初始化
      updateProperties();

      // 控制台演示
      setTimeout(() => {
        console.log("=== clientTop 属性演示 ===");
        console.log("clientTop:", targetElement.clientTop, "px");
        console.log("CSS border-top-width:", getComputedStyle(targetElement).borderTopWidth);
        console.log("clientHeight:", targetElement.clientHeight, "px");
        console.log("offsetHeight:", targetElement.offsetHeight, "px");

        console.log("\n🔍 验证 clientTop = border-top-width:");
        console.log("相等:", targetElement.clientTop === parseInt(getComputedStyle(targetElement).borderTopWidth));
      }, 1000);
    </script>
  </body>
</html>
