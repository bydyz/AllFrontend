<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>scrollTop å±æ€§è¯¦è§£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.3rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .content {
        display: grid;
        grid-template-columns: 1fr;
        margin-bottom: 40px;
      }

      .demo-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 40px;
      }

      .explanation-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #9b59b6;
      }

      h3 {
        color: #2c3e50;
        margin: 25px 0 15px 0;
      }

      .demo-container {
        position: relative;
        width: 100%;
        height: 400px;
        border: 2px solid #34495e;
        margin: 25px 0;
        background: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        overflow: hidden;
      }

      .scroll-element {
        width: 100%;
        height: 100%;
        overflow: auto;
        border: 2px solid #9b59b6;
        border-radius: 8px;
        background: white;
        position: relative;
      }

      .scroll-content {
        min-height: 1200px;
        padding: 20px;
        background: linear-gradient(180deg, #3498db11 0%, #2ecc7111 20%, #e74c3c11 40%, #f39c1211 60%, #9b59b611 80%, #1abc9c11 100%);
      }

      .content-section {
        height: 200px;
        margin: 20px 0;
        padding: 20px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        border: 2px solid;
      }

      .section-1 {
        background: #3498db33;
        border-color: #3498db;
      }
      .section-2 {
        background: #2ecc7133;
        border-color: #2ecc71;
      }
      .section-3 {
        background: #e74c3c33;
        border-color: #e74c3c;
      }
      .section-4 {
        background: #f39c1233;
        border-color: #f39c12;
      }
      .section-5 {
        background: #9b59b633;
        border-color: #9b59b6;
      }

      .scroll-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(155, 89, 182, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
        z-index: 10;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .scroll-position-line {
        position: absolute;
        left: 0;
        right: 0;
        height: 3px;
        background: #e74c3c;
        z-index: 5;
        pointer-events: none;
      }

      .scroll-marker {
        position: absolute;
        left: 10px;
        width: calc(100% - 20px);
        padding: 5px 10px;
        background: rgba(231, 76, 60, 0.1);
        border-left: 3px solid #e74c3c;
        font-size: 0.8rem;
        color: #e74c3c;
        pointer-events: none;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 20px 0;
      }

      button {
        padding: 12px 15px;
        background: #9b59b6;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 600;
      }

      button:hover {
        background: #8e44ad;
        transform: translateY(-2px);
      }

      button.secondary {
        background: #3498db;
      }

      button.secondary:hover {
        background: #2980b9;
      }

      .property-display {
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .property-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 10px 0;
        padding: 8px 12px;
        background: #34495e;
        border-radius: 6px;
      }

      .property-name {
        font-weight: bold;
        font-size: 1.1rem;
      }

      .property-value {
        font-family: "Courier New", monospace;
        font-size: 1.2rem;
        color: #f1c40f;
        font-weight: bold;
      }

      .scroll-controls {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .control-group {
        margin: 15px 0;
      }

      .control-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
      }

      .range-slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #9b59b6;
        cursor: pointer;
      }

      .range-value {
        text-align: center;
        font-weight: bold;
        color: #9b59b6;
        margin-top: 5px;
      }

      .progress-container {
        width: 100%;
        height: 8px;
        background: #ecf0f1;
        border-radius: 4px;
        margin: 20px 0;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #3498db, #9b59b6);
        width: 0%;
        transition: width 0.1s ease;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th {
        background: #9b59b6;
        color: white;
        padding: 12px 15px;
        text-align: left;
      }

      .comparison-table td {
        padding: 10px 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        font-size: 0.9rem;
        line-height: 1.5;
        white-space: pre;
      }

      .special-cases {
        background: #fff9e6;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #f1c40f;
        margin: 20px 0;
      }

      .case-example {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        border: 1px solid #e9ecef;
      }

      .scroll-events {
        background: #e8f6f3;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border: 2px solid #1abc9c;
      }

      @media (max-width: 968px) {
        .content {
          grid-template-columns: 1fr;
        }

        .controls {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>scrollTop å±æ€§è¯¦è§£</h1>
        <p class="subtitle">æ·±å…¥ç†è§£ scrollTop çš„å·¥ä½œåŸç†ã€è¯»å†™ç‰¹æ€§å’Œå®é™…åº”ç”¨</p>
      </header>

      <div class="content">
        <div class="demo-section">
          <h2>äº¤äº’æ¼”ç¤º</h2>
          <p>æ»šåŠ¨ä¸‹æ–¹å†…å®¹æˆ–ä½¿ç”¨æ§åˆ¶æŒ‰é’®ï¼Œè§‚å¯Ÿ scrollTop å€¼çš„å˜åŒ–</p>

          <div class="demo-container">
            <div class="scroll-element" id="scrollElement">
              <div class="scroll-indicator" id="scrollIndicator">scrollTop: <span id="scrollTopValue">0</span>px</div>
              <div class="scroll-content" id="scrollContent">
                <div class="content-section section-1">
                  <h3>ç¬¬ä¸€éƒ¨åˆ†</h3>
                  <p>scrollTop = 0px</p>
                  <p>æ»šåŠ¨ä½ç½®åœ¨é¡¶éƒ¨</p>
                </div>
                <div class="content-section section-2">
                  <h3>ç¬¬äºŒéƒ¨åˆ†</h3>
                  <p>ç›®æ ‡ä½ç½®: 200px</p>
                  <p>ç‚¹å‡»æŒ‰é’®æ»šåŠ¨åˆ°è¿™é‡Œ</p>
                </div>
                <div class="content-section section-3">
                  <h3>ç¬¬ä¸‰éƒ¨åˆ†</h3>
                  <p>ç›®æ ‡ä½ç½®: 400px</p>
                  <p>æ³¨æ„è§‚å¯Ÿ scrollTop å˜åŒ–</p>
                </div>
                <div class="content-section section-4">
                  <h3>ç¬¬å››éƒ¨åˆ†</h3>
                  <p>ç›®æ ‡ä½ç½®: 600px</p>
                  <p>scrollTop æ˜¯å¯è¯»å†™å±æ€§</p>
                </div>
                <div class="content-section section-5">
                  <h3>ç¬¬äº”éƒ¨åˆ†</h3>
                  <p>ç›®æ ‡ä½ç½®: 800px</p>
                  <p>æ¥è¿‘åº•éƒ¨äº†</p>
                </div>
              </div>
            </div>
          </div>

          <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          <div style="text-align: center; margin-bottom: 20px">
            <span id="progressText">æ»šåŠ¨è¿›åº¦: 0%</span>
          </div>

          <div class="scroll-controls">
            <div class="control-group">
              <label class="control-label">ç›´æ¥è®¾ç½® scrollTop å€¼:</label>
              <input type="range" min="0" max="1000" value="0" class="range-slider" id="scrollTopSlider" />
              <div class="range-value" id="scrollTopValueDisplay">0px</div>
            </div>
          </div>

          <div class="controls">
            <button onclick="scrollToSection(200)">æ»šåŠ¨åˆ°ç¬¬äºŒéƒ¨åˆ†</button>
            <button onclick="scrollToSection(400)">æ»šåŠ¨åˆ°ç¬¬ä¸‰éƒ¨åˆ†</button>
            <button onclick="scrollToSection(600)">æ»šåŠ¨åˆ°ç¬¬å››éƒ¨åˆ†</button>
            <button class="secondary" onclick="scrollToTop()">å›åˆ°é¡¶éƒ¨</button>
            <button class="secondary" onclick="scrollToBottom()">æ»šåŠ¨åˆ°åº•éƒ¨</button>
            <button onclick="addMoreContent()">æ·»åŠ æ›´å¤šå†…å®¹</button>
          </div>

          <div class="property-display">
            <h3 style="color: white; margin-top: 0">æ»šåŠ¨å±æ€§å€¼</h3>
            <div class="property-item">
              <span class="property-name">scrollTop:</span>
              <span class="property-value" id="scrollTopVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">scrollHeight:</span>
              <span class="property-value" id="scrollHeightVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">clientHeight:</span>
              <span class="property-value" id="clientHeightVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">æœ€å¤§ scrollTop:</span>
              <span class="property-value" id="maxScrollTopVal">0px</span>
            </div>
            <div class="property-item">
              <span class="property-name">æ»šåŠ¨ç™¾åˆ†æ¯”:</span>
              <span class="property-value" id="scrollPercentVal">0%</span>
            </div>
          </div>
        </div>

        <div class="explanation-section">
          <h2>scrollTop è¯¦è§£</h2>

          <div class="special-cases">
            <h3>ğŸ“Œ scrollTop æ ¸å¿ƒå®šä¹‰</h3>
            <p><strong>scrollTop = å…ƒç´ å†…å®¹å‚ç›´æ»šåŠ¨çš„åƒç´ æ•°</strong></p>
            <p>è¡¨ç¤ºå…ƒç´ å†…å®¹é¡¶éƒ¨åˆ°å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»ï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>å¯è¯»å†™</strong>å±æ€§ã€‚</p>
          </div>

          <h3>åŸºæœ¬æ¦‚å¿µ</h3>
          <div class="code-block">
// scrollTop è¡¨ç¤ºå†…å®¹æ»šåŠ¨çš„è·ç¦»
element.scrollTop = å…ƒç´ å†…å®¹é¡¶éƒ¨ åˆ° å¯è§†åŒºåŸŸé¡¶éƒ¨ çš„è·ç¦»

// å–å€¼èŒƒå›´
0 â‰¤ element.scrollTop â‰¤ (element.scrollHeight - element.clientHeight)

// è¯»å†™ç¤ºä¾‹
const element = document.getElementById('scrollElement');

// è¯»å–å½“å‰æ»šåŠ¨ä½ç½®
console.log('å½“å‰æ»šåŠ¨ä½ç½®:', element.scrollTop);

// è®¾ç½®æ»šåŠ¨ä½ç½®ï¼ˆå¯å†™å±æ€§ï¼‰
element.scrollTop = 300; // æ»šåŠ¨åˆ°300pxä½ç½®
          </div>

          <h3>ä¸å…¶ä»–æ»šåŠ¨å±æ€§çš„å…³ç³»</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>å±æ€§</th>
                <th>æè¿°</th>
                <th>æ˜¯å¦å¯å†™</th>
                <th>å–å€¼èŒƒå›´</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>scrollTop</strong></td>
                <td>å‚ç›´æ»šåŠ¨ä½ç½®</td>
                <td>æ˜¯</td>
                <td>0 åˆ° (scrollHeight - clientHeight)</td>
              </tr>
              <tr>
                <td>scrollLeft</td>
                <td>æ°´å¹³æ»šåŠ¨ä½ç½®</td>
                <td>æ˜¯</td>
                <td>0 åˆ° (scrollWidth - clientWidth)</td>
              </tr>
              <tr>
                <td>scrollHeight</td>
                <td>å†…å®¹æ€»é«˜åº¦</td>
                <td>å¦</td>
                <td>â‰¥ clientHeight</td>
              </tr>
              <tr>
                <td>clientHeight</td>
                <td>å¯è§†åŒºåŸŸé«˜åº¦</td>
                <td>å¦</td>
                <td>å›ºå®šå€¼</td>
              </tr>
            </tbody>
          </table>

          <h3>æ»šåŠ¨äº‹ä»¶å’Œç›‘å¬</h3>
          <div class="scroll-events">
            <h4>scroll äº‹ä»¶æ¼”ç¤º</h4>
            <p>å°è¯•æ»šåŠ¨ä¸Šæ–¹å†…å®¹ï¼Œè§‚å¯Ÿäº‹ä»¶è§¦å‘æƒ…å†µ</p>
            <div id="eventLog" style="height: 100px; overflow-y: auto; background: white; padding: 10px; border-radius: 4px; font-size: 0.8rem"></div>
          </div>

          <div class="code-block">
// ç›‘å¬æ»šåŠ¨äº‹ä»¶
element.addEventListener('scroll', function(event) {
    console.log('æ»šåŠ¨äº‹ä»¶è§¦å‘');
    console.log('å½“å‰ scrollTop:', this.scrollTop);
    console.log('æ»šåŠ¨ç™¾åˆ†æ¯”:', (this.scrollTop / (this.scrollHeight - this.clientHeight)) * 100 + '%');
    
    // æ£€æµ‹æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨
    const isAtBottom = this.scrollTop + this.clientHeight >= this.scrollHeight;
    if (isAtBottom) {
        console.log('å·²æ»šåŠ¨åˆ°åº•éƒ¨ï¼');
    }
    
    // æ£€æµ‹æ˜¯å¦æ»šåŠ¨åˆ°é¡¶éƒ¨
    const isAtTop = this.scrollTop === 0;
    if (isAtTop) {
        console.log('å·²æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼');
    }
});

// æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨é˜²æŠ–
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

const throttledScrollHandler = debounce(function() {
    // è¿™é‡Œæ‰§è¡Œéœ€è¦èŠ‚æµçš„æ“ä½œ
}, 100);

element.addEventListener('scroll', throttledScrollHandler);
          </div>

          <h3>ç‰¹æ®Šæƒ…å†µå’Œæ³¨æ„äº‹é¡¹</h3>

          <div class="case-example">
            <h4>æƒ…å†µ 1: ä¸å¯æ»šåŠ¨å…ƒç´ </h4>
            <p>å¯¹äºä¸å¯æ»šåŠ¨çš„å…ƒç´ ï¼ŒscrollTop å§‹ç»ˆä¸º 0ï¼š</p>
            <div class="code-block">
// å…ƒç´ æ²¡æœ‰æº¢å‡ºå†…å®¹
element.style.overflow = 'hidden';
console.log('ä¸å¯æ»šåŠ¨å…ƒç´  scrollTop:', element.scrollTop); // 0

// å³ä½¿å¼ºåˆ¶è®¾ç½®ä¹Ÿä¼šè¢«å¿½ç•¥
element.scrollTop = 100;
console.log('è®¾ç½®åçš„ scrollTop:', element.scrollTop); // ä»ç„¶ä¸º 0
            </div>
          </div>

          <div class="case-example">
            <h4>æƒ…å†µ 2: è¶…å‡ºèŒƒå›´çš„å€¼</h4>
            <p>è®¾ç½®è¶…å‡ºèŒƒå›´çš„å€¼ä¼šè¢«è‡ªåŠ¨ä¿®æ­£ï¼š</p>
            <div class="code-block">
const maxScroll = element.scrollHeight - element.clientHeight;

// è®¾ç½®è´Ÿå€¼
element.scrollTop = -100;
console.log('è´Ÿå€¼è¢«ä¿®æ­£ä¸º:', element.scrollTop); // 0

// è®¾ç½®è¶…å‡ºæœ€å¤§å€¼
element.scrollTop = maxScroll + 1000;
console.log('è¶…å‡ºæœ€å¤§å€¼è¢«ä¿®æ­£ä¸º:', element.scrollTop); // maxScroll
            </div>
          </div>

          <div class="case-example">
            <h4>æƒ…å†µ 3: å°æ•°å’Œæ•´æ•°</h4>
            <p>scrollTop å§‹ç»ˆè¿”å›æ•´æ•°ï¼Œä½†å¯ä»¥è®¾ç½®å°æ•°ï¼š</p>
            <div class="code-block">
// è®¾ç½®å°æ•°
element.scrollTop = 123.456;
console.log('è¯»å–åˆ°çš„å€¼:', element.scrollTop); // 123ï¼ˆæ•´æ•°ï¼‰

// åœ¨æŸäº›æµè§ˆå™¨ä¸­å¯èƒ½ä¼šæœ‰äºšåƒç´ æ»šåŠ¨
// ä½†è¯»å–æ—¶ä»ä¼šè¿”å›æ•´æ•°
            </div>
          </div>

          <h3>å®é™…åº”ç”¨åœºæ™¯</h3>
          <div class="code-block">
// åº”ç”¨ 1: å›åˆ°é¡¶éƒ¨åŠŸèƒ½
function scrollToTop() {
    element.scrollTop = 0;
}

// åº”ç”¨ 2: æ»šåŠ¨åˆ°åº•éƒ¨
function scrollToBottom() {
    element.scrollTop = element.scrollHeight - element.clientHeight;
}

// åº”ç”¨ 3: æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ 
function scrollToElement(targetElement) {
    const container = targetElement.parentElement;
    const elementTop = targetElement.offsetTop;
    const elementHeight = targetElement.offsetHeight;
    const containerHeight = container.clientHeight;
    
    container.scrollTop = elementTop - (containerHeight - elementHeight) / 2;
}

// åº”ç”¨ 4: å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
function smoothScrollTo(element, targetPosition, duration = 500) {
    const startPosition = element.scrollTop;
    const distance = targetPosition - startPosition;
    let startTime = null;
    
    function animation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1);
        
        // ç¼“åŠ¨å‡½æ•°
        const ease = progress => progress < 0.5 
            ? 4 * progress * progress * progress 
            : 1 - Math.pow(-2 * progress + 2, 3) / 2;
        
        element.scrollTop = startPosition + distance * ease(progress);
        
        if (timeElapsed < duration) {
            requestAnimationFrame(animation);
        }
    }
    
    requestAnimationFrame(animation);
}

// åº”ç”¨ 5: æ— é™æ»šåŠ¨åŠ è½½
function setupInfiniteScroll(container, loadCallback) {
    container.addEventListener('scroll', function() {
        const scrollBottom = this.scrollTop + this.clientHeight;
        const threshold = 100; // è·ç¦»åº•éƒ¨100pxæ—¶è§¦å‘
        
        if (scrollBottom >= this.scrollHeight - threshold) {
            loadCallback();
        }
    });
}

// åº”ç”¨ 6: é˜…è¯»è¿›åº¦æŒ‡ç¤ºå™¨
function updateScrollProgress(container, progressElement) {
    const scrollableHeight = container.scrollHeight - container.clientHeight;
    const progress = (container.scrollTop / scrollableHeight) * 100;
    
    progressElement.style.width = progress + '%';
    progressElement.textContent = Math.round(progress) + '%';
}

// åº”ç”¨ 7: è§†å·®æ»šåŠ¨æ•ˆæœ
function setupParallax(container, parallaxElements) {
    container.addEventListener('scroll', function() {
        const scrollTop = this.scrollTop;
        const scrollHeight = this.scrollHeight - this.clientHeight;
        const scrollPercent = scrollTop / scrollHeight;
        
        parallaxElements.forEach((element, index) => {
            const speed = 0.5 + (index * 0.1);
            const yPos = -(scrollTop * speed);
            element.style.transform = `translateY(${yPos}px)`;
        });
    });
}

// åº”ç”¨ 8: ç²˜æ€§å¯¼èˆª
function setupStickyNavigation(navElement, container) {
    const navOffset = navElement.offsetTop;
    
    container.addEventListener('scroll', function() {
        if (this.scrollTop >= navOffset) {
            navElement.classList.add('sticky');
        } else {
            navElement.classList.remove('sticky');
        }
    });
}
          </div>

          <h3>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
          <div class="special-cases">
            <p><strong>scroll äº‹ä»¶å¯èƒ½é¢‘ç¹è§¦å‘ï¼Œéœ€è¦æ³¨æ„æ€§èƒ½ï¼š</strong></p>
            <ul>
              <li>ä½¿ç”¨é˜²æŠ–(debounce)æˆ–èŠ‚æµ(throttle)é™åˆ¶æ‰§è¡Œé¢‘ç‡</li>
              <li>é¿å…åœ¨ scroll äº‹ä»¶ä¸­è¿›è¡Œå¤æ‚çš„DOMæ“ä½œ</li>
              <li>ä½¿ç”¨ requestAnimationFrame è¿›è¡ŒåŠ¨ç”»</li>
              <li>è€ƒè™‘ä½¿ç”¨ Intersection Observer æ›¿ä»£æ»šåŠ¨æ£€æµ‹</li>
            </ul>
            <div class="code-block">
// ä½¿ç”¨ Intersection Observer çš„ç°ä»£æ–¹æ³•
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            // å…ƒç´ è¿›å…¥è§†å£
            entry.target.classList.add('visible');
        }
    });
}, {
    threshold: 0.1 // å½“10%çš„å…ƒç´ å¯è§æ—¶è§¦å‘
});

// è§‚å¯Ÿéœ€è¦æ£€æµ‹çš„å…ƒç´ 
document.querySelectorAll('.observe-me').forEach(el => {
    observer.observe(el);
});
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // è·å–DOMå…ƒç´ 
      const scrollElement = document.getElementById("scrollElement");
      const scrollContent = document.getElementById("scrollContent");
      const scrollIndicator = document.getElementById("scrollIndicator");
      const scrollTopValue = document.getElementById("scrollTopValue");
      const progressBar = document.getElementById("progressBar");
      const progressText = document.getElementById("progressText");
      const eventLog = document.getElementById("eventLog");

      // è·å–å±æ€§æ˜¾ç¤ºå…ƒç´ 
      const scrollTopVal = document.getElementById("scrollTopVal");
      const scrollHeightVal = document.getElementById("scrollHeightVal");
      const clientHeightVal = document.getElementById("clientHeightVal");
      const maxScrollTopVal = document.getElementById("maxScrollTopVal");
      const scrollPercentVal = document.getElementById("scrollPercentVal");

      // è·å–æ§åˆ¶å…ƒç´ 
      const scrollTopSlider = document.getElementById("scrollTopSlider");
      const scrollTopValueDisplay = document.getElementById("scrollTopValueDisplay");

      // æ›´æ–°å±æ€§æ˜¾ç¤º
      function updateProperties() {
        const scrollTop = scrollElement.scrollTop;
        const scrollHeight = scrollElement.scrollHeight;
        const clientHeight = scrollElement.clientHeight;
        const maxScrollTop = Math.max(0, scrollHeight - clientHeight);
        const scrollPercent = maxScrollTop > 0 ? (scrollTop / maxScrollTop) * 100 : 0;

        scrollTopVal.textContent = scrollTop + "px";
        scrollHeightVal.textContent = scrollHeight + "px";
        clientHeightVal.textContent = clientHeight + "px";
        maxScrollTopVal.textContent = maxScrollTop + "px";
        scrollPercentVal.textContent = scrollPercent.toFixed(1) + "%";

        // æ›´æ–°æŒ‡ç¤ºå™¨
        scrollTopValue.textContent = scrollTop;

        // æ›´æ–°è¿›åº¦æ¡
        progressBar.style.width = scrollPercent + "%";
        progressText.textContent = `æ»šåŠ¨è¿›åº¦: ${scrollPercent.toFixed(1)}%`;

        // æ›´æ–°æ»‘å—
        scrollTopSlider.max = maxScrollTop;
        scrollTopSlider.value = scrollTop;
        scrollTopValueDisplay.textContent = scrollTop + "px";

        // æ›´æ–°å¯è§†åŒ–æ ‡è®°
        updateScrollMarkers();
      }

      // æ›´æ–°æ»šåŠ¨æ ‡è®°
      function updateScrollMarkers() {
        // æ¸…é™¤æ—§æ ‡è®°
        document.querySelectorAll(".scroll-position-line, .scroll-marker").forEach(el => el.remove());

        const scrollTop = scrollElement.scrollTop;
        const clientHeight = scrollElement.clientHeight;

        // å½“å‰ä½ç½®çº¿
        const positionLine = document.createElement("div");
        positionLine.className = "scroll-position-line";
        positionLine.style.top = scrollTop + 10 + "px";
        scrollElement.appendChild(positionLine);

        // å½“å‰ä½ç½®æ ‡è®°
        const positionMarker = document.createElement("div");
        positionMarker.className = "scroll-marker";
        positionMarker.style.top = scrollTop + 15 + "px";
        positionMarker.textContent = `å½“å‰ä½ç½®: ${scrollTop}px`;
        scrollElement.appendChild(positionMarker);
      }

      // æ·»åŠ äº‹ä»¶æ—¥å¿—
      function addEventLog(message) {
        const now = new Date();
        const time = now.toTimeString().split(" ")[0];
        const logEntry = document.createElement("div");
        logEntry.textContent = `[${time}] ${message}`;
        eventLog.appendChild(logEntry);
        eventLog.scrollTop = eventLog.scrollHeight;

        // é™åˆ¶æ—¥å¿—æ•°é‡
        if (eventLog.children.length > 10) {
          eventLog.removeChild(eventLog.firstChild);
        }
      }

      // æ§åˆ¶å‡½æ•°
      function scrollToSection(offset) {
        scrollElement.scrollTop = offset;
        addEventLog(`ç¼–ç¨‹æ»šåŠ¨åˆ°: ${offset}px`);
      }

      function scrollToTop() {
        scrollElement.scrollTop = 0;
        addEventLog("æ»šåŠ¨åˆ°é¡¶éƒ¨");
      }

      function scrollToBottom() {
        const maxScroll = scrollElement.scrollHeight - scrollElement.clientHeight;
        scrollElement.scrollTop = maxScroll;
        addEventLog("æ»šåŠ¨åˆ°åº•éƒ¨");
      }

      function addMoreContent() {
        const newSection = document.createElement("div");
        newSection.className = "content-section";
        newSection.style.background = "#1abc9c33";
        newSection.style.borderColor = "#1abc9c";
        newSection.innerHTML = `
                <h3>æ–°å¢éƒ¨åˆ†</h3>
                <p>åŠ¨æ€æ·»åŠ çš„å†…å®¹</p>
                <p>scrollHeight å¢åŠ äº†</p>
            `;
        scrollContent.appendChild(newSection);
        addEventLog("æ·»åŠ äº†æ–°å†…å®¹å—");
        updateProperties();
      }

      // å¹³æ»‘æ»šåŠ¨å‡½æ•°
      function smoothScrollTo(targetPosition, duration = 600) {
        const startPosition = scrollElement.scrollTop;
        const distance = targetPosition - startPosition;
        let startTime = null;

        function animation(currentTime) {
          if (startTime === null) startTime = currentTime;
          const timeElapsed = currentTime - startTime;
          const progress = Math.min(timeElapsed / duration, 1);

          // ç¼“åŠ¨å‡½æ•°
          const easeOutCubic = progress => 1 - Math.pow(1 - progress, 3);

          scrollElement.scrollTop = startPosition + distance * easeOutCubic(progress);

          if (timeElapsed < duration) {
            requestAnimationFrame(animation);
          }
        }

        requestAnimationFrame(animation);
      }

      // äº‹ä»¶ç›‘å¬
      scrollElement.addEventListener("scroll", function () {
        updateProperties();
        addEventLog(`scrollTop: ${this.scrollTop}px`);
      });

      scrollTopSlider.addEventListener("input", function () {
        const value = parseInt(this.value);
        scrollElement.scrollTop = value;
        scrollTopValueDisplay.textContent = value + "px";
      });

      // åˆå§‹åŒ–
      updateProperties();

      // æ§åˆ¶å°æ¼”ç¤º
      setTimeout(() => {
        console.log("=== scrollTop å±æ€§æ¼”ç¤º ===");
        console.log("åˆå§‹ scrollTop:", scrollElement.scrollTop);
        console.log("scrollHeight:", scrollElement.scrollHeight);
        console.log("clientHeight:", scrollElement.clientHeight);
        console.log("æœ€å¤§ scrollTop:", scrollElement.scrollHeight - scrollElement.clientHeight);

        // æ¼”ç¤ºå¯è¯»å†™ç‰¹æ€§
        console.log("\nğŸ”§ æ¼”ç¤ºå¯è¯»å†™ç‰¹æ€§:");
        const originalScrollTop = scrollElement.scrollTop;
        scrollElement.scrollTop = 100;
        console.log("è®¾ç½® scrollTop = 100, å½“å‰å€¼:", scrollElement.scrollTop);
        scrollElement.scrollTop = originalScrollTop;
        console.log("æ¢å¤åŸä½ç½®:", scrollElement.scrollTop);
      }, 1000);
    </script>
  </body>
</html>
