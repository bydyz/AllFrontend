<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>documentElement.scrollTop vs body.scrollTop è¯¦è§£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.2rem;
      }

      .content-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        margin-bottom: 40px;
      }

      .explanation {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .demo-area {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      h2 {
        color: #667eea;
        margin: 20px 0 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f0f0f0;
      }

      h3 {
        color: #2c3e50;
        margin: 15px 0 10px;
      }

      p {
        margin-bottom: 15px;
      }

      .code-example {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: "Courier New", monospace;
        line-height: 1.5;
        border-left: 4px solid #667eea;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th,
      .comparison-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }

      .comparison-table th {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        font-weight: 600;
      }

      .comparison-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .comparison-table tr:hover {
        background-color: #f1f8ff;
      }

      .mode-indicator {
        padding: 10px 15px;
        border-radius: 5px;
        font-weight: bold;
        margin: 10px 0;
        text-align: center;
      }

      .standard-mode {
        background: #4ecdc4;
        color: white;
      }

      .quirks-mode {
        background: #ff6b6b;
        color: white;
      }

      .scroll-demo {
        height: 200px;
        overflow: auto;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        background: #f8f9fa;
      }

      .scroll-content {
        height: 500px;
        background: linear-gradient(45deg, #4ecdc4, #44a08d, #667eea, #764ba2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        text-align: center;
      }

      .info-panel {
        height: 400px;
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        font-family: "Courier New", monospace;
        line-height: 1.8;
      }

      .visual-guide {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
        flex-wrap: wrap;
        gap: 15px;
      }

      .guide-item {
        text-align: center;
        flex: 1;
        min-width: 150px;
      }

      .guide-box {
        width: 100px;
        height: 80px;
        margin: 0 auto 10px;
        border: 2px solid #667eea;
        position: relative;
        background: #e8f4f8;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .guide-label {
        font-size: 0.9rem;
        color: #2c3e50;
      }

      .note {
        background: #fff8e1;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #ffc107;
        margin: 20px 0;
      }

      .warning {
        background: #ffebee;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #f44336;
        margin: 20px 0;
      }

      .browser-test {
        background: #e8f4f8;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #667eea;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        color: white;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          flex-direction: column;
        }
      }

      .doctype-example {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        margin: 10px 0;
        border-left: 4px solid #4caf50;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>documentElement.scrollTop vs body.scrollTop è¯¦è§£</h1>
        <p class="subtitle">æ·±å…¥ç†è§£æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼ä¸æ»šåŠ¨ä½ç½®è·å–çš„åŒºåˆ«</p>
      </header>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>

          <h3>ä»€ä¹ˆæ˜¯ DOCTYPEï¼Ÿ</h3>
          <p>DOCTYPEï¼ˆæ–‡æ¡£ç±»å‹å£°æ˜ï¼‰å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨å“ªç§æ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆDTDï¼‰æ¥è§£ææ–‡æ¡£ã€‚</p>

          <div class="doctype-example">
            <strong>æ ‡å‡†æ¨¡å¼ï¼ˆæœ‰ DOCTYPEï¼‰ï¼š</strong><br />
            &lt;!DOCTYPE html&gt;
          </div>

          <div class="doctype-example" style="border-left-color: #f44336">
            <strong>æ€ªå¼‚æ¨¡å¼ï¼ˆæ—  DOCTYPEï¼‰ï¼š</strong><br />
            ï¼ˆçœç•¥ DOCTYPE å£°æ˜ï¼‰
          </div>

          <h3>ä¸¤ç§æ»šåŠ¨ä½ç½®è·å–æ–¹å¼</h3>

          <div class="code-example">
            // æ ‡å‡†æ¨¡å¼ - ä½¿ç”¨ documentElement<br />
            document.documentElement.scrollTop<br /><br />

            // æ€ªå¼‚æ¨¡å¼ - ä½¿ç”¨ body<br />
            document.body.scrollTop
          </div>

          <div class="note"><strong>æ³¨æ„ï¼š</strong> document.documentElement æŒ‡å‘ &lt;html&gt; å…ƒç´ ï¼Œè€Œ document.body æŒ‡å‘ &lt;body&gt; å…ƒç´ ã€‚</div>

          <h3>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§åŒºåˆ«ï¼Ÿ</h3>
          <p>è¿™ç§å·®å¼‚æºäºå†å²åŸå› ï¼š</p>
          <ul>
            <li>æ—©æœŸæµè§ˆå™¨ï¼ˆIE6/7ï¼‰å°†æ»šåŠ¨ä½ç½®å­˜å‚¨åœ¨ body å…ƒç´ ä¸Š</li>
            <li>ç°ä»£æ ‡å‡†æµè§ˆå™¨å°†æ»šåŠ¨ä½ç½®å­˜å‚¨åœ¨ html å…ƒç´ ä¸Š</li>
            <li>DOCTYPE å£°æ˜å†³å®šäº†æµè§ˆå™¨ä½¿ç”¨å“ªç§æ¸²æŸ“æ¨¡å¼</li>
          </ul>

          <div class="visual-guide">
            <div class="guide-item">
              <div class="guide-box" style="background: #4ecdc4; color: white">&lt;html&gt;</div>
              <div class="guide-label">documentElement<br />æ ‡å‡†æ¨¡å¼</div>
            </div>
            <div class="guide-item">
              <div class="guide-box" style="background: #ff6b6b; color: white">&lt;body&gt;</div>
              <div class="guide-label">body<br />æ€ªå¼‚æ¨¡å¼</div>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>å®æ—¶æ¼”ç¤º</h2>

          <div class="mode-indicator" id="modeIndicator">æ£€æµ‹æ–‡æ¡£æ¨¡å¼ä¸­...</div>

          <div class="scroll-demo">
            <div class="scroll-content">
              æ»šåŠ¨è¿™ä¸ªåŒºåŸŸ<br />
              è§‚å¯Ÿä¸‹æ–¹æ•°å€¼å˜åŒ–
            </div>
          </div>

          <div class="info-panel">
            // å½“å‰æ–‡æ¡£æ¨¡å¼<br />
            document.compatMode: <span id="compatMode">--</span><br /><br />

            // æ»šåŠ¨ä½ç½®æ£€æµ‹<br />
            document.documentElement.scrollTop: <span id="docElementScrollTop">0</span><br />
            document.body.scrollTop: <span id="bodyScrollTop">0</span><br /><br />

            // å…¼å®¹æ€§å†™æ³•ç»“æœ<br />
            document.documentElement.scrollTop || document.body.scrollTop: <span id="compatResult">0</span>
          </div>

          <div class="browser-test">
            <h3>æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•</h3>
            <p>åœ¨ä¸åŒæµè§ˆå™¨ä¸­æµ‹è¯•è¿™äº›å±æ€§çš„è¡¨ç°ï¼š</p>

            <table class="comparison-table">
              <tr>
                <th>æµè§ˆå™¨</th>
                <th>æ ‡å‡†æ¨¡å¼</th>
                <th>æ€ªå¼‚æ¨¡å¼</th>
              </tr>
              <tr>
                <td>Chrome</td>
                <td>documentElement</td>
                <td>body</td>
              </tr>
              <tr>
                <td>Firefox</td>
                <td>documentElement</td>
                <td>body</td>
              </tr>
              <tr>
                <td>Safari</td>
                <td>documentElement</td>
                <td>body</td>
              </tr>
              <tr>
                <td>Edge</td>
                <td>documentElement</td>
                <td>body</td>
              </tr>
              <tr>
                <td>IE 9+</td>
                <td>documentElement</td>
                <td>body</td>
              </tr>
              <tr>
                <td>IE 6-8</td>
                <td>body</td>
                <td>body</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <table class="comparison-table">
        <tr>
          <th>ç‰¹æ€§</th>
          <th>document.documentElement.scrollTop</th>
          <th>document.body.scrollTop</th>
        </tr>
        <tr>
          <td>é€‚ç”¨æ¨¡å¼</td>
          <td>æ ‡å‡†æ¨¡å¼ï¼ˆæœ‰ DOCTYPEï¼‰</td>
          <td>æ€ªå¼‚æ¨¡å¼ï¼ˆæ—  DOCTYPEï¼‰</td>
        </tr>
        <tr>
          <td>å¯¹åº”å…ƒç´ </td>
          <td>&lt;html&gt; å…ƒç´ </td>
          <td>&lt;body&gt; å…ƒç´ </td>
        </tr>
        <tr>
          <td>ç°ä»£æµè§ˆå™¨</td>
          <td>âœ… æ¨èä½¿ç”¨</td>
          <td>âŒ ä¸æ¨è</td>
        </tr>
        <tr>
          <td>æ—§ç‰ˆIE</td>
          <td>âŒ IE6-8ä¸æ”¯æŒ</td>
          <td>âœ… å”¯ä¸€é€‰æ‹©</td>
        </tr>
        <tr>
          <td>æ€§èƒ½</td>
          <td>ç›¸åŒ</td>
          <td>ç›¸åŒ</td>
        </tr>
        <tr>
          <td>å¯è¯»æ€§</td>
          <td>æ›´ç¬¦åˆæ ‡å‡†</td>
          <td>å†å²é—ç•™</td>
        </tr>
      </table>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>å®é™…åº”ç”¨å»ºè®®</h2>

          <h3>æ¨èå†™æ³•</h3>
          <div class="code-example">
            // å…¼å®¹æ‰€æœ‰æƒ…å†µçš„å†™æ³•<br />
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;<br />
            const scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;
          </div>

          <h3>ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</h3>
          <div class="code-example">
            // ä½¿ç”¨ window.pageYOffset (æ¨è)<br />
            const scrollTop = window.pageYOffset;<br /><br />

            // ä½¿ç”¨ window.scrollY (æ›´ç°ä»£)<br />
            const scrollTop = window.scrollY;
          </div>

          <div class="note"><strong>æœ€ä½³å®è·µï¼š</strong> åœ¨ç°ä»£é¡¹ç›®ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨ <code>window.pageYOffset</code> æˆ– <code>window.scrollY</code>ã€‚</div>

          <h3>è®¾ç½®æ»šåŠ¨ä½ç½®</h3>
          <div class="code-example">
            // è®¾ç½®æ»šåŠ¨ä½ç½®ï¼ˆåŒæ ·éœ€è¦å…¼å®¹å¤„ç†ï¼‰<br />
            document.documentElement.scrollTop = 100;<br />
            document.body.scrollTop = 100; // ç¡®ä¿æ€ªå¼‚æ¨¡å¼ç”Ÿæ•ˆ<br /><br />

            // ç°ä»£æ¨èå†™æ³•<br />
            window.scrollTo(0, 100);<br />
            // æˆ–ä½¿ç”¨å¹³æ»‘æ»šåŠ¨<br />
            window.scrollTo({<br />
            &nbsp;&nbsp;top: 100,<br />
            &nbsp;&nbsp;behavior: 'smooth'<br />
            });
          </div>
        </div>

        <div class="demo-area">
          <h2>ä»£ç ç¤ºä¾‹</h2>

          <h3>å›åˆ°é¡¶éƒ¨åŠŸèƒ½</h3>
          <div class="code-example">
            function scrollToTop() {<br />
            &nbsp;&nbsp;// ä¼ ç»Ÿå…¼å®¹å†™æ³•<br />
            &nbsp;&nbsp;document.documentElement.scrollTop = 0;<br />
            &nbsp;&nbsp;document.body.scrollTop = 0;<br />
            &nbsp;&nbsp;<br />
            &nbsp;&nbsp;// ç°ä»£æ¨èå†™æ³•<br />
            &nbsp;&nbsp;window.scrollTo({<br />
            &nbsp;&nbsp;&nbsp;&nbsp;top: 0,<br />
            &nbsp;&nbsp;&nbsp;&nbsp;behavior: 'smooth'<br />
            &nbsp;&nbsp;});<br />
            }
          </div>

          <h3>æ£€æµ‹æ»šåŠ¨æ–¹å‘</h3>
          <div class="code-example">
            let lastScrollTop = 0;<br /><br />

            window.addEventListener('scroll', function() {<br />
            &nbsp;&nbsp;const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;<br />
            &nbsp;&nbsp;<br />
            &nbsp;&nbsp;if (scrollTop > lastScrollTop) {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;console.log('å‘ä¸‹æ»šåŠ¨');<br />
            &nbsp;&nbsp;} else {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;console.log('å‘ä¸Šæ»šåŠ¨');<br />
            &nbsp;&nbsp;}<br />
            &nbsp;&nbsp;<br />
            &nbsp;&nbsp;lastScrollTop = scrollTop;<br />
            });
          </div>

          <div class="warning"><strong>é‡è¦æé†’ï¼š</strong> åœ¨ Reactã€Vue ç­‰ç°ä»£æ¡†æ¶ä¸­ï¼Œé¿å…ç›´æ¥æ“ä½œ DOMï¼Œä½¿ç”¨æ¡†æ¶æä¾›çš„æ»šåŠ¨å¤„ç†æ–¹å¼ã€‚</div>
        </div>
      </div>

      <div class="code-example">
        // å®Œæ•´çš„æ»šåŠ¨ä½ç½®å·¥å…·å‡½æ•°<br />
        const ScrollUtils = {<br />
        &nbsp;&nbsp;// è·å–æ»šåŠ¨ä½ç½®<br />
        &nbsp;&nbsp;getScrollPosition() {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;return {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x: window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y: window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop<br />
        &nbsp;&nbsp;&nbsp;&nbsp;};<br />
        &nbsp;&nbsp;},<br />
        &nbsp;&nbsp;<br />
        &nbsp;&nbsp;// è®¾ç½®æ»šåŠ¨ä½ç½®<br />
        &nbsp;&nbsp;setScrollPosition(x, y, behavior = 'auto') {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;if (window.scrollTo) {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.scrollTo({<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left: x,<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top: y,<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;behavior: behavior<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br />
        &nbsp;&nbsp;&nbsp;&nbsp;} else {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å…¼å®¹æ—§æµè§ˆå™¨<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.documentElement.scrollLeft = x;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.documentElement.scrollTop = y;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.scrollLeft = x;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.scrollTop = y;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;}<br />
        &nbsp;&nbsp;},<br />
        &nbsp;&nbsp;<br />
        &nbsp;&nbsp;// æ£€æµ‹æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨<br />
        &nbsp;&nbsp;isScrollToBottom(threshold = 0) {<br />
        &nbsp;&nbsp;&nbsp;&nbsp;const scrollPosition = this.getScrollPosition();<br />
        &nbsp;&nbsp;&nbsp;&nbsp;const windowHeight = window.innerHeight;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;const documentHeight = Math.max(<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.scrollHeight,<br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.documentElement.scrollHeight<br />
        &nbsp;&nbsp;&nbsp;&nbsp;);<br />
        &nbsp;&nbsp;&nbsp;&nbsp;<br />
        &nbsp;&nbsp;&nbsp;&nbsp;return scrollPosition.y + windowHeight >= documentHeight - threshold;<br />
        &nbsp;&nbsp;}<br />
        };
      </div>

      <footer>
        <p>documentElement.scrollTop vs body.scrollTop è¯¦è§£ &copy; 2023 - äº¤äº’å¼å‰ç«¯æ•™ç¨‹</p>
      </footer>
    </div>

    <script>
      // æ£€æµ‹æ–‡æ¡£æ¨¡å¼å¹¶æ›´æ–°æ˜¾ç¤º
      function updateModeInfo() {
        const compatMode = document.compatMode;
        const modeIndicator = document.getElementById("modeIndicator");
        const compatModeSpan = document.getElementById("compatMode");

        if (compatMode === "CSS1Compat") {
          modeIndicator.textContent = "ğŸ“š æ ‡å‡†æ¨¡å¼ (æœ‰ DOCTYPE)";
          modeIndicator.className = "mode-indicator standard-mode";
          compatModeSpan.textContent = '"CSS1Compat" (æ ‡å‡†æ¨¡å¼)';
        } else {
          modeIndicator.textContent = "âš ï¸ æ€ªå¼‚æ¨¡å¼ (æ—  DOCTYPE)";
          modeIndicator.className = "mode-indicator quirks-mode";
          compatModeSpan.textContent = '"BackCompat" (æ€ªå¼‚æ¨¡å¼)';
        }
      }

      // æ›´æ–°æ»šåŠ¨ä½ç½®ä¿¡æ¯
      function updateScrollInfo() {
        const docElementScrollTop = document.documentElement.scrollTop;
        const bodyScrollTop = document.body.scrollTop;
        const compatResult = docElementScrollTop || bodyScrollTop;

        document.getElementById("docElementScrollTop").textContent = docElementScrollTop;
        document.getElementById("bodyScrollTop").textContent = bodyScrollTop;
        document.getElementById("compatResult").textContent = compatResult;
      }

      // åˆå§‹æ›´æ–°
      updateModeInfo();
      updateScrollInfo();

      // ç›‘å¬æ»šåŠ¨äº‹ä»¶
      window.addEventListener("scroll", updateScrollInfo);

      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
      window.addEventListener("load", function () {
        updateModeInfo();
        updateScrollInfo();

        // è¾“å‡ºè¯¦ç»†ä¿¡æ¯åˆ°æ§åˆ¶å°
        console.log("æ–‡æ¡£æ¨¡å¼:", document.compatMode);
        console.log("document.documentElement.scrollTop:", document.documentElement.scrollTop);
        console.log("document.body.scrollTop:", document.body.scrollTop);
        console.log("window.pageYOffset:", window.pageYOffset);
        console.log("window.scrollY:", window.scrollY);
      });
    </script>
  </body>
</html>
