<!DOCTYPE html>
<html>
  <head>
    <title>clickäº‹ä»¶</title>
    <style>
      div {
        padding: 30px;
        margin: 10px;
        border: 2px solid #333;
      }
      #grandparent {
        background: #ffcccc;
      }
      #parent {
        background: #ccffcc;
      }
      #child {
        background: #ccccff;
      }
      .log {
        margin: 5px 0;
        padding: 5px;
        border-left: 3px solid #666;
      }
      .capture {
        border-color: red;
        background: #ffe6e6;
      }
      .target {
        border-color: blue;
        background: #e6e6ff;
      }
      .bubble {
        border-color: green;
        background: #e6ffe6;
      }
    </style>
  </head>
  <body>
    <div id="grandparent">
      ç¥–çˆ¶å…ƒç´ 
      <div id="parent">
        çˆ¶å…ƒç´ 
        <div id="child">å­å…ƒç´ ï¼ˆç‚¹å‡»æˆ‘ï¼‰</div>
      </div>
    </div>

    <button id="clearLogs">æ¸…ç©ºæ—¥å¿—</button>
    <div id="eventLogs"></div>

    <script>
      const logs = document.getElementById("eventLogs");

      function logEvent(message, phase) {
        const log = document.createElement("div");
        log.className = `log ${phase}`;
        log.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
        logs.appendChild(log);
        logs.scrollTop = logs.scrollHeight;
      }

      // æ¸…ç©ºæ—¥å¿—
      document.getElementById("clearLogs").addEventListener("click", () => {
        logs.innerHTML = "";
      });

      // è·å–æ‰€æœ‰å…ƒç´ 
      const grandparent = document.getElementById("grandparent");
      const parent = document.getElementById("parent");
      const child = document.getElementById("child");

      // === æ•è·é˜¶æ®µç›‘å¬ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰===
      // ä½¿ç”¨ addEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•° true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘

      window.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ Window - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      document.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ Document - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      document.documentElement.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ HTML - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      document.body.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ Body - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      grandparent.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ ç¥–çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      parent.addEventListener(
        "click",
        function (e) {
          if (e.eventPhase === Event.CAPTURING_PHASE) {
            logEvent("ğŸ“¥ çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ", "capture");
          }
        },
        true
      );

      // === ç›®æ ‡é˜¶æ®µç›‘å¬ ===
      child.addEventListener("click", function (e) {
        logEvent("ğŸ¯ å­å…ƒç´  - ç›®æ ‡é˜¶æ®µ", "target");
      });

      // === å†’æ³¡é˜¶æ®µç›‘å¬ï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰===
      // é»˜è®¤æƒ…å†µä¸‹ï¼ŒaddEventListener åœ¨å†’æ³¡é˜¶æ®µè§¦å‘

      parent.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ çˆ¶å…ƒç´  - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });

      grandparent.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ ç¥–çˆ¶å…ƒç´  - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });

      document.body.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ Body - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });

      document.documentElement.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ HTML - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });

      document.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ Document - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });

      window.addEventListener("click", function (e) {
        if (e.eventPhase === Event.BUBBLING_PHASE) {
          logEvent("ğŸ“¤ Window - å†’æ³¡é˜¶æ®µ", "bubble");
        }
      });
    </script>
  </body>
</html>
