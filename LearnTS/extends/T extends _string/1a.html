<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScript T extends string è¯¦è§£</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f7fa;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        color: white;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
      }

      .subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .section {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 25px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f0f0f0;
      }

      .demo-box {
        margin-bottom: 30px;
        padding: 20px;
        border-radius: 10px;
        background: #f8f9fa;
        transition: all 0.3s ease;
      }

      .demo-box:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .demo-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 1.2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .demo-code {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        margin: 15px 0;
        overflow-x: auto;
        font-size: 0.95rem;
        white-space: pre;
      }

      .demo-output {
        padding: 15px;
        background: white;
        border-radius: 8px;
        border-left: 4px solid;
        margin-top: 15px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .basic-demo {
        border-left-color: #3b82f6;
      }
      .literal-demo {
        border-left-color: #10b981;
      }
      .template-demo {
        border-left-color: #f59e0b;
      }
      .union-demo {
        border-left-color: #ef4444;
      }
      .advanced-demo {
        border-left-color: #8b5cf6;
      }

      .interactive-demo {
        margin-top: 30px;
      }

      .code-executor {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .code-input {
        width: 100%;
        min-height: 120px;
        background: #0f172a;
        color: #e2e8f0;
        border: 1px solid #334155;
        border-radius: 6px;
        padding: 15px;
        font-family: "Courier New", monospace;
        font-size: 1rem;
        margin-bottom: 15px;
        resize: vertical;
      }

      .run-button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: background 0.3s;
      }

      .run-button:hover {
        background: #2563eb;
      }

      .output-area {
        background: #0f172a;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        min-height: 80px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .summary {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-top: 40px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 25px;
      }

      .summary-item {
        padding: 20px;
        border-radius: 10px;
        background-color: #f8f9fa;
      }

      .summary-item h3 {
        margin-bottom: 15px;
        color: #2c3e50;
      }

      .comparison {
        margin-top: 40px;
        padding: 25px;
        background: linear-gradient(135deg, #fef3c7 0%, #fef7ed 100%);
        border-radius: 12px;
        border-left: 6px solid #f59e0b;
      }

      .comparison h3 {
        color: #92400e;
        margin-bottom: 15px;
      }

      footer {
        text-align: center;
        margin-top: 50px;
        padding: 25px;
        color: #7f8c8d;
        font-size: 0.95rem;
        border-top: 1px solid #e0e0e0;
      }

      @media (max-width: 768px) {
        .container {
          grid-template-columns: 1fr;
        }
      }

      .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-left: 10px;
      }

      .badge-ts {
        background: #3178c6;
        color: white;
      }
      .badge-important {
        background: #ef4444;
        color: white;
      }
      .badge-success {
        background: #10b981;
        color: white;
      }
      .badge-warning {
        background: #f59e0b;
        color: white;
      }

      .method-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }

      .method-table th,
      .method-table td {
        border: 1px solid #e2e8f0;
        padding: 12px;
        text-align: left;
      }

      .method-table th {
        background: #f8fafc;
        font-weight: 600;
      }

      .feature-tag {
        display: inline-block;
        padding: 4px 8px;
        background: #dbeafe;
        color: #1e40af;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-right: 5px;
      }

      .type-highlight {
        color: #f59e0b;
        font-weight: bold;
      }

      .note {
        background: #f0f9ff;
        border-left: 4px solid #0ea5e9;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }

      .warning {
        background: #fef2f2;
        border-left: 4px solid #ef4444;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }

      .success {
        background: #f0fdf4;
        border-left: 4px solid #10b981;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }

      .data-type {
        display: inline-block;
        padding: 2px 8px;
        background: #e2e8f0;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 0.9rem;
        margin: 2px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>TypeScript T extends string è¯¦è§£</h1>
      <p class="subtitle">æ¢ç´¢ T extends string å¯ä»¥æ¥å—çš„æ‰€æœ‰æ•°æ®ç±»å‹å’Œå®é™…åº”ç”¨</p>
    </header>

    <div class="success"><strong>âœ… T extends string å¯ä»¥æ¥å—çš„æ•°æ®ç±»å‹ï¼š</strong> å­—ç¬¦ä¸²å­—é¢é‡ã€æ¨¡æ¿å­—ç¬¦ä¸²ã€å­—ç¬¦ä¸²è”åˆç±»å‹ã€æ³›å‹å­—ç¬¦ä¸²ç±»å‹ï¼Œä»¥åŠä»»ä½•å¯ä»¥èµ‹å€¼ç»™ string çš„ç±»å‹ã€‚</div>

    <div class="warning"><strong>âŒ T extends string ä¸èƒ½æ¥å—çš„æ•°æ®ç±»å‹ï¼š</strong> String å¯¹è±¡ã€numberã€booleanã€nullã€undefinedã€objectã€array ç­‰éå­—ç¬¦ä¸²åŸå§‹ç±»å‹ã€‚</div>

    <div class="container">
      <section class="section">
        <h2>ğŸ¯ åŸºç¡€å­—ç¬¦ä¸²ç±»å‹</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡</span>
            <span class="badge badge-success">å¯æ¥å—</span>
          </div>
          <div class="demo-code">
// 1. æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡
function processString&lt;T extends string&gt;(input: T): T {
    return input;
}

// âœ… å¯æ¥å—çš„ç±»å‹ç¤ºä¾‹
const result1 = processString("hello");           // T = "hello"
const result2 = processString("world");           // T = "world"
const result3 = processString("");                // T = "" (ç©ºå­—ç¬¦ä¸²)
const result4 = processString("123");             // T = "123" (æ•°å­—å­—ç¬¦ä¸²)

// å®é™…ç±»å‹æ¨æ–­
type Result1 = typeof result1;  // "hello"
type Result2 = typeof result2;  // "world"
type Result3 = typeof result3;  // ""
type Result4 = typeof result4;  // "123"

console.log("æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡ç¤ºä¾‹:");
console.log("result1:", result1, "ç±»å‹:", typeof result1);
console.log("result2:", result2, "ç±»å‹:", typeof result2);
console.log("result3:", result3, "ç±»å‹:", typeof result3);
console.log("result4:", result4, "ç±»å‹:", typeof result4);

// ä½¿ç”¨å˜é‡ï¼ˆç±»å‹ä¼šæ‰©å±•ä¸º stringï¼‰
let dynamicString = "dynamic";
const result5 = processString(dynamicString);     // T = string

console.log("åŠ¨æ€å­—ç¬¦ä¸²:", result5, "ç±»å‹:", typeof result5);
          </div>
          <div class="demo-output basic-demo" id="output1">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. å­—ç¬¦ä¸²è”åˆç±»å‹</span>
            <span class="badge badge-success">å¯æ¥å—</span>
          </div>
          <div class="demo-code">
// 2. å­—ç¬¦ä¸²è”åˆç±»å‹
type Color = "red" | "green" | "blue";
type Size = "small" | "medium" | "large";

function createConfig&lt;T extends string&gt;(
    type: T, 
    value: string
): { type: T; value: string } {
    return { type, value };
}

// âœ… å­—ç¬¦ä¸²è”åˆç±»å‹ç¤ºä¾‹
const colorConfig = createConfig("red" as Color, "#ff0000");
const sizeConfig = createConfig("medium" as Size, "ä¸­å·");

// ç›´æ¥ä½¿ç”¨å­—é¢é‡ï¼ˆTypeScript ä¼šè‡ªåŠ¨æ¨æ–­ï¼‰
const directColor = createConfig("blue", "#0000ff");    // T = "blue"
const directSize = createConfig("large", "å¤§å·");       // T = "large"

console.log("å­—ç¬¦ä¸²è”åˆç±»å‹ç¤ºä¾‹:");
console.log("é¢œè‰²é…ç½®:", colorConfig);
console.log("å°ºå¯¸é…ç½®:", sizeConfig);
console.log("ç›´æ¥é¢œè‰²:", directColor);
console.log("ç›´æ¥å°ºå¯¸:", directSize);

// æ›´å¤æ‚çš„è”åˆç±»å‹
type HttpMethod = "GET" | "POST" | "PUT" | "DELETE" | "PATCH";

function createRequest&lt;T extends HttpMethod&gt;(
    method: T,
    url: string
): { method: T; url: string } {
    return { method, url };
}

const getRequest = createRequest("GET", "/api/users");
const postRequest = createRequest("POST", "/api/users");

console.log("HTTPæ–¹æ³•ç¤ºä¾‹:");
console.log("GETè¯·æ±‚:", getRequest);
console.log("POSTè¯·æ±‚:", postRequest);

// é”™è¯¯ç¤ºä¾‹ - ç¼–è¯‘æ—¶æŠ¥é”™
// const invalidRequest = createRequest("HEAD", "/api/users"); // "HEAD" ä¸åœ¨ HttpMethod ä¸­
          </div>
          <div class="demo-output basic-demo" id="output2">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸ¨ æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. åŸºç¡€æ¨¡æ¿å­—ç¬¦ä¸²</span>
            <span class="badge badge-success">å¯æ¥å—</span>
          </div>
          <div class="demo-code">
// 1. åŸºç¡€æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹
type Email = `${string}@${string}.${string}`;
type Phone = `+${number}-${string}`;

function validateContact&lt;T extends Email | Phone&gt;(
    contact: T
): { contact: T; isValid: boolean } {
    let isValid = false;
    
    if (contact.includes('@')) {
        // é‚®ç®±éªŒè¯
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        isValid = emailRegex.test(contact);
    } else {
        // ç”µè¯éªŒè¯
        const phoneRegex = /^\+\d+-\d+$/;
        isValid = phoneRegex.test(contact);
    }
    
    return { contact, isValid };
}

// âœ… æ¨¡æ¿å­—ç¬¦ä¸²ç¤ºä¾‹
const emailResult = validateContact("user@example.com");
const phoneResult = validateContact("+86-13800138000");

console.log("æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹ç¤ºä¾‹:");
console.log("é‚®ç®±éªŒè¯:", emailResult);
console.log("ç”µè¯éªŒè¯:", phoneResult);

// æ›´å¤æ‚çš„æ¨¡æ¿æ¨¡å¼
type ApiRoute = `/api/${string}/${string}`;
type AdminRoute = `/admin/${string}`;

function createRoute&lt;T extends ApiRoute | AdminRoute&gt;(route: T): T {
    return route;
}

const apiRoute = createRoute("/api/users/list");
const adminRoute = createRoute("/admin/dashboard");

console.log("è·¯ç”±åˆ›å»ºç¤ºä¾‹:");
console.log("APIè·¯ç”±:", apiRoute);
console.log("ç®¡ç†è·¯ç”±:", adminRoute);

// é”™è¯¯ç¤ºä¾‹
// const invalidRoute = createRoute("/invalid/route"); // ä¸ç¬¦åˆæ¨¡æ¿æ¨¡å¼
          </div>
          <div class="demo-output template-demo" id="output3">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. é«˜çº§æ¨¡æ¿æ¨¡å¼</span>
            <span class="badge badge-important">é«˜çº§ç‰¹æ€§</span>
          </div>
          <div class="demo-code">
// 2. é«˜çº§æ¨¡æ¿å­—ç¬¦ä¸²æ¨¡å¼
type UUID = `${string}-${string}-${string}-${string}-${string}`;
type Version = `v${number}.${number}.${number}`;
type CSSColor = `#${string}` | `rgb(${number}, ${number}, ${number})`;

function formatValue&lt;T extends UUID | Version | CSSColor&gt;(
    value: T
): { original: T; formatted: string } {
    let formatted = value;
    
    if (value.startsWith('#')) {
        formatted = `é¢œè‰²: ${value}`;
    } else if (value.startsWith('v')) {
        formatted = `ç‰ˆæœ¬: ${value}`;
    } else if (value.includes('-')) {
        formatted = `UUID: ${value}`;
    }
    
    return { original: value, formatted };
}

// âœ… é«˜çº§æ¨¡æ¿å­—ç¬¦ä¸²ç¤ºä¾‹
const uuidValue: UUID = "123e4567-e89b-12d3-a456-426614174000";
const versionValue: Version = "v1.2.3";
const colorValue: CSSColor = "#ff0000";

const uuidResult = formatValue(uuidValue);
const versionResult = formatValue(versionValue);
const colorResult = formatValue(colorValue);

console.log("é«˜çº§æ¨¡æ¿å­—ç¬¦ä¸²ç¤ºä¾‹:");
console.log("UUID:", uuidResult);
console.log("ç‰ˆæœ¬:", versionResult);
console.log("é¢œè‰²:", colorResult);

// åŠ¨æ€ç”Ÿæˆæ¨¡æ¿ç±»å‹
type DynamicTemplate&lt;Prefix extends string&gt; = `${Prefix}-${string}`;

function createDynamicId&lt;T extends DynamicTemplate<"id" | "user" | "item">&gt;(
    id: T
): T {
    return id;
}

const userId = createDynamicId("user-12345");
const itemId = createDynamicId("item-abcde");

console.log("åŠ¨æ€æ¨¡æ¿ç¤ºä¾‹:");
console.log("ç”¨æˆ·ID:", userId);
console.log("ç‰©å“ID:", itemId);
          </div>
          <div class="demo-output template-demo" id="output4">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <div class="container">
      <section class="section">
        <h2>ğŸ”— å¤æ‚è”åˆç±»å‹</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. å¤šå±‚è”åˆç±»å‹</span>
            <span class="badge badge-success">å¯æ¥å—</span>
          </div>
          <div class="demo-code">
// 1. å¤šå±‚è”åˆç±»å‹
type Status = "pending" | "success" | "error";
type Priority = "low" | "medium" | "high" | "critical";
type Category = "tech" | "business" | "design" | "marketing";

type TaskType = Status | Priority | Category;

function createTask&lt;T extends TaskType&gt;(
    type: T,
    description: string
): { type: T; description: string; id: string } {
    return {
        type,
        description,
        id: Math.random().toString(36).substr(2, 9)
    };
}

// âœ… å¤šå±‚è”åˆç±»å‹ç¤ºä¾‹
const statusTask = createTask("pending", "ç­‰å¾…å¤„ç†çš„ä»»åŠ¡");
const priorityTask = createTask("high", "é«˜ä¼˜å…ˆçº§ä»»åŠ¡");
const categoryTask = createTask("tech", "æŠ€æœ¯ç›¸å…³ä»»åŠ¡");

console.log("å¤šå±‚è”åˆç±»å‹ç¤ºä¾‹:");
console.log("çŠ¶æ€ä»»åŠ¡:", statusTask);
console.log("ä¼˜å…ˆçº§ä»»åŠ¡:", priorityTask);
console.log("åˆ†ç±»ä»»åŠ¡:", categoryTask);

// æ›´å¤æ‚çš„äº¤å‰è”åˆ
type UserRole = "admin" | "user" | "guest";
type UserStatus = "active" | "inactive" | "banned";

type UserType = `${UserRole}-${UserStatus}`;

function createUser&lt;T extends UserType&gt;(
    userType: T,
    username: string
): { userType: T; username: string } {
    return { userType, username };
}

const adminUser = createUser("admin-active", "superadmin");
const guestUser = createUser("guest-inactive", "visitor");

console.log("äº¤å‰è”åˆç±»å‹ç¤ºä¾‹:");
console.log("ç®¡ç†å‘˜ç”¨æˆ·:", adminUser);
console.log("è®¿å®¢ç”¨æˆ·:", guestUser);
          </div>
          <div class="demo-output union-demo" id="output5">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²</span>
            <span class="badge badge-important">é«˜çº§ç‰¹æ€§</span>
          </div>
          <div class="demo-code">
// 2. æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²çº¦æŸ
type ExtractString&lt;T&gt; = T extends string ? T : never;

// ä»å¯¹è±¡ç±»å‹ä¸­æå–å­—ç¬¦ä¸²å±æ€§
type StringKeys&lt;T&gt; = {
    [K in keyof T]: T[K] extends string ? K : never;
}[keyof T];

// ä»è”åˆç±»å‹ä¸­æå–ç‰¹å®šæ¨¡å¼çš„å­—ç¬¦ä¸²
type FilterByPrefix&lt;T, Prefix extends string&gt; = 
    T extends `${Prefix}${infer Rest}` ? T : never;

// ç¤ºä¾‹æ¥å£
interface User {
    id: number;
    name: string;
    email: string;
    age: number;
    phone: string;
    createdAt: Date;
}

// æå–å­—ç¬¦ä¸²å±æ€§å
type UserStringKeys = StringKeys&lt;User&gt;; // "name" | "email" | "phone"

function getStringProperty&lt;
    T, 
    K extends StringKeys&lt;T&gt;
&gt;(obj: T, key: K): string {
    return obj[key];
}

const user: User = {
    id: 1,
    name: "å¼ ä¸‰",
    email: "zhangsan@example.com",
    age: 25,
    phone: "+86-13800138000",
    createdAt: new Date()
};

console.log("æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²çº¦æŸ:");
console.log("ç”¨æˆ·å:", getStringProperty(user, "name"));
console.log("ç”¨æˆ·é‚®ç®±:", getStringProperty(user, "email"));
console.log("ç”¨æˆ·ç”µè¯:", getStringProperty(user, "phone"));

// é”™è¯¯ç¤ºä¾‹
// console.log(getStringProperty(user, "id"));      // é”™è¯¯ï¼šid ä¸æ˜¯å­—ç¬¦ä¸²å±æ€§
// console.log(getStringProperty(user, "age"));     // é”™è¯¯ï¼šage ä¸æ˜¯å­—ç¬¦ä¸²å±æ€§
// console.log(getStringProperty(user, "createdAt")); // é”™è¯¯ï¼šcreatedAt ä¸æ˜¯å­—ç¬¦ä¸²å±æ€§

// è¿‡æ»¤ç‰¹å®šå‰ç¼€çš„å­—ç¬¦ä¸²
type ApiEndpoints = "getUsers" | "createUser" | "deleteUser" | "updateSettings";
type GetEndpoints = FilterByPrefix&lt;ApiEndpoints, "get"&gt;; // "getUsers"

console.log("è¿‡æ»¤åçš„ç«¯ç‚¹:", "getUsers" as GetEndpoints);
          </div>
          <div class="demo-output union-demo" id="output6">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸš« ä¸å¯æ¥å—çš„ç±»å‹</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. éå­—ç¬¦ä¸²åŸå§‹ç±»å‹</span>
            <span class="badge badge-warning">ä¸å¯æ¥å—</span>
          </div>
          <div class="demo-code">
// âŒ è¿™äº›ç±»å‹ä¸èƒ½ç”¨äº T extends string

function stringProcessor&lt;T extends string&gt;(input: T): string {
    return input.toUpperCase();
}

// ç¼–è¯‘æ—¶é”™è¯¯ç¤ºä¾‹ï¼ˆåœ¨TypeScriptä¸­ä¼šæŠ¥é”™ï¼‰
/*
// æ•°å­—ç±»å‹
stringProcessor(123);                    // é”™è¯¯ï¼
stringProcessor(3.14);                   // é”™è¯¯ï¼

// å¸ƒå°”ç±»å‹
stringProcessor(true);                   // é”™è¯¯ï¼
stringProcessor(false);                  // é”™è¯¯ï¼

// null å’Œ undefined
stringProcessor(null);                   // é”™è¯¯ï¼
stringProcessor(undefined);              // é”™è¯¯ï¼

// å¯¹è±¡ç±»å‹
stringProcessor({});                     // é”™è¯¯ï¼
stringProcessor([]);                     // é”™è¯¯ï¼
stringProcessor(new Date());             // é”™è¯¯ï¼

// String å¯¹è±¡ï¼ˆæ³¨æ„ï¼šä¸æ˜¯ string åŸå§‹ç±»å‹ï¼‰
stringProcessor(new String("hello"));    // é”™è¯¯ï¼

// ç¬¦å·ç±»å‹
stringProcessor(Symbol("test"));         // é”™è¯¯ï¼

// ä»»æ„ç±»å‹ï¼ˆéœ€è¦å…·ä½“çº¦æŸï¼‰
stringProcessor(("hello" as any));       // ä¸æ¨èï¼Œä½†ä¸ä¼šæŠ¥é”™
*/

console.log("ä¸å¯æ¥å—çš„ç±»å‹è¯´æ˜:");
console.log("T extends string åªæ¥å—å­—ç¬¦ä¸²åŸå§‹ç±»å‹åŠå…¶å­ç±»å‹");
console.log("ä¸æ¥å—æ•°å­—ã€å¸ƒå°”å€¼ã€å¯¹è±¡ã€æ•°ç»„ã€nullã€undefinedç­‰");

// ç±»å‹å®ˆå«å‡½æ•°
function isString&lt;T&gt;(value: T): value is T &amp; string {
    return typeof value === 'string';
}

function safeStringProcessor&lt;T&gt;(input: T): string | null {
    if (isString(input)) {
        // åœ¨è¿™é‡Œ TypeScript çŸ¥é“ input æ˜¯ string ç±»å‹
        return input.toUpperCase();
    }
    return null;
}

// å®‰å…¨çš„ä½¿ç”¨æ–¹å¼
console.log("å®‰å…¨å¤„ç†ç¤ºä¾‹:");
console.log("å­—ç¬¦ä¸²å¤„ç†:", safeStringProcessor("hello"));
console.log("æ•°å­—å¤„ç†:", safeStringProcessor(123)); // è¿”å› null
console.log("å¸ƒå°”å¤„ç†:", safeStringProcessor(true)); // è¿”å› null
          </div>
          <div class="demo-output basic-demo" id="output7">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. ç±»å‹å…¼å®¹æ€§è¯´æ˜</span>
            <span class="badge badge-important">é‡è¦æ¦‚å¿µ</span>
          </div>
          <div class="demo-code">
// ç±»å‹å…¼å®¹æ€§è¯¦ç»†è¯´æ˜

// 1. string ä¸ String çš„åŒºåˆ«
const primitiveString: string = "hello";           // âœ… å­—ç¬¦ä¸²åŸå§‹ç±»å‹
const stringObject: String = new String("world");  // âŒ String å¯¹è±¡ç±»å‹

// T extends string åªæ¥å—åŸå§‹ç±»å‹
function acceptString&lt;T extends string&gt;(str: T): T {
    return str;
}

// âœ… å¯æ¥å—
const result1 = acceptString(primitiveString);     // æ­£å¸¸å·¥ä½œ
// const result2 = acceptString(stringObject);     // ç¼–è¯‘é”™è¯¯ï¼

// 2. ç±»å‹æ‰©å±•é—®é¢˜
let mutableString = "hello";                       // ç±»å‹æ˜¯ string
const immutableString = "world";                   // ç±»å‹æ˜¯ "world"

const result3 = acceptString(mutableString);       // T = string
const result4 = acceptString(immutableString);     // T = "world"

console.log("ç±»å‹å…¼å®¹æ€§è¯´æ˜:");
console.log("å¯å˜å­—ç¬¦ä¸²ç±»å‹:", typeof mutableString);
console.log("ä¸å¯å˜å­—ç¬¦ä¸²ç±»å‹:", typeof immutableString);
console.log("result3 æ¨æ–­ç±»å‹: string");
console.log("result4 æ¨æ–­ç±»å‹: 'world'");

// 3. ç±»å‹æ–­è¨€çš„ä½¿ç”¨
const someValue: unknown = "hello";

// éœ€è¦ç±»å‹æ–­è¨€
const result5 = acceptString(someValue as string); // ä½¿ç”¨ç±»å‹æ–­è¨€

// æˆ–è€…ä½¿ç”¨ç±»å‹å®ˆå«
if (typeof someValue === "string") {
    const result6 = acceptString(someValue);       // ç±»å‹å®ˆå«åå®‰å…¨ä½¿ç”¨
    console.log("ç±»å‹å®ˆå«å:", result6);
}

// 4. æ³›å‹çº¦æŸçš„çµæ´»æ€§
function flexibleString&lt;T extends string | number&gt;(
    input: T
): T extends string ? string : number {
    if (typeof input === "string") {
        return input.toUpperCase() as any;
    } else {
        return (input * 2) as any;
    }
}

const stringResult = flexibleString("hello");      // string
const numberResult = flexibleString(10);           // number

console.log("çµæ´»æ³›å‹çº¦æŸ:");
console.log("å­—ç¬¦ä¸²ç»“æœ:", stringResult);
console.log("æ•°å­—ç»“æœ:", numberResult);
          </div>
          <div class="demo-output basic-demo" id="output8">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <section class="section interactive-demo">
      <h2>ğŸ’» ç±»å‹æµ‹è¯•æ²™ç›’</h2>
      <p>æµ‹è¯•å„ç§æ•°æ®ç±»å‹æ˜¯å¦å¯ä»¥è¢« <code>T extends string</code> æ¥å—ï¼š</p>

      <div class="code-executor">
        <textarea class="code-input" id="userCode" placeholder="åœ¨è¿™é‡Œæµ‹è¯•å„ç§æ•°æ®ç±»å‹...">
// æµ‹è¯•å‡½æ•°
function testExtendsString(value) {
    const type = typeof value;
    const isString = type === 'string';
    
    console.log(`å€¼: ${value}`);
    console.log(`ç±»å‹: ${type}`);
    console.log(`æ˜¯å¦å¯è¢« T extends string æ¥å—: ${isString ? 'âœ… æ˜¯' : 'âŒ å¦'}`);
    console.log('---');
}

// æµ‹è¯•å„ç§æ•°æ®ç±»å‹
console.log('=== T extends string æ¥å—æ€§æµ‹è¯• ===\n');

// âœ… å¯æ¥å—çš„ç±»å‹
testExtendsString("hello");                    // æ™®é€šå­—ç¬¦ä¸²
testExtendsString("");                         // ç©ºå­—ç¬¦ä¸²
testExtendsString("123");                      // æ•°å­—å­—ç¬¦ä¸²

// âŒ ä¸å¯æ¥å—çš„ç±»å‹
testExtendsString(123);                        // æ•°å­—
testExtendsString(3.14);                       // æµ®ç‚¹æ•°
testExtendsString(true);                       // å¸ƒå°”å€¼
testExtendsString(false);                      // å¸ƒå°”å€¼
testExtendsString(null);                       // null
testExtendsString(undefined);                  // undefined
testExtendsString({});                         // å¯¹è±¡
testExtendsString([]);                         // æ•°ç»„
testExtendsString(new String("object"));       // String å¯¹è±¡
testExtendsString(Symbol("test"));             // Symbol

// è¾¹ç•Œæƒ…å†µ
testExtendsString("true");                     // å¸ƒå°”å­—ç¬¦ä¸² âœ…
testExtendsString("null");                     // null å­—ç¬¦ä¸² âœ…
testExtendsString("undefined");                // undefined å­—ç¬¦ä¸² âœ…

console.log('=== æµ‹è¯•å®Œæˆ ===');
            </textarea
        >
        <button class="run-button" onclick="executeUserCode()">è¿è¡Œæµ‹è¯•</button>
        <div class="output-area" id="userOutput">æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
      </div>
    </section>

    <section class="summary">
      <h2>ğŸ“š T extends string å®Œæ•´æ€»ç»“</h2>

      <div class="summary-grid">
        <div class="summary-item">
          <h3>âœ… å¯æ¥å—çš„æ•°æ®ç±»å‹</h3>
          <ul>
            <li><span class="data-type">"hello"</span> - æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡</li>
            <li><span class="data-type">""</span> - ç©ºå­—ç¬¦ä¸²</li>
            <li><span class="data-type">"123"</span> - æ•°å­—å­—ç¬¦ä¸²</li>
            <li><span class="data-type">"A" | "B" | "C"</span> - å­—ç¬¦ä¸²è”åˆç±»å‹</li>
            <li><span class="data-type">`${string}@${string}`</span> - æ¨¡æ¿å­—ç¬¦ä¸²</li>
            <li><span class="data-type">string</span> - é€šç”¨å­—ç¬¦ä¸²ç±»å‹</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>âŒ ä¸å¯æ¥å—çš„æ•°æ®ç±»å‹</h3>
          <ul>
            <li><span class="data-type">123</span> - æ•°å­—ç±»å‹</li>
            <li><span class="data-type">true / false</span> - å¸ƒå°”ç±»å‹</li>
            <li><span class="data-type">null / undefined</span> - ç©ºå€¼</li>
            <li><span class="data-type">{}</span> - å¯¹è±¡ç±»å‹</li>
            <li><span class="data-type">[]</span> - æ•°ç»„ç±»å‹</li>
            <li><span class="data-type">new String()</span> - String å¯¹è±¡</li>
            <li><span class="data-type">Symbol()</span> - ç¬¦å·ç±»å‹</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>ğŸ¯ å®é™…åº”ç”¨åœºæ™¯</h3>
          <ul>
            <li><strong>API è·¯ç”±å®šä¹‰</strong> - çº¦æŸè·¯ç”±è·¯å¾„æ ¼å¼</li>
            <li><strong>æ•°æ®éªŒè¯</strong> - ç¡®ä¿è¾“å…¥ä¸ºç‰¹å®šå­—ç¬¦ä¸²æ¨¡å¼</li>
            <li><strong>é…ç½®ç®¡ç†</strong> - é™åˆ¶é…ç½®é€‰é¡¹ä¸ºé¢„å®šä¹‰å­—ç¬¦ä¸²</li>
            <li><strong>ç±»å‹å®‰å…¨å‡½æ•°</strong> - åˆ›å»ºç±»å‹å®‰å…¨çš„å­—ç¬¦ä¸²å¤„ç†å·¥å…·</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>ğŸ’¡ æœ€ä½³å®è·µ</h3>
          <ul>
            <li>ä¼˜å…ˆä½¿ç”¨ <code>T extends string</code> è€Œé <code>T extends String</code></li>
            <li>ç»“åˆå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è·å¾—æ›´ç²¾ç¡®çš„ç±»å‹æ¨æ–­</li>
            <li>ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹çº¦æŸå¤æ‚å­—ç¬¦ä¸²æ¨¡å¼</li>
            <li>æ·»åŠ è¿è¡Œæ—¶éªŒè¯ç¡®ä¿ç±»å‹å®‰å…¨</li>
          </ul>
        </div>
      </div>

      <div class="comparison">
        <h3>ğŸ” T extends string vs T extends String</h3>
        <p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>
        <table class="method-table">
          <thead>
            <tr>
              <th>ç‰¹æ€§</th>
              <th>T extends string</th>
              <th>T extends String</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>æ¥å—çš„ç±»å‹</td>
              <td>string åŸå§‹ç±»å‹</td>
              <td>string åŸå§‹ç±»å‹ + String å¯¹è±¡</td>
            </tr>
            <tr>
              <td>ç±»å‹å®‰å…¨</td>
              <td>âœ… æ›´å®‰å…¨</td>
              <td>âš ï¸ ç›¸å¯¹å®‰å…¨</td>
            </tr>
            <tr>
              <td>ç°ä»£å®è·µ</td>
              <td>âœ… æ¨èä½¿ç”¨</td>
              <td>âŒ ä¸æ¨è</td>
            </tr>
            <tr>
              <td>æ€§èƒ½</td>
              <td>âœ… æ›´å¥½</td>
              <td>âš ï¸ ç¨å·®</td>
            </tr>
          </tbody>
        </table>
      </div>

      <table class="method-table">
        <thead>
          <tr>
            <th>æ•°æ®ç±»å‹</th>
            <th>ç¤ºä¾‹</th>
            <th>æ˜¯å¦å¯æ¥å—</th>
            <th>è¯´æ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>å­—ç¬¦ä¸²å­—é¢é‡</td>
            <td><code>"hello"</code></td>
            <td>âœ…</td>
            <td>æœ€åŸºæœ¬çš„å¯æ¥å—ç±»å‹</td>
          </tr>
          <tr>
            <td>å­—ç¬¦ä¸²è”åˆ</td>
            <td><code>"A" | "B"</code></td>
            <td>âœ…</td>
            <td>å¤šä¸ªå­—ç¬¦ä¸²å­—é¢é‡çš„è”åˆ</td>
          </tr>
          <tr>
            <td>æ¨¡æ¿å­—ç¬¦ä¸²</td>
            <td><code>`${string}`</code></td>
            <td>âœ…</td>
            <td>æ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸²ç±»å‹</td>
          </tr>
          <tr>
            <td>æ•°å­—ç±»å‹</td>
            <td><code>123</code></td>
            <td>âŒ</td>
            <td>éå­—ç¬¦ä¸²åŸå§‹ç±»å‹</td>
          </tr>
          <tr>
            <td>String å¯¹è±¡</td>
            <td><code>new String()</code></td>
            <td>âŒ</td>
            <td>å¯¹è±¡ç±»å‹ï¼Œä¸æ˜¯åŸå§‹ç±»å‹</td>
          </tr>
        </tbody>
      </table>
    </section>

    <footer>
      <p>TypeScript T extends string è¯¦è§£ &copy; 2023 | ç±»å‹å®‰å…¨çš„å­—ç¬¦ä¸²çº¦æŸæœ€ä½³å®è·µ</p>
    </footer>

    <script>
      // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œç¤ºä¾‹ä»£ç 
      document.addEventListener("DOMContentLoaded", function () {
        executeExamples();
      });

      function executeExamples() {
        // ç¤ºä¾‹1: æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡
        try {
          function processString(input) {
            return input;
          }

          const result1 = processString("hello");
          const result2 = processString("world");
          const result3 = processString("");
          const result4 = processString("123");

          let output = "æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡ç¤ºä¾‹:\n";
          output += "result1: " + result1 + " ç±»å‹: " + typeof result1 + "\n";
          output += "result2: " + result2 + " ç±»å‹: " + typeof result2 + "\n";
          output += "result3: " + result3 + " ç±»å‹: " + typeof result3 + "\n";
          output += "result4: " + result4 + " ç±»å‹: " + typeof result4 + "\n";

          let dynamicString = "dynamic";
          const result5 = processString(dynamicString);
          output += "åŠ¨æ€å­—ç¬¦ä¸²: " + result5 + " ç±»å‹: " + typeof result5;

          document.getElementById("output1").textContent = output;
        } catch (e) {
          document.getElementById("output1").textContent = "é”™è¯¯: " + e.message;
        }

        // ç¤ºä¾‹2: å­—ç¬¦ä¸²è”åˆç±»å‹
        try {
          function createConfig(type, value) {
            return { type, value };
          }

          const colorConfig = createConfig("red", "#ff0000");
          const sizeConfig = createConfig("medium", "ä¸­å·");
          const directColor = createConfig("blue", "#0000ff");
          const directSize = createConfig("large", "å¤§å·");

          let output = "å­—ç¬¦ä¸²è”åˆç±»å‹ç¤ºä¾‹:\n";
          output += "é¢œè‰²é…ç½®: " + JSON.stringify(colorConfig) + "\n";
          output += "å°ºå¯¸é…ç½®: " + JSON.stringify(sizeConfig) + "\n";
          output += "ç›´æ¥é¢œè‰²: " + JSON.stringify(directColor) + "\n";
          output += "ç›´æ¥å°ºå¯¸: " + JSON.stringify(directSize) + "\n";

          function createRequest(method, url) {
            return { method, url };
          }

          const getRequest = createRequest("GET", "/api/users");
          const postRequest = createRequest("POST", "/api/users");

          output += "HTTPæ–¹æ³•ç¤ºä¾‹:\n";
          output += "GETè¯·æ±‚: " + JSON.stringify(getRequest) + "\n";
          output += "POSTè¯·æ±‚: " + JSON.stringify(postRequest);

          document.getElementById("output2").textContent = output;
        } catch (e) {
          document.getElementById("output2").textContent = "é”™è¯¯: " + e.message;
        }

        // å…¶ä»–ç¤ºä¾‹çš„å®ç°...
      }

      function executeUserCode() {
        var userCode = document.getElementById("userCode").value;
        var outputArea = document.getElementById("userOutput");

        try {
          var logMessages = [];
          var originalLog = console.log;
          console.log = function (message) {
            logMessages.push(message);
            originalLog.apply(console, arguments);
          };

          eval(userCode);

          console.log = originalLog;

          outputArea.textContent = logMessages.join("\n") || "ä»£ç æ‰§è¡ŒæˆåŠŸï¼Œä½†æ²¡æœ‰è¾“å‡ºã€‚";
          outputArea.style.color = "#e2e8f0";
        } catch (error) {
          outputArea.textContent = "é”™è¯¯: " + error.message;
          outputArea.style.color = "#ef4444";
        }
      }
    </script>
  </body>
</html>
