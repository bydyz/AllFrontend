<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScript T extends String ä½¿ç”¨è¯¦è§£</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f7fa;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
      }

      .subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .section {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 25px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f0f0f0;
      }

      .demo-box {
        margin-bottom: 30px;
        padding: 20px;
        border-radius: 10px;
        background: #f8f9fa;
        transition: all 0.3s ease;
      }

      .demo-box:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .demo-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 1.2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .demo-code {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        margin: 15px 0;
        overflow-x: auto;
        font-size: 0.95rem;
        white-space: pre;
      }

      .demo-output {
        padding: 15px;
        background: white;
        border-radius: 8px;
        border-left: 4px solid;
        margin-top: 15px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .basic-demo {
        border-left-color: #3b82f6;
      }
      .advanced-demo {
        border-left-color: #10b981;
      }
      .utility-demo {
        border-left-color: #f59e0b;
      }
      .validation-demo {
        border-left-color: #ef4444;
      }
      .generic-demo {
        border-left-color: #8b5cf6;
      }

      .interactive-demo {
        margin-top: 30px;
      }

      .code-executor {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .code-input {
        width: 100%;
        min-height: 120px;
        background: #0f172a;
        color: #e2e8f0;
        border: 1px solid #334155;
        border-radius: 6px;
        padding: 15px;
        font-family: "Courier New", monospace;
        font-size: 1rem;
        margin-bottom: 15px;
        resize: vertical;
      }

      .run-button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: background 0.3s;
      }

      .run-button:hover {
        background: #2563eb;
      }

      .output-area {
        background: #0f172a;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        min-height: 80px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }

      .summary {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-top: 40px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 25px;
      }

      .summary-item {
        padding: 20px;
        border-radius: 10px;
        background-color: #f8f9fa;
      }

      .summary-item h3 {
        margin-bottom: 15px;
        color: #2c3e50;
      }

      .comparison {
        margin-top: 40px;
        padding: 25px;
        background: linear-gradient(135deg, #fef3c7 0%, #fef7ed 100%);
        border-radius: 12px;
        border-left: 6px solid #f59e0b;
      }

      .comparison h3 {
        color: #92400e;
        margin-bottom: 15px;
      }

      footer {
        text-align: center;
        margin-top: 50px;
        padding: 25px;
        color: #7f8c8d;
        font-size: 0.95rem;
        border-top: 1px solid #e0e0e0;
      }

      @media (max-width: 768px) {
        .container {
          grid-template-columns: 1fr;
        }
      }

      .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-left: 10px;
      }

      .badge-ts {
        background: #3178c6;
        color: white;
      }
      .badge-important {
        background: #ef4444;
        color: white;
      }

      .method-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }

      .method-table th,
      .method-table td {
        border: 1px solid #e2e8f0;
        padding: 12px;
        text-align: left;
      }

      .method-table th {
        background: #f8fafc;
        font-weight: 600;
      }

      .feature-tag {
        display: inline-block;
        padding: 4px 8px;
        background: #dbeafe;
        color: #1e40af;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-right: 5px;
      }

      .type-highlight {
        color: #f59e0b;
        font-weight: bold;
      }

      .note {
        background: #f0f9ff;
        border-left: 4px solid #0ea5e9;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }

      .warning {
        background: #fef2f2;
        border-left: 4px solid #ef4444;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>TypeScript T extends String ä½¿ç”¨è¯¦è§£</h1>
      <p class="subtitle">æ·±å…¥ç†è§£TypeScriptæ³›å‹çº¦æŸåœ¨å­—ç¬¦ä¸²ç±»å‹ä¸­çš„åº”ç”¨</p>
    </header>

    <div class="container">
      <section class="section">
        <h2>ğŸ¯ åŸºç¡€ç”¨æ³•</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. åŸºæœ¬æ³›å‹çº¦æŸ</span>
            <span class="badge badge-ts">TypeScript</span>
          </div>
          <div class="demo-code">
// T extends String åŸºæœ¬ç”¨æ³•
function processString&lt;T extends String&gt;(input: T): string {
    // ç”±äº T ç»§æ‰¿è‡ª Stringï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ String çš„æ–¹æ³•
    return input.toUpperCase();
}

// ä½¿ç”¨ç¤ºä¾‹
const result1 = processString("hello");        // string ç±»å‹
const result2 = processString(new String("world")); // String å¯¹è±¡ç±»å‹

// é”™è¯¯ç¤ºä¾‹ - ç¼–è¯‘æ—¶ä¼šæŠ¥é”™
// const error1 = processString(123);          // é”™è¯¯ï¼šæ•°å­—ä¸ç»§æ‰¿è‡ª String
// const error2 = processString(true);         // é”™è¯¯ï¼šå¸ƒå°”å€¼ä¸ç»§æ‰¿è‡ª String

console.log("åŸºæœ¬ç”¨æ³•ç¤ºä¾‹:");
console.log("å­—ç¬¦ä¸²å­—é¢é‡:", result1);
console.log("Stringå¯¹è±¡:", result2);

// æ›´å¤æ‚çš„æ³›å‹çº¦æŸ
function formatText&lt;T extends String&gt;(
    text: T, 
    formatter: (str: string) => string
): string {
    return formatter(text.toString());
}

// ä½¿ç”¨æ ¼å¼åŒ–å‡½æ•°
const formatted = formatText("typescript", (str) => `âœ¨ ${str} âœ¨`);
console.log("æ ¼å¼åŒ–æ–‡æœ¬:", formatted);
          </div>
          <div class="demo-output basic-demo" id="output1">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çº¦æŸ</span>
            <span class="badge badge-important">é«˜çº§ç‰¹æ€§</span>
          </div>
          <div class="demo-code">
// å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çº¦æŸ
type Color = "red" | "green" | "blue";
type Size = "small" | "medium" | "large";

function createStyle&lt;T extends Color, U extends Size&gt;(
    color: T, 
    size: U
): string {
    return `color: ${color}; font-size: ${size};`;
}

// æ­£ç¡®ä½¿ç”¨
const style1 = createStyle("red", "medium");
const style2 = createStyle("blue", "large");

// é”™è¯¯ä½¿ç”¨ - ç¼–è¯‘æ—¶æŠ¥é”™
// const errorStyle = createStyle("yellow", "medium"); // "yellow" ä¸åœ¨ Color ç±»å‹ä¸­
// const errorStyle2 = createStyle("red", "huge");     // "huge" ä¸åœ¨ Size ç±»å‹ä¸­

console.log("å­—ç¬¦ä¸²å­—é¢é‡çº¦æŸç¤ºä¾‹:");
console.log("æ ·å¼1:", style1);
console.log("æ ·å¼2:", style2);

// æ›´å¤æ‚çš„å­—é¢é‡çº¦æŸ
type HttpMethod = "GET" | "POST" | "PUT" | "DELETE";

function createRequest&lt;T extends HttpMethod&gt;(
    method: T, 
    url: string
): { method: T; url: string } {
    return { method, url };
}

const getRequest = createRequest("GET", "/api/users");
const postRequest = createRequest("POST", "/api/users");

console.log("GETè¯·æ±‚:", getRequest);
console.log("POSTè¯·æ±‚:", postRequest);
          </div>
          <div class="demo-output basic-demo" id="output2">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸ—ï¸ é«˜çº§åº”ç”¨åœºæ™¯</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. å­—ç¬¦ä¸²æ¨¡æ¿çº¦æŸ</span>
            <span class="badge badge-ts">TypeScript</span>
          </div>
          <div class="demo-code">
// æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹çº¦æŸ
type EmailTemplate = `${string}@${string}.${string}`;
type PhoneTemplate = `+${number}-${string}`;

function validateContact&lt;T extends EmailTemplate | PhoneTemplate&gt;(
    contact: T
): boolean {
    if (contact.includes('@')) {
        // é‚®ç®±éªŒè¯
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(contact);
    } else {
        // ç”µè¯éªŒè¯
        const phoneRegex = /^\+\d+-\d+$/;
        return phoneRegex.test(contact);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const emailValid = validateContact("user@example.com");
const phoneValid = validateContact("+86-13800138000");
const invalidContact = validateContact("invalid"); // ç±»å‹é”™è¯¯

console.log("æ¨¡æ¿å­—ç¬¦ä¸²çº¦æŸç¤ºä¾‹:");
console.log("é‚®ç®±éªŒè¯:", emailValid);
console.log("ç”µè¯éªŒè¯:", phoneValid);

// æ›´å¤æ‚çš„æ¨¡æ¿çº¦æŸ
type RoutePattern = `/api/${string}/${string}`;

function createRoute&lt;T extends RoutePattern&gt;(route: T): T {
    return route;
}

const userRoute = createRoute("/api/users/list");
const productRoute = createRoute("/api/products/detail");

// é”™è¯¯ç¤ºä¾‹
// const invalidRoute = createRoute("/users/list"); // ä¸ç¬¦åˆæ¨¡æ¿æ¨¡å¼

console.log("è·¯ç”±åˆ›å»º:");
console.log("ç”¨æˆ·è·¯ç”±:", userRoute);
console.log("å•†å“è·¯ç”±:", productRoute);
          </div>
          <div class="demo-output advanced-demo" id="output3">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²çº¦æŸ</span>
            <span class="badge badge-important">é«˜çº§ç‰¹æ€§</span>
          </div>
          <div class="demo-code">
// æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²çº¦æŸ
type ExtractString&lt;T&gt; = T extends String ? T : never;

type StringOnly&lt;T&gt; = {
    [K in keyof T]: T[K] extends String ? T[K] : never;
}[keyof T];

// å®ç”¨ç±»å‹å®šä¹‰
type StringProperties&lt;T&gt; = {
    [K in keyof T]: T[K] extends String ? K : never;
}[keyof T];

// ç¤ºä¾‹æ¥å£
interface User {
    id: number;
    name: string;
    email: String;
    age: number;
    phone: String;
}

// æå–å­—ç¬¦ä¸²å±æ€§
type UserStringProps = StringProperties&lt;User&gt;; // "email" | "phone"

function getStringProperty&lt;
    T, 
    K extends StringProperties&lt;T&gt;
&gt;(obj: T, key: K): string {
    return obj[key].toString();
}

const user: User = {
    id: 1,
    name: "å¼ ä¸‰",
    email: new String("zhangsan@example.com"),
    age: 25,
    phone: new String("+86-13800138000")
};

console.log("æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²çº¦æŸ:");
console.log("é‚®ç®±:", getStringProperty(user, "email"));
console.log("ç”µè¯:", getStringProperty(user, "phone"));

// é”™è¯¯ç¤ºä¾‹
// console.log(getStringProperty(user, "id"));   // é”™è¯¯ï¼šid ä¸æ˜¯å­—ç¬¦ä¸²å±æ€§
// console.log(getStringProperty(user, "age"));  // é”™è¯¯ï¼šage ä¸æ˜¯å­—ç¬¦ä¸²å±æ€§
          </div>
          <div class="demo-output advanced-demo" id="output4">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <div class="container">
      <section class="section">
        <h2>ğŸ”§ å®ç”¨å·¥å…·ç±»å‹</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. å­—ç¬¦ä¸²æ“ä½œå·¥å…·ç±»å‹</span>
            <span class="badge badge-ts">TypeScript</span>
          </div>
          <div class="demo-code">
// å­—ç¬¦ä¸²æ“ä½œå·¥å…·ç±»å‹
type UpperCase&lt;T extends String&gt; = Uppercase&lt;T extends string ? T : string&gt;;
type LowerCase&lt;T extends String&gt; = Lowercase&lt;T extends string ? T : string&gt;;
type Capitalize&lt;T extends String&gt; = Capitalize&lt;T extends string ? T : string&gt;;

// å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°
function toUpperCase&lt;T extends String&gt;(str: T): UpperCase&lt;T&gt; {
    return str.toUpperCase() as UpperCase&lt;T&gt;;
}

function toLowerCase&lt;T extends String&gt;(str: T): LowerCase&lt;T&gt; {
    return str.toLowerCase() as LowerCase&lt;T&gt;;
}

function capitalize&lt;T extends String&gt;(str: T): Capitalize&lt;T&gt; {
    return (str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()) as Capitalize&lt;T&gt;;
}

// ä½¿ç”¨ç¤ºä¾‹
const upper = toUpperCase("hello world");
const lower = toLowerCase("HELLO WORLD");
const capped = capitalize("hello world");

console.log("å­—ç¬¦ä¸²æ“ä½œå·¥å…·ç±»å‹:");
console.log("è½¬å¤§å†™:", upper);
console.log("è½¬å°å†™:", lower);
console.log("é¦–å­—æ¯å¤§å†™:", capped);

// æ›´å¤æ‚çš„å­—ç¬¦ä¸²å·¥å…·ç±»å‹
type Split&lt;T extends String, Separator extends string&gt; = 
    T extends string ? T extends `${infer First}${Separator}${infer Rest}` 
        ? [First, ...Split&lt;Rest, Separator&gt;] 
        : [T] 
    : never;

function splitString&lt;T extends String, S extends string&gt;(
    str: T, 
    separator: S
): Split&lt;T, S&gt; {
    return str.split(separator) as Split&lt;T, S&gt;;
}

const parts = splitString("a,b,c,d", ",");
console.log("å­—ç¬¦ä¸²åˆ†å‰²:", parts);
          </div>
          <div class="demo-output utility-demo" id="output5">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. å­—ç¬¦ä¸²éªŒè¯å·¥å…·</span>
            <span class="badge badge-ts">TypeScript</span>
          </div>
          <div class="demo-code">
// å­—ç¬¦ä¸²éªŒè¯å·¥å…·ç±»å‹
type IsEmptyString&lt;T extends String&gt; = T extends "" ? true : false;
type IsEmail&lt;T extends String&gt; = T extends `${string}@${string}.${string}` ? true : false;
type IsPhone&lt;T extends String&gt; = T extends `+${number}${string}` ? true : false;

// éªŒè¯å‡½æ•°
function validateString&lt;T extends String&gt;(
    str: T, 
    validators: Array&lt;(s: string) => boolean&gt;
): boolean {
    return validators.every(validator => validator(str.toString()));
}

// å…·ä½“éªŒè¯å™¨
const isEmpty = (str: string) => str.length === 0;
const isEmail = (str: string) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(str);
const isPhone = (str: string) => /^\+\d{1,3}-\d{4,15}$/.test(str);

// ä½¿ç”¨ç¤ºä¾‹
console.log("å­—ç¬¦ä¸²éªŒè¯å·¥å…·:");

const testString1 = "";
const testString2 = "test@example.com";
const testString3 = "+86-13800138000";
const testString4 = "invalid";

console.log(`"${testString1}" æ˜¯å¦ä¸ºç©º:`, validateString(testString1, [isEmpty]));
console.log(`"${testString2}" æ˜¯å¦ä¸ºé‚®ç®±:`, validateString(testString2, [isEmail]));
console.log(`"${testString3}" æ˜¯å¦ä¸ºç”µè¯:`, validateString(testString3, [isPhone]));
console.log(`"${testString4}" ç»¼åˆéªŒè¯:`, validateString(testString4, [isEmail, isPhone]));

// é“¾å¼éªŒè¯å™¨
class StringValidator&lt;T extends String&gt; {
    constructor(private value: T) {}
    
    isEmpty(): boolean {
        return this.value.length === 0;
    }
    
    isEmail(): boolean {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value.toString());
    }
    
    minLength(min: number): boolean {
        return this.value.length >= min;
    }
    
    maxLength(max: number): boolean {
        return this.value.length <= max;
    }
}

const validator = new StringValidator("hello@world.com");
console.log("é“¾å¼éªŒè¯ç»“æœ:");
console.log("æ˜¯å¦é‚®ç®±:", validator.isEmail());
console.log("æœ€å°é•¿åº¦3:", validator.minLength(3));
console.log("æœ€å¤§é•¿åº¦20:", validator.maxLength(20));
          </div>
          <div class="demo-output utility-demo" id="output6">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ğŸ›¡ï¸ ç±»å‹å®‰å…¨éªŒè¯</h2>

        <div class="demo-box">
          <div class="demo-title">
            <span>1. è¿è¡Œæ—¶ç±»å‹éªŒè¯</span>
            <span class="badge badge-important">ç”Ÿäº§çº§</span>
          </div>
          <div class="demo-code">
// è¿è¡Œæ—¶ç±»å‹éªŒè¯
function assertString&lt;T&gt;(value: T): asserts value is T &amp; String {
    if (typeof value !== 'string' && !(value instanceof String)) {
        throw new Error(`å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä½†æ”¶åˆ°: ${typeof value}`);
    }
}

function safeProcessString&lt;T&gt;(input: T): string {
    assertString(input); // è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
    
    // ç°åœ¨ TypeScript çŸ¥é“ input æ˜¯ String ç±»å‹
    return input.toUpperCase();
}

// ä½¿ç”¨ç¤ºä¾‹
console.log("è¿è¡Œæ—¶ç±»å‹éªŒè¯:");

try {
    const result1 = safeProcessString("hello");
    console.log("æˆåŠŸå¤„ç†:", result1);
    
    const result2 = safeProcessString(new String("world"));
    console.log("æˆåŠŸå¤„ç†Stringå¯¹è±¡:", result2);
    
    // è¿™ä¼šæŠ›å‡ºé”™è¯¯
    const result3 = safeProcessString(123);
    console.log("è¿™è¡Œä¸ä¼šæ‰§è¡Œ:", result3);
} catch (error) {
    console.log("æ•è·é”™è¯¯:", error.message);
}

// æ›´å®‰å…¨çš„å­—ç¬¦ä¸²å¤„ç†å‡½æ•°
function createStringProcessor&lt;T extends String&gt;() {
    return {
        toUpper: (str: T) => str.toUpperCase(),
        toLower: (str: T) => str.toLowerCase(),
        reverse: (str: T) => str.split('').reverse().join(''),
        repeat: (str: T, count: number) => str.repeat(count)
    };
}

const processor = createStringProcessor();
console.log("å­—ç¬¦ä¸²å¤„ç†å™¨:");
console.log("å¤§å†™:", processor.toUpper("hello"));
console.log("åè½¬:", processor.reverse("hello"));
console.log("é‡å¤:", processor.repeat("hi", 3));
          </div>
          <div class="demo-output validation-demo" id="output7">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>

        <div class="demo-box">
          <div class="demo-title">
            <span>2. æ³›å‹çº¦æŸä¸é‡è½½</span>
            <span class="badge badge-ts">TypeScript</span>
          </div>
          <div class="demo-code">
// å‡½æ•°é‡è½½ä¸æ³›å‹çº¦æŸ
function processInput&lt;T extends String&gt;(input: T): string;
function processInput&lt;T extends number&gt;(input: T): number;
function processInput&lt;T extends String | number&gt;(input: T): string | number {
    if (typeof input === 'string' || input instanceof String) {
        return `å­—ç¬¦ä¸²: ${input.toUpperCase()}`;
    } else {
        return input * 2;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
console.log("å‡½æ•°é‡è½½ä¸æ³›å‹çº¦æŸ:");

const strResult = processInput("hello");
const numResult = processInput(42);
const strObjResult = processInput(new String("world"));

console.log("å­—ç¬¦ä¸²ç»“æœ:", strResult);
console.log("æ•°å­—ç»“æœ:", numResult);
console.log("Stringå¯¹è±¡ç»“æœ:", strObjResult);

// æ›´å¤æ‚çš„é‡è½½åœºæ™¯
interface StringProcessor {
    process&lt;T extends String&gt;(input: T): string;
}

class UpperCaseProcessor implements StringProcessor {
    process&lt;T extends String&gt;(input: T): string {
        return input.toUpperCase();
    }
}

class LowerCaseProcessor implements StringProcessor {
    process&lt;T extends String&gt;(input: T): string {
        return input.toLowerCase();
    }
}

// ä½¿ç”¨ä¸åŒçš„å¤„ç†å™¨
const upperProcessor = new UpperCaseProcessor();
const lowerProcessor = new LowerCaseProcessor();

console.log("å¤§å†™å¤„ç†å™¨:", upperProcessor.process("Hello World"));
console.log("å°å†™å¤„ç†å™¨:", lowerProcessor.process("Hello World"));

// å·¥å‚å‡½æ•°
function createProcessor(type: "upper" | "lower"): StringProcessor {
    switch (type) {
        case "upper":
            return new UpperCaseProcessor();
        case "lower":
            return new LowerCaseProcessor();
        default:
            throw new Error("æœªçŸ¥çš„å¤„ç†å™¨ç±»å‹");
    }
}

const factoryProcessor = createProcessor("upper");
console.log("å·¥å‚åˆ›å»ºçš„å¤„ç†å™¨:", factoryProcessor.process("factory pattern"));
          </div>
          <div class="demo-output validation-demo" id="output8">
            <!-- è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
        </div>
      </section>
    </div>

    <section class="section interactive-demo">
      <h2>ğŸ’» TypeScript æ³›å‹çº¦æŸäº¤äº’å¼æµ‹è¯•</h2>
      <p>åœ¨ä¸‹é¢çš„ç¼–è¾‘å™¨ä¸­å°è¯• TypeScript æ³›å‹çº¦æŸä»£ç ï¼ˆéœ€è¦ TypeScript ç¯å¢ƒï¼‰ï¼š</p>

      <div class="code-executor">
        <textarea class="code-input" id="userCode" placeholder="åœ¨è¿™é‡Œè¾“å…¥TypeScriptä»£ç ...">
// ç®€å•çš„å­—ç¬¦ä¸²å¤„ç†æ³›å‹å‡½æ•°
function stringLength<T extends String>(str: T): number {
    return str.length;
}

// å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°
function transformString<T extends String>(
    str: T, 
    transformer: (s: string) => string
): string {
    return transformer(str.toString());
}

// ä½¿ç”¨ç¤ºä¾‹
console.log('å­—ç¬¦ä¸²é•¿åº¦ç¤ºä¾‹:');
console.log('"hello" é•¿åº¦:', stringLength("hello"));
console.log('Stringå¯¹è±¡é•¿åº¦:', stringLength(new String("world")));

console.log('\nå­—ç¬¦ä¸²è½¬æ¢ç¤ºä¾‹:');
const reversed = transformString("typescript", s => s.split('').reverse().join(''));
console.log('åè½¬å­—ç¬¦ä¸²:', reversed);

const decorated = transformString("hello", s => `ğŸ‰ ${s} ğŸ‰`);
console.log('è£…é¥°å­—ç¬¦ä¸²:', decorated);

// å­—ç¬¦ä¸²éªŒè¯
function isValidEmail<T extends String>(email: T): boolean {
    const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return regex.test(email.toString());
}

console.log('\né‚®ç®±éªŒè¯:');
console.log('test@example.com æ˜¯å¦æœ‰æ•ˆ:', isValidEmail("test@example.com"));
console.log('invalid-email æ˜¯å¦æœ‰æ•ˆ:', isValidEmail("invalid-email"));

// å­—ç¬¦ä¸²æ¨¡æ¿çº¦æŸç¤ºä¾‹
type ApiEndpoint = `/api/${string}/${string}`;

function createEndpoint<T extends ApiEndpoint>(endpoint: T): T {
    return endpoint;
}

console.log('\nAPIç«¯ç‚¹åˆ›å»º:');
const usersEndpoint = createEndpoint("/api/users/list");
const productsEndpoint = createEndpoint("/api/products/detail");
console.log('ç”¨æˆ·ç«¯ç‚¹:', usersEndpoint);
console.log('å•†å“ç«¯ç‚¹:', productsEndpoint);
            </textarea
        >
        <button class="run-button" onclick="executeUserCode()">è¿è¡Œä»£ç </button>
        <div class="output-area" id="userOutput">è¾“å‡ºç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
      </div>

      <div class="warning"><strong>æ³¨æ„ï¼š</strong> æ­¤æ¼”ç¤ºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„æ˜¯JavaScriptä»£ç ã€‚åœ¨å®é™…TypeScriptç¯å¢ƒä¸­ï¼Œè¿™äº›æ³›å‹çº¦æŸä¼šåœ¨ç¼–è¯‘æ—¶æä¾›ç±»å‹å®‰å…¨æ£€æŸ¥ã€‚</div>
    </section>

    <section class="summary">
      <h2>ğŸ“š T extends String æ ¸å¿ƒæ¦‚å¿µæ€»ç»“</h2>

      <div class="note"><strong>é‡è¦æ¦‚å¿µï¼š</strong> <code>T extends String</code> è¡¨ç¤ºæ³›å‹å‚æ•° T å¿…é¡»æ˜¯ String ç±»å‹æˆ–å…¶å­ç±»å‹ï¼Œè¿™åŒ…æ‹¬ string åŸå§‹ç±»å‹å’Œ String å¯¹è±¡ç±»å‹ã€‚</div>

      <div class="summary-grid">
        <div class="summary-item">
          <h3>åŸºæœ¬è¯­æ³•</h3>
          <ul>
            <li><span class="feature-tag">è¯­æ³•</span><code>function fn&lt;T extends String&gt;(arg: T)</code></li>
            <li><span class="feature-tag">ä½œç”¨</span>çº¦æŸæ³›å‹å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹</li>
            <li><span class="feature-tag">åŒ…å«</span>string åŸå§‹ç±»å‹å’Œ String å¯¹è±¡ç±»å‹</li>
            <li><span class="feature-tag">ä¼˜åŠ¿</span>ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>å¸¸è§åº”ç”¨åœºæ™¯</h3>
          <ul>
            <li><span class="feature-tag">åœºæ™¯</span>å­—ç¬¦ä¸²å¤„ç†å·¥å…·å‡½æ•°</li>
            <li><span class="feature-tag">åœºæ™¯</span>API è·¯ç”±å’Œç«¯ç‚¹å®šä¹‰</li>
            <li><span class="feature-tag">åœºæ™¯</span>æ•°æ®éªŒè¯å’Œæ ¼å¼åŒ–</li>
            <li><span class="feature-tag">åœºæ™¯</span>æ¨¡æ¿å­—ç¬¦ä¸²çº¦æŸ</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>é«˜çº§ç‰¹æ€§</h3>
          <ul>
            <li><span class="feature-tag">ç‰¹æ€§</span>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çº¦æŸ</li>
            <li><span class="feature-tag">ç‰¹æ€§</span>æ¡ä»¶ç±»å‹ä¸å­—ç¬¦ä¸²æ“ä½œ</li>
            <li><span class="feature-tag">ç‰¹æ€§</span>æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹</li>
            <li><span class="feature-tag">ç‰¹æ€§</span>è¿è¡Œæ—¶ç±»å‹éªŒè¯</li>
          </ul>
        </div>

        <div class="summary-item">
          <h3>æœ€ä½³å®è·µ</h3>
          <ul>
            <li><span class="feature-tag">å®è·µ</span>ä¼˜å…ˆä½¿ç”¨ string è€Œé String</li>
            <li><span class="feature-tag">å®è·µ</span>ç»“åˆå‡½æ•°é‡è½½æä¾›æ›´å¥½çš„ç±»å‹æ¨æ–­</li>
            <li><span class="feature-tag">å®è·µ</span>ä½¿ç”¨å·¥å…·ç±»å‹ç®€åŒ–å¤æ‚çº¦æŸ</li>
            <li><span class="feature-tag">å®è·µ</span>æ·»åŠ è¿è¡Œæ—¶éªŒè¯ç¡®ä¿ç±»å‹å®‰å…¨</li>
          </ul>
        </div>
      </div>

      <div class="comparison">
        <h3>ğŸ’¡ T extends String vs T extends string</h3>
        <p><strong>ä¸»è¦åŒºåˆ«ï¼š</strong></p>
        <ul>
          <li><strong>T extends String</strong> - æ¥å— string åŸå§‹ç±»å‹å’Œ String å¯¹è±¡ç±»å‹</li>
          <li><strong>T extends string</strong> - åªæ¥å— string åŸå§‹ç±»å‹ï¼Œæ›´ä¸¥æ ¼</li>
          <li><strong>æ¨è</strong> åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ <code>T extends string</code>ï¼Œé™¤ééœ€è¦å¤„ç† String å¯¹è±¡</li>
        </ul>
        <p><strong>é€‰æ‹©å»ºè®®ï¼š</strong> æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„çº¦æŸï¼Œé€šå¸¸ <code>T extends string</code> æ›´ç¬¦åˆç°ä»£ TypeScript å®è·µ</p>
      </div>

      <table class="method-table">
        <thead>
          <tr>
            <th>ç‰¹æ€§</th>
            <th>è¯­æ³•ç¤ºä¾‹</th>
            <th>ä½œç”¨</th>
            <th>é€‚ç”¨åœºæ™¯</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>åŸºç¡€çº¦æŸ</td>
            <td><code>T extends String</code></td>
            <td>ç¡®ä¿å‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹</td>
            <td>é€šç”¨å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</td>
          </tr>
          <tr>
            <td>å­—é¢é‡çº¦æŸ</td>
            <td><code>T extends "A" | "B" | "C"</code></td>
            <td>é™åˆ¶ä¸ºç‰¹å®šå­—ç¬¦ä¸²å€¼</td>
            <td>é…ç½®é€‰é¡¹ã€çŠ¶æ€ç®¡ç†</td>
          </tr>
          <tr>
            <td>æ¨¡æ¿çº¦æŸ</td>
            <td><code>T extends `api/${string}`</code></td>
            <td>çº¦æŸå­—ç¬¦ä¸²æ¨¡å¼</td>
            <td>è·¯ç”±å®šä¹‰ã€æ ¼å¼éªŒè¯</td>
          </tr>
          <tr>
            <td>æ¡ä»¶ç±»å‹</td>
            <td><code>T extends String ? A : B</code></td>
            <td>åŸºäºç±»å‹çš„æ¡ä»¶åˆ†æ”¯</td>
            <td>å¤æ‚ç±»å‹é€»è¾‘</td>
          </tr>
        </tbody>
      </table>
    </section>

    <footer>
      <p>TypeScript T extends String ä½¿ç”¨è¯¦è§£ &copy; 2023 | ç±»å‹å®‰å…¨çš„å­—ç¬¦ä¸²å¤„ç†æœ€ä½³å®è·µ</p>
    </footer>

    <script>
      // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œç¤ºä¾‹ä»£ç 
      document.addEventListener("DOMContentLoaded", function () {
        executeExamples();
      });

      function executeExamples() {
        // ç¤ºä¾‹1: åŸºæœ¬æ³›å‹çº¦æŸ
        try {
          function processString(input) {
            return input.toUpperCase();
          }

          const result1 = processString("hello");
          const result2 = processString(new String("world"));

          let output = "åŸºæœ¬ç”¨æ³•ç¤ºä¾‹:\n";
          output += "å­—ç¬¦ä¸²å­—é¢é‡: " + result1 + "\n";
          output += "Stringå¯¹è±¡: " + result2 + "\n";

          function formatText(text, formatter) {
            return formatter(text.toString());
          }

          const formatted = formatText("typescript", str => `âœ¨ ${str} âœ¨`);
          output += "æ ¼å¼åŒ–æ–‡æœ¬: " + formatted;

          document.getElementById("output1").textContent = output;
        } catch (e) {
          document.getElementById("output1").textContent = "é”™è¯¯: " + e.message;
        }

        // ç¤ºä¾‹2: å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çº¦æŸ
        try {
          function createStyle(color, size) {
            return `color: ${color}; font-size: ${size};`;
          }

          const style1 = createStyle("red", "medium");
          const style2 = createStyle("blue", "large");

          let output = "å­—ç¬¦ä¸²å­—é¢é‡çº¦æŸç¤ºä¾‹:\n";
          output += "æ ·å¼1: " + style1 + "\n";
          output += "æ ·å¼2: " + style2 + "\n";

          function createRequest(method, url) {
            return { method, url };
          }

          const getRequest = createRequest("GET", "/api/users");
          const postRequest = createRequest("POST", "/api/users");

          output += "GETè¯·æ±‚: " + JSON.stringify(getRequest) + "\n";
          output += "POSTè¯·æ±‚: " + JSON.stringify(postRequest);

          document.getElementById("output2").textContent = output;
        } catch (e) {
          document.getElementById("output2").textContent = "é”™è¯¯: " + e.message;
        }

        // å…¶ä»–ç¤ºä¾‹çš„å®ç°...
      }

      function executeUserCode() {
        var userCode = document.getElementById("userCode").value;
        var outputArea = document.getElementById("userOutput");

        try {
          var logMessages = [];
          var originalLog = console.log;
          console.log = function (message) {
            logMessages.push(message);
            originalLog.apply(console, arguments);
          };

          // åœ¨JavaScriptç¯å¢ƒä¸­æ‰§è¡ŒTypeScripté£æ ¼çš„ä»£ç 
          eval(`
                    // æ¨¡æ‹Ÿ TypeScript æ³›å‹çº¦æŸçš„ JavaScript å®ç°
                    ${userCode}
                `);

          console.log = originalLog;

          outputArea.textContent = logMessages.join("\n") || "ä»£ç æ‰§è¡ŒæˆåŠŸï¼Œä½†æ²¡æœ‰è¾“å‡ºã€‚";
          outputArea.style.color = "#e2e8f0";
        } catch (error) {
          outputArea.textContent = "é”™è¯¯: " + error.message;
          outputArea.style.color = "#ef4444";
        }
      }
    </script>
  </body>
</html>
