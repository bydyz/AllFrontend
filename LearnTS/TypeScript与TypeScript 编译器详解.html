<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScript 与 TypeScript 编译器详解</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.2rem;
      }

      .content-wrapper {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        gap: 30px;
        margin-bottom: 40px;
      }

      .explanation {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        margin-bottom: 40px;
      }

      .demo-area {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      h2 {
        color: #667eea;
        margin: 20px 0 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f0f0f0;
      }

      h3 {
        color: #2c3e50;
        margin: 15px 0 10px;
      }

      p {
        margin-bottom: 15px;
      }

      .code-example {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: "Courier New", monospace;
        line-height: 1.5;
        border-left: 4px solid #667eea;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th,
      .comparison-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }

      .comparison-table th {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        font-weight: 600;
      }

      .comparison-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .architecture-diagram {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 10px;
        margin: 20px 0;
        border: 2px solid #667eea;
      }

      .diagram-item {
        padding: 15px;
        margin: 10px 0;
        border-radius: 6px;
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #4ecdc4;
      }

      .diagram-arrow {
        text-align: center;
        font-size: 1.5rem;
        color: #667eea;
        margin: 10px 0;
      }

      .workflow-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 20px 0;
        flex-wrap: wrap;
        gap: 20px;
      }

      .workflow-step {
        flex: 1;
        min-width: 200px;
        text-align: center;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .workflow-arrow {
        font-size: 1.5rem;
        color: #667eea;
      }

      .note {
        background: #fff8e1;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #ffc107;
        margin: 20px 0;
      }

      .warning {
        background: #ffebee;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #f44336;
        margin: 20px 0;
      }

      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .feature-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #667eea;
      }

      .cli-demo {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 6px;
        font-family: "Courier New", monospace;
        margin: 10px 0;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        color: white;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          flex-direction: column;
        }

        .workflow-container {
          flex-direction: column;
        }

        .workflow-arrow {
          transform: rotate(90deg);
        }
      }

      .ts-js-comparison {
        display: flex;
        gap: 20px;
        margin: 20px 0;
      }

      .code-column {
        flex: 1;
        min-width: 300px;
      }

      .code-header {
        background: #667eea;
        color: white;
        padding: 10px;
        border-radius: 6px 6px 0 0;
        font-weight: bold;
      }

      .code-content {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 0 0 6px 6px;
        font-family: "Courier New", monospace;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>TypeScript 与 TypeScript 编译器详解</h1>
        <p class="subtitle">深入理解 TypeScript 语言与编译器的关系</p>
      </header>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>核心概念澄清</h2>

          <div class="note">
            <strong>正确答案：</strong><br />
            TypeScript 是一种编程语言，而 TypeScript 编译器（tsc）是将 TypeScript 代码转换为 JavaScript 代码的工具。
          </div>

          <h3>TypeScript 是什么？</h3>
          <p>TypeScript 是 JavaScript 的一个超集，添加了静态类型系统和其他高级特性。</p>

          <h3>TypeScript 编译器是什么？</h3>
          <p>TypeScript 编译器（tsc）是将 TypeScript 代码编译成 JavaScript 代码的工具。</p>

          <div class="architecture-diagram">
            <h3>TypeScript 生态系统架构</h3>
            <div class="diagram-item">
              <strong>TypeScript 语言</strong><br />
              - 语法规范<br />
              - 类型系统<br />
              - 语言特性
            </div>
            <div class="diagram-arrow">↓</div>
            <div class="diagram-item">
              <strong>TypeScript 编译器 (tsc)</strong><br />
              - 代码解析<br />
              - 类型检查<br />
              - JavaScript 输出
            </div>
            <div class="diagram-arrow">↓</div>
            <div class="diagram-item">
              <strong>JavaScript 代码</strong><br />
              - 浏览器可执行<br />
              - Node.js 可运行<br />
              - 纯 JavaScript
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>TypeScript vs JavaScript 代码对比</h2>

          <div class="ts-js-comparison">
            <div class="code-column">
              <div class="code-header">TypeScript 代码 (.ts)</div>
              <div class="code-content">
                // 类型注解<br />
                function greet(name: string): string {<br />
                &nbsp;&nbsp;return `Hello, ${name}!`;<br />
                }<br /><br />

                // 接口定义<br />
                interface User {<br />
                &nbsp;&nbsp;id: number;<br />
                &nbsp;&nbsp;name: string;<br />
                &nbsp;&nbsp;email: string;<br />
                }<br /><br />

                // 类使用<br />
                class Person {<br />
                &nbsp;&nbsp;constructor(public name: string) {}<br />
                &nbsp;&nbsp;greet() {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return `Hello, I'm ${this.name}`;<br />
                &nbsp;&nbsp;}<br />
                }<br /><br />

                // 泛型<br />
                function identity&lt;T&gt;(arg: T): T {<br />
                &nbsp;&nbsp;return arg;<br />
                }
              </div>
            </div>

            <div class="code-column">
              <div class="code-header">编译后的 JavaScript (.js)</div>
              <div class="code-content">
                // 类型注解被移除<br />
                function greet(name) {<br />
                &nbsp;&nbsp;return "Hello, " + name + "!";<br />
                }<br /><br />

                // 接口在运行时不存在<br />
                // interface User { ... }<br /><br />

                // 类转换为 ES5/ES6<br />
                class Person {<br />
                &nbsp;&nbsp;constructor(name) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;this.name = name;<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;greet() {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return "Hello, I'm " + this.name;<br />
                &nbsp;&nbsp;}<br />
                }<br /><br />

                // 泛型被擦除<br />
                function identity(arg) {<br />
                &nbsp;&nbsp;return arg;<br />
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="comparison-table">
        <tr>
          <th>方面</th>
          <th>TypeScript 语言</th>
          <th>TypeScript 编译器</th>
        </tr>
        <tr>
          <td><strong>定义</strong></td>
          <td>编程语言</td>
          <td>编译工具</td>
        </tr>
        <tr>
          <td><strong>作用</strong></td>
          <td>提供类型系统和高级语法特性</td>
          <td>将 TypeScript 转换为 JavaScript</td>
        </tr>
        <tr>
          <td><strong>文件扩展名</strong></td>
          <td>.ts, .tsx</td>
          <td>无特定扩展名</td>
        </tr>
        <tr>
          <td><strong>输出</strong></td>
          <td>TypeScript 源代码</td>
          <td>JavaScript 代码</td>
        </tr>
        <tr>
          <td><strong>运行时</strong></td>
          <td>不能直接运行</td>
          <td>生成可运行的 JavaScript</td>
        </tr>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>TypeScript 编译器工作流程</h2>

          <div class="workflow-container">
            <div class="workflow-step">
              <h4>1. 源代码</h4>
              <p>TypeScript 文件<br />(.ts, .tsx)</p>
            </div>
            <div class="workflow-arrow">→</div>
            <div class="workflow-step">
              <h4>2. 解析</h4>
              <p>词法分析 + 语法分析<br />生成 AST</p>
            </div>
            <div class="workflow-arrow">→</div>
            <div class="workflow-step">
              <h4>3. 类型检查</h4>
              <p>静态类型验证<br />错误报告</p>
            </div>
            <div class="workflow-arrow">→</div>
            <div class="workflow-step">
              <h4>4. 转换</h4>
              <p>移除类型注解<br />代码转换</p>
            </div>
            <div class="workflow-arrow">→</div>
            <div class="workflow-step">
              <h4>5. 输出</h4>
              <p>生成 JavaScript<br />(.js, .jsx)</p>
            </div>
          </div>

          <h3>编译器核心功能</h3>
          <div class="feature-grid">
            <div class="feature-card">
              <h4>类型检查</h4>
              <p>在编译时捕获类型错误，提高代码质量</p>
            </div>
            <div class="feature-card">
              <h4>语法转换</h4>
              <p>将 TS 特性转换为兼容的 JS 代码</p>
            </div>
            <div class="feature-card">
              <h4>代码优化</h4>
              <p>移除无用代码，优化输出</p>
            </div>
            <div class="feature-card">
              <h4>模块解析</h4>
              <p>处理模块导入和导出</p>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>TypeScript 编译器使用</h2>

          <h3>安装 TypeScript 编译器</h3>
          <div class="cli-demo">
            # 全局安装<br />
            npm install -g typescript<br /><br />

            # 项目内安装<br />
            npm install --save-dev typescript<br /><br />

            # 检查版本<br />
            tsc --version
          </div>

          <h3>基本编译命令</h3>
          <div class="cli-demo">
            # 编译单个文件<br />
            tsc app.ts<br /><br />

            # 编译整个项目<br />
            tsc<br /><br />

            # 监听模式<br />
            tsc --watch<br /><br />

            # 指定输出目录<br />
            tsc --outDir dist<br /><br />

            # 指定目标版本<br />
            tsc --target ES2015
          </div>

          <h3>tsconfig.json 配置</h3>
          <div class="code-example">
            {<br />
            &nbsp;&nbsp;"compilerOptions": {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;"target": "ES2015",<br />
            &nbsp;&nbsp;&nbsp;&nbsp;"module": "commonjs",<br />
            &nbsp;&nbsp;&nbsp;&nbsp;"outDir": "./dist",<br />
            &nbsp;&nbsp;&nbsp;&nbsp;"strict": true,<br />
            &nbsp;&nbsp;&nbsp;&nbsp;"esModuleInterop": true<br />
            &nbsp;&nbsp;},<br />
            &nbsp;&nbsp;"include": ["src/**/*"],<br />
            &nbsp;&nbsp;"exclude": ["node_modules", "dist"]<br />
            }
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>TypeScript 语言特性</h2>

          <h3>静态类型系统</h3>
          <div class="code-example">
            // 基本类型注解<br />
            let name: string = "John";<br />
            let age: number = 30;<br />
            let isActive: boolean = true;<br /><br />

            // 数组和元组<br />
            let numbers: number[] = [1, 2, 3];<br />
            let tuple: [string, number] = ["hello", 42];<br /><br />

            // 联合类型<br />
            let id: string | number = "ABC123";<br /><br />

            // 类型别名<br />
            type UserID = string | number;
          </div>

          <h3>接口和类</h3>
          <div class="code-example">
            // 接口定义<br />
            interface Person {<br />
            &nbsp;&nbsp;name: string;<br />
            &nbsp;&nbsp;age: number;<br />
            &nbsp;&nbsp;email?: string; // 可选属性<br />
            }<br /><br />

            // 类实现接口<br />
            class Employee implements Person {<br />
            &nbsp;&nbsp;constructor(<br />
            &nbsp;&nbsp;&nbsp;&nbsp;public name: string,<br />
            &nbsp;&nbsp;&nbsp;&nbsp;public age: number,<br />
            &nbsp;&nbsp;&nbsp;&nbsp;public department: string<br />
            &nbsp;&nbsp;) {}<br />
            }
          </div>
        </div>

        <div class="demo-area">
          <h2>编译过程示例</h2>

          <h3>输入：TypeScript 代码</h3>
          <div class="code-example">
            // math.ts<br />
            export function add(a: number, b: number): number {<br />
            &nbsp;&nbsp;return a + b;<br />
            }<br /><br />

            export function multiply(a: number, b: number): number {<br />
            &nbsp;&nbsp;return a * b;<br />
            }<br /><br />

            // 使用泛型<br />
            export function getLast&lt;T&gt;(array: T[]): T | undefined {<br />
            &nbsp;&nbsp;return array[array.length - 1];<br />
            }
          </div>

          <h3>输出：编译后的 JavaScript</h3>
          <div class="code-example">
            // math.js<br />
            "use strict";<br />
            Object.defineProperty(exports, "__esModule", { value: true });<br />
            exports.add = add;<br />
            exports.multiply = multiply;<br />
            exports.getLast = getLast;<br /><br />

            function add(a, b) {<br />
            &nbsp;&nbsp;return a + b;<br />
            }<br /><br />

            function multiply(a, b) {<br />
            &nbsp;&nbsp;return a * b;<br />
            }<br /><br />

            function getLast(array) {<br />
            &nbsp;&nbsp;return array[array.length - 1];<br />
            }
          </div>

          <div class="note"><strong>注意：</strong> 类型注解（: number, : T[]）在编译过程中被移除，泛型类型参数（&lt;T&gt;）也被擦除，只保留运行时逻辑。</div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>TypeScript 生态工具</h2>

          <div class="feature-grid">
            <div class="feature-card">
              <h4>tsc (编译器)</h4>
              <p>核心编译工具，将 TS 转换为 JS</p>
            </div>
            <div class="feature-card">
              <h4>ts-node</h4>
              <p>直接运行 TypeScript 文件，无需编译</p>
            </div>
            <div class="feature-card">
              <h4>TypeScript Language Service</h4>
              <p>为编辑器提供智能提示和重构功能</p>
            </div>
            <div class="feature-card">
              <h4>@types/* 包</h4>
              <p>为 JavaScript 库提供类型定义</p>
            </div>
          </div>

          <h3>开发工具集成</h3>
          <div class="code-example">
            // VS Code 自动使用 TypeScript 服务<br />
            // 提供：<br />
            // - 智能自动完成<br />
            // - 类型错误提示<br />
            // - 重构工具<br />
            // - 代码导航
          </div>
        </div>

        <div class="demo-area">
          <h2>常见编译错误示例</h2>

          <div class="code-example">
            // 错误：类型不匹配<br />
            let count: number = "hello";<br />
            // Error: Type 'string' is not assignable to type 'number'<br /><br />

            // 错误：未定义属性<br />
            interface User {<br />
            &nbsp;&nbsp;name: string;<br />
            }<br />
            const user: User = {<br />
            &nbsp;&nbsp;name: "John",<br />
            &nbsp;&nbsp;age: 30 // Error: Object literal may only specify known properties<br />
            };<br /><br />

            // 错误：函数参数类型<br />
            function greet(name: string) {<br />
            &nbsp;&nbsp;return `Hello, ${name}`;<br />
            }<br />
            greet(123); // Error: Argument of type 'number' is not assignable to parameter of type 'string'
          </div>

          <div class="warning"><strong>重要：</strong> 这些错误在编译时被捕获，防止运行时出现意外行为。</div>
        </div>
      </div>

      <footer>
        <p>TypeScript 与 TypeScript 编译器详解 &copy; 2023 - 深入理解 TypeScript 生态系统</p>
      </footer>
    </div>

    <script>
      // 这个页面本身是用 HTML/CSS/JavaScript 编写的
      // 但我们可以演示一些 TypeScript 概念

      // 模拟 TypeScript 类型检查的概念
      function demonstrateTypeSafety() {
        // 在 TypeScript 中，这会报错：
        // let message: string = 123; // Error!

        // 但在 JavaScript 中，这是允许的：
        let message = 123;
        console.log("JavaScript 允许:", message);

        // 后续可以重新赋值不同类型
        message = "现在我是字符串";
        console.log("JavaScript 动态类型:", message);

        alert("在 TypeScript 中，类型错误会在编译时被发现，而不是运行时！");
      }

      // 演示编译过程
      function demonstrateCompilation() {
        const typescriptCode = `
                // TypeScript 代码
                function calculate(a: number, b: number): number {
                    return a + b;
                }
                
                const result = calculate(5, 3);
            `;

        const javascriptCode = `
                // 编译后的 JavaScript 代码
                function calculate(a, b) {
                    return a + b;
                }
                
                const result = calculate(5, 3);
            `;

        console.log("TypeScript 输入:", typescriptCode);
        console.log("JavaScript 输出:", javascriptCode);

        alert("TypeScript 编译器移除了类型注解 (:number)，但保留了业务逻辑！");
      }

      // 页面加载后自动演示
      window.addEventListener("load", function () {
        console.log("=== TypeScript 编译过程演示 ===");
        demonstrateTypeSafety();
        demonstrateCompilation();
      });
    </script>
  </body>
</html>
