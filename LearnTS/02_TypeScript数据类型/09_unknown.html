<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScript unknown ç±»å‹è¯¦è§£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.2rem;
      }

      .content-wrapper {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        margin-bottom: 40px;
      }

      .explanation {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        margin-bottom: 40px;
      }

      .demo-area {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      h2 {
        color: #667eea;
        margin: 20px 0 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f0f0f0;
      }

      h3 {
        color: #2c3e50;
        margin: 15px 0 10px;
      }

      p {
        margin-bottom: 15px;
      }

      .code-example {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: "Courier New", monospace;
        line-height: 1.5;
        border-left: 4px solid #667eea;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th,
      .comparison-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }

      .comparison-table th {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        font-weight: 600;
      }

      .comparison-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .type-safety-scale {
        display: flex;
        justify-content: space-between;
        margin: 25px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px solid #e9ecef;
      }

      .type-level {
        text-align: center;
        flex: 1;
        padding: 15px;
        border-radius: 6px;
        margin: 0 5px;
        transition: all 0.3s ease;
      }

      .type-level:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .any-type {
        background: #ffebee;
        border-left: 4px solid #f44336;
      }

      .unknown-type {
        background: #fff8e1;
        border-left: 4px solid #ffc107;
      }

      .specific-type {
        background: #e8f5e9;
        border-left: 4px solid #4caf50;
      }

      .demo-container {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #e9ecef;
      }

      .demo-result {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 6px;
        margin: 10px 0;
        font-family: "Courier New", monospace;
        min-height: 100px;
      }

      .controls {
        display: flex;
        gap: 10px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      button {
        padding: 10px 15px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        flex: 1;
        min-width: 120px;
      }

      button:hover {
        background: #5a6fd8;
        transform: translateY(-2px);
      }

      .note {
        background: #fff8e1;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #ffc107;
        margin: 20px 0;
      }

      .warning {
        background: #ffebee;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #f44336;
        margin: 20px 0;
      }

      .success {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #4caf50;
        margin: 20px 0;
      }

      .usage-scenarios {
        display: grid;
        grid-template-columns: 100%;
        gap: 10px;
        margin: 20px 0;
      }

      .scenario-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #667eea;
      }

      .type-narrowing {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #2196f3;
      }

      .narrowing-step {
        margin: 10px 0;
        padding: 10px;
        background: white;
        border-radius: 4px;
        border-left: 3px solid #2196f3;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        color: white;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          flex-direction: column;
        }

        .type-safety-scale {
          flex-direction: column;
          gap: 10px;
        }
      }

      .code-comparison {
        display: flex;
        gap: 20px;
        margin: 20px 0;
      }

      .code-column {
        flex: 1;
        min-width: 300px;
      }

      .code-header {
        background: #667eea;
        color: white;
        padding: 10px;
        border-radius: 6px 6px 0 0;
        font-weight: bold;
        text-align: center;
      }

      .code-content {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 0 0 6px 6px;
        font-family: "Courier New", monospace;
        overflow-x: auto;
      }

      .bad-practice {
        border-left: 4px solid #f44336;
      }

      .good-practice {
        border-left: 4px solid #4caf50;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>TypeScript unknown ç±»å‹è¯¦è§£</h1>
        <p class="subtitle">å®‰å…¨å¤„ç†æœªçŸ¥ç±»å‹çš„æœ€ä½³å®è·µ</p>
      </header>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>ä»€ä¹ˆæ˜¯ unknown ç±»å‹ï¼Ÿ</h2>

          <p><code>unknown</code> æ˜¯ TypeScript 3.0 å¼•å…¥çš„ç±»å‹ï¼Œè¡¨ç¤º"æœªçŸ¥ç±»å‹" - æˆ‘ä»¬ä¸çŸ¥é“å˜é‡å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œéœ€è¦è¿›è¡Œç±»å‹æ£€æŸ¥åæ‰èƒ½ä½¿ç”¨ã€‚</p>

          <div class="code-example">
            // unknown ç±»å‹çš„åŸºæœ¬ç”¨æ³•<br />
            let userInput: unknown;<br /><br />

            userInput = 'Hello'; // âœ… å…è®¸<br />
            userInput = 42; // âœ… å…è®¸<br />
            userInput = true; // âœ… å…è®¸<br />
            userInput = { name: 'John' }; // âœ… å…è®¸<br /><br />

            // ä½†ä¸èƒ½ç›´æ¥ä½¿ç”¨<br />
            // let message: string = userInput; // âŒ é”™è¯¯
          </div>

          <div class="note">
            <strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong><br />
            â€¢ å¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å€¼<br />
            â€¢ ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™å…¶ä»–ç±»å‹ï¼ˆé™¤äº† unknown å’Œ anyï¼‰<br />
            â€¢ ä¸èƒ½ç›´æ¥è®¿é—®å±æ€§æˆ–è°ƒç”¨æ–¹æ³•<br />
            â€¢ å¿…é¡»è¿›è¡Œç±»å‹æ£€æŸ¥æˆ–ç±»å‹æ–­è¨€åæ‰èƒ½ä½¿ç”¨
          </div>

          <h3>ç±»å‹å®‰å…¨ç­‰çº§</h3>

          <div class="type-safety-scale">
            <div class="type-level any-type">
              <h4>any</h4>
              <p>âŒ æœ€ä¸å®‰å…¨</p>
              <p>å®Œå…¨æ”¾å¼ƒç±»å‹æ£€æŸ¥</p>
            </div>
            <div class="type-level unknown-type">
              <h4>unknown</h4>
              <p>âš ï¸ å®‰å…¨ä½†å—é™</p>
              <p>éœ€è¦ç±»å‹æ£€æŸ¥</p>
            </div>
            <div class="type-level specific-type">
              <h4>å…·ä½“ç±»å‹</h4>
              <p>âœ… æœ€å®‰å…¨</p>
              <p>å®Œå…¨ç±»å‹å®‰å…¨</p>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>unknown vs any å¯¹æ¯”</h2>

          <div class="code-comparison">
            <div class="code-column">
              <div class="code-header bad-practice">any - ä¸å®‰å…¨</div>
              <div class="code-content">
                let data: any = 'hello';<br /><br />

                // è¿™äº›æ“ä½œéƒ½ä¸ä¼šæŠ¥é”™ï¼Œä½†å¯èƒ½è¿è¡Œæ—¶å‡ºé”™<br />
                data.toUpperCase(); // âœ… ç¼–è¯‘é€šè¿‡<br />
                data(); // âœ… ç¼–è¯‘é€šè¿‡<br />
                data.nonExistingProp; // âœ… ç¼–è¯‘é€šè¿‡<br />
                data = 42;<br />
                data.toUpperCase(); // âŒ è¿è¡Œæ—¶é”™è¯¯ï¼
              </div>
            </div>

            <div class="code-column">
              <div class="code-header good-practice">unknown - å®‰å…¨</div>
              <div class="code-content">
                let data: unknown = 'hello';<br /><br />

                // è¿™äº›æ“ä½œéƒ½ä¼šç¼–è¯‘é”™è¯¯<br />
                // data.toUpperCase(); // âŒ ç¼–è¯‘é”™è¯¯<br />
                // data(); // âŒ ç¼–è¯‘é”™è¯¯<br />
                // data.nonExistingProp; // âŒ ç¼–è¯‘é”™è¯¯<br /><br />

                // å¿…é¡»å…ˆè¿›è¡Œç±»å‹æ£€æŸ¥<br />
                if (typeof data === 'string') {<br />
                &nbsp;&nbsp;data.toUpperCase(); // âœ… å®‰å…¨<br />
                }
              </div>
            </div>
          </div>

          <div class="demo-container">
            <h3>å®æ—¶ç±»å‹æ£€æŸ¥æ¼”ç¤º</h3>
            <div class="demo-result" id="typeCheckDemo">// è¾“å…¥ä¸€äº› JSON æ•°æ®è¿›è¡Œç±»å‹æ£€æŸ¥æ¼”ç¤º</div>
            <div class="controls">
              <button onclick="testUnknownSafety()">æµ‹è¯• unknown å®‰å…¨æ€§</button>
              <button onclick="testAnyDanger()">æµ‹è¯• any çš„å±é™©æ€§</button>
              <button onclick="clearDemo()">æ¸…ç©ºæ¼”ç¤º</button>
            </div>
          </div>
        </div>
      </div>

      <table class="comparison-table">
        <tr>
          <th>ç‰¹æ€§</th>
          <th>unknown</th>
          <th>any</th>
        </tr>
        <tr>
          <td><strong>ç±»å‹å®‰å…¨</strong></td>
          <td>âœ… å®‰å…¨ï¼ˆéœ€è¦ç±»å‹æ£€æŸ¥ï¼‰</td>
          <td>âŒ ä¸å®‰å…¨ï¼ˆè·³è¿‡ç±»å‹æ£€æŸ¥ï¼‰</td>
        </tr>
        <tr>
          <td><strong>èµ‹å€¼ç»™å…¶ä»–ç±»å‹</strong></td>
          <td>âŒ ä¸å…è®¸ï¼ˆéœ€è¦ç±»å‹æ–­è¨€ï¼‰</td>
          <td>âœ… å…è®¸</td>
        </tr>
        <tr>
          <td><strong>è®¿é—®å±æ€§</strong></td>
          <td>âŒ ä¸å…è®¸ï¼ˆéœ€è¦ç±»å‹æ£€æŸ¥ï¼‰</td>
          <td>âœ… å…è®¸</td>
        </tr>
        <tr>
          <td><strong>è°ƒç”¨æ–¹æ³•</strong></td>
          <td>âŒ ä¸å…è®¸ï¼ˆéœ€è¦ç±»å‹æ£€æŸ¥ï¼‰</td>
          <td>âœ… å…è®¸</td>
        </tr>
        <tr>
          <td><strong>ä½¿ç”¨åœºæ™¯</strong></td>
          <td>åŠ¨æ€æ•°æ®ã€APIå“åº”ã€ç”¨æˆ·è¾“å…¥</td>
          <td>è¿ç§»æ—§ä»£ç ã€ç¬¬ä¸‰æ–¹åº“</td>
        </tr>
      </table>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>unknown çš„ä½¿ç”¨åœºæ™¯</h2>

          <div class="usage-scenarios">
            <div class="scenario-card">
              <h4>ğŸ“¡ API å“åº”å¤„ç†</h4>
              <p>å¤„ç†æ¥è‡ªå¤–éƒ¨ API çš„æœªçŸ¥æ•°æ®ç»“æ„</p>
              <div class="code-example">
                async function fetchData(): Promise&lt;unknown&gt; {<br />
                &nbsp;&nbsp;const response = await fetch('/api/data');<br />
                &nbsp;&nbsp;return response.json();<br />
                }
              </div>
            </div>

            <div class="scenario-card">
              <h4>âŒ¨ï¸ ç”¨æˆ·è¾“å…¥å¤„ç†</h4>
              <p>å¤„ç†è¡¨å•è¾“å…¥ã€URL å‚æ•°ç­‰ç”¨æˆ·æä¾›çš„æ•°æ®</p>
              <div class="code-example">
                function processInput(input: unknown): string {<br />
                &nbsp;&nbsp;if (typeof input === 'string') {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return input.trim();<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;return '';<br />
                }
              </div>
            </div>

            <div class="scenario-card">
              <h4>ğŸ“¦ ååºåˆ—åŒ–æ•°æ®</h4>
              <p>å¤„ç† JSON è§£æã€æœ¬åœ°å­˜å‚¨ç­‰ååºåˆ—åŒ–æ“ä½œ</p>
              <div class="code-example">
                function parseJSON(json: string): unknown {<br />
                &nbsp;&nbsp;return JSON.parse(json);<br />
                }
              </div>
            </div>
          </div>

          <h3>ç±»å‹æ”¶çª„ï¼ˆType Narrowingï¼‰</h3>

          <div class="type-narrowing">
            <h4>unknown åˆ°å…·ä½“ç±»å‹çš„è½¬æ¢è¿‡ç¨‹</h4>

            <div class="narrowing-step">
              <strong>1. ç±»å‹æ£€æŸ¥</strong>
              <div class="code-example">
                function processValue(value: unknown) {<br />
                &nbsp;&nbsp;if (typeof value === 'string') {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;// è¿™é‡Œ value æ˜¯ string ç±»å‹<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return value.toUpperCase();<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;if (typeof value === 'number') {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;// è¿™é‡Œ value æ˜¯ number ç±»å‹<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return value.toFixed(2);<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;// è¿™é‡Œ value ä»ç„¶æ˜¯ unknown<br />
                &nbsp;&nbsp;return 'Unknown type';<br />
                }
              </div>
            </div>

            <div class="narrowing-step">
              <strong>2. ç±»å‹æ–­è¨€</strong>
              <div class="code-example">
                function handleApiResponse(response: unknown) {<br />
                &nbsp;&nbsp;// ä½¿ç”¨ç±»å‹æ–­è¨€ï¼ˆéœ€è¦ç¡®ä¿ç±»å‹æ­£ç¡®ï¼‰<br />
                &nbsp;&nbsp;const data = response as { id: number; name: string };<br />
                &nbsp;&nbsp;return data.name;<br />
                }
              </div>
            </div>

            <div class="narrowing-step">
              <strong>3. ç±»å‹ä¿æŠ¤å‡½æ•°</strong>
              <div class="code-example">
                function isUser(obj: unknown): obj is User {<br />
                &nbsp;&nbsp;return (<br />
                &nbsp;&nbsp;&nbsp;&nbsp;typeof obj === 'object' &&<br />
                &nbsp;&nbsp;&nbsp;&nbsp;obj !== null &&<br />
                &nbsp;&nbsp;&nbsp;&nbsp;'id' in obj &&<br />
                &nbsp;&nbsp;&nbsp;&nbsp;'name' in obj<br />
                &nbsp;&nbsp;);<br />
                }
              </div>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>å®é™…åº”ç”¨ç¤ºä¾‹</h2>

          <div class="demo-container">
            <h3>API å“åº”å¤„ç†</h3>
            <div class="code-example">
              interface User {<br />
              &nbsp;&nbsp;id: number;<br />
              &nbsp;&nbsp;name: string;<br />
              &nbsp;&nbsp;email: string;<br />
              }<br /><br />

              // ç±»å‹ä¿æŠ¤å‡½æ•°<br />
              function isUser(obj: unknown): obj is User {<br />
              &nbsp;&nbsp;return (<br />
              &nbsp;&nbsp;&nbsp;&nbsp;typeof obj === 'object' &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;obj !== null &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;'id' in obj &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;typeof (obj as any).id === 'number' &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;'name' in obj &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;typeof (obj as any).name === 'string' &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;'email' in obj &&<br />
              &nbsp;&nbsp;&nbsp;&nbsp;typeof (obj as any).email === 'string'<br />
              &nbsp;&nbsp;);<br />
              }<br /><br />

              async function fetchUser(id: number): Promise&lt;User | null&gt; {<br />
              &nbsp;&nbsp;try {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;const response: unknown = await fetch(`/api/users/${id}`).then(r => r.json());<br />
              &nbsp;&nbsp;&nbsp;&nbsp;if (isUser(response)) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return response;<br />
              &nbsp;&nbsp;&nbsp;&nbsp;}<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return null;<br />
              &nbsp;&nbsp;} catch {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return null;<br />
              &nbsp;&nbsp;}<br />
              }
            </div>
          </div>

          <div class="demo-container">
            <h3>é…ç½®å¤„ç†</h3>
            <div class="code-example">
              function loadConfig(): unknown {<br />
              &nbsp;&nbsp;try {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;const config = localStorage.getItem('app-config');<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return config ? JSON.parse(config) : null;<br />
              &nbsp;&nbsp;} catch {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return null;<br />
              &nbsp;&nbsp;}<br />
              }<br /><br />

              function getConfigValue&lt;T&gt;(config: unknown, key: string, defaultValue: T): T {<br />
              &nbsp;&nbsp;if (typeof config === 'object' && config !== null && key in config) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;const value = (config as any)[key];<br />
              &nbsp;&nbsp;&nbsp;&nbsp;if (typeof value === typeof defaultValue) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return value as T;<br />
              &nbsp;&nbsp;&nbsp;&nbsp;}<br />
              &nbsp;&nbsp;}<br />
              &nbsp;&nbsp;return defaultValue;<br />
              }
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>æœ€ä½³å®è·µå’Œæ¨¡å¼</h2>

          <h3>1. ä¼˜å…ˆä½¿ç”¨ unknown è€Œä¸æ˜¯ any</h3>
          <div class="code-comparison">
            <div class="code-column">
              <div class="code-header bad-practice">ä¸æ¨è</div>
              <div class="code-content">
                function parseData(data: any) {<br />
                &nbsp;&nbsp;// å¯èƒ½è¿è¡Œæ—¶å‡ºé”™<br />
                &nbsp;&nbsp;return data.items.map((item: any) => item.name);<br />
                }
              </div>
            </div>

            <div class="code-column">
              <div class="code-header good-practice">æ¨è</div>
              <div class="code-content">
                function parseData(data: unknown) {<br />
                &nbsp;&nbsp;if (isValidData(data)) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return data.items.map(item => item.name);<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;return [];<br />
                }
              </div>
            </div>
          </div>

          <h3>2. ä½¿ç”¨ç±»å‹ä¿æŠ¤å‡½æ•°</h3>
          <div class="code-example">
            // åˆ›å»ºå¯é‡ç”¨çš„ç±»å‹ä¿æŠ¤<br />
            function isString(value: unknown): value is string {<br />
            &nbsp;&nbsp;return typeof value === 'string';<br />
            }<br /><br />

            function isNumber(value: unknown): value is number {<br />
            &nbsp;&nbsp;return typeof value === 'number';<br />
            }<br /><br />

            function isArray(value: unknown): value is unknown[] {<br />
            &nbsp;&nbsp;return Array.isArray(value);<br />
            }
          </div>

          <h3>3. è°¨æ…ä½¿ç”¨ç±»å‹æ–­è¨€</h3>
          <div class="code-comparison">
            <div class="code-column">
              <div class="code-header bad-practice">å±é™©çš„æ–¹å¼</div>
              <div class="code-content">
                function getData() {<br />
                &nbsp;&nbsp;const response: unknown = fetchData();<br />
                &nbsp;&nbsp;// ç›´æ¥æ–­è¨€ï¼Œå¯èƒ½å‡ºé”™<br />
                &nbsp;&nbsp;return (response as User[]).map(user => user.name);<br />
                }
              </div>
            </div>

            <div class="code-column">
              <div class="code-header good-practice">å®‰å…¨çš„æ–¹å¼</div>
              <div class="code-content">
                function getData() {<br />
                &nbsp;&nbsp;const response: unknown = fetchData();<br />
                &nbsp;&nbsp;// å…ˆæ£€æŸ¥å†æ–­è¨€<br />
                &nbsp;&nbsp;if (isUserArray(response)) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return response.map(user => user.name);<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;return [];<br />
                }
              </div>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>é«˜çº§æ¨¡å¼</h2>

          <div class="demo-container">
            <h3>æ³›å‹ä¸ unknown</h3>
            <div class="code-example">
              // å®‰å…¨çš„ååºåˆ—åŒ–å‡½æ•°<br />
              function safeParse&lt;T&gt;(<br />
              &nbsp;&nbsp;json: string,<br />
              &nbsp;&nbsp;validator: (data: unknown) => data is T<br />
              ): T | null {<br />
              &nbsp;&nbsp;try {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;const data: unknown = JSON.parse(json);<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return validator(data) ? data : null;<br />
              &nbsp;&nbsp;} catch {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return null;<br />
              &nbsp;&nbsp;}<br />
              }<br /><br />

              // ä½¿ç”¨ç¤ºä¾‹<br />
              const userValidator = (data: unknown): data is User =><br />
              &nbsp;&nbsp;typeof data === 'object' && data !== null && 'id' in data && 'name' in data;<br /><br />

              const user = safeParse('{"id":1,"name":"John"}', userValidator);
            </div>
          </div>

          <div class="demo-container">
            <h3>é”™è¯¯å¤„ç†æ¨¡å¼</h3>
            <div class="code-example">
              // Result æ¨¡å¼å¤„ç† unknown æ•°æ®<br />
              type Result&lt;T, E = Error&gt; =<br />
              &nbsp;&nbsp;| { success: true; data: T }<br />
              &nbsp;&nbsp;| { success: false; error: E };<br /><br />

              function safeProcess&lt;T&gt;(<br />
              &nbsp;&nbsp;input: unknown,<br />
              &nbsp;&nbsp;processor: (data: T) => void<br />
              ): Result&lt;void&gt; {<br />
              &nbsp;&nbsp;try {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;// å‡è®¾æˆ‘ä»¬æœ‰ç±»å‹æ£€æŸ¥<br />
              &nbsp;&nbsp;&nbsp;&nbsp;if (isValidInput&lt;T&gt;(input)) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processor(input);<br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return { success: true, data: undefined };<br />
              &nbsp;&nbsp;&nbsp;&nbsp;}<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return { success: false, error: new Error('Invalid input') };<br />
              &nbsp;&nbsp;} catch (error) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return { success: false, error: error as Error };<br />
              &nbsp;&nbsp;}<br />
              }
            </div>
          </div>

          <div class="success">
            <strong>æ€»ç»“ï¼š</strong><br />
            â€¢ ä½¿ç”¨ unknown ä»£æ›¿ any æ¥æé«˜ç±»å‹å®‰å…¨<br />
            â€¢ æ€»æ˜¯å¯¹ unknown å€¼è¿›è¡Œç±»å‹æ£€æŸ¥åå†ä½¿ç”¨<br />
            â€¢ åˆ›å»ºå¯é‡ç”¨çš„ç±»å‹ä¿æŠ¤å‡½æ•°<br />
            â€¢ åœ¨ç¡®å®çŸ¥é“ç±»å‹æ—¶æ‰ä½¿ç”¨ç±»å‹æ–­è¨€
          </div>
        </div>
      </div>

      <footer>
        <p>TypeScript unknown ç±»å‹è¯¦è§£ &copy; 2023 - å®‰å…¨å¤„ç†æœªçŸ¥ç±»å‹çš„æœ€ä½³å®è·µ</p>
      </footer>
    </div>

    <script>
      // æ¼”ç¤º unknown ç±»å‹çš„å®‰å…¨æ€§
      function testUnknownSafety() {
        const demo = document.getElementById("typeCheckDemo");
        demo.innerHTML = "";

        // æ¨¡æ‹Ÿ unknown æ•°æ®
        let unknownData = getRandomUnknownData();
        demo.innerHTML += `ğŸ“¦ è·å–åˆ° unknown æ•°æ®: ${JSON.stringify(unknownData)}<br/><br/>`;

        // å°è¯•ç›´æ¥ä½¿ç”¨ï¼ˆä¼šæŠ¥é”™ï¼‰
        demo.innerHTML += "âŒ å°è¯•ç›´æ¥ä½¿ç”¨ unknown æ•°æ®:<br/>";
        demo.innerHTML += "// ä»¥ä¸‹æ“ä½œåœ¨ TypeScript ä¸­ä¼šç¼–è¯‘é”™è¯¯<br/>";
        demo.innerHTML += "// unknownData.toUpperCase();<br/>";
        demo.innerHTML += "// unknownData();<br/>";
        demo.innerHTML += "// unknownData.someProperty;<br/><br/>";

        // æ­£ç¡®çš„ç±»å‹æ£€æŸ¥
        demo.innerHTML += "âœ… æ­£ç¡®çš„ç±»å‹æ£€æŸ¥æ–¹å¼:<br/>";

        if (typeof unknownData === "string") {
          demo.innerHTML += `ğŸ” æ£€æµ‹åˆ°å­—ç¬¦ä¸²: "${unknownData.toUpperCase()}"<br/>`;
        } else if (typeof unknownData === "number") {
          demo.innerHTML += `ğŸ” æ£€æµ‹åˆ°æ•°å­—: ${unknownData.toFixed(2)}<br/>`;
        } else if (Array.isArray(unknownData)) {
          demo.innerHTML += `ğŸ” æ£€æµ‹åˆ°æ•°ç»„: [${unknownData.join(", ")}]<br/>`;
        } else if (typeof unknownData === "object" && unknownData !== null) {
          demo.innerHTML += `ğŸ” æ£€æµ‹åˆ°å¯¹è±¡: ${JSON.stringify(unknownData)}<br/>`;
        } else {
          demo.innerHTML += `ğŸ” å…¶ä»–ç±»å‹: ${typeof unknownData}<br/>`;
        }
      }

      function testAnyDanger() {
        const demo = document.getElementById("typeCheckDemo");
        demo.innerHTML = "";

        // æ¨¡æ‹Ÿ any æ•°æ®çš„å±é™©æ€§
        let anyData = getRandomUnknownData();
        demo.innerHTML += `âš ï¸ è·å–åˆ° any æ•°æ®: ${JSON.stringify(anyData)}<br/><br/>`;

        demo.innerHTML += "âŒ any å…è®¸å±é™©æ“ä½œï¼ˆç¼–è¯‘é€šè¿‡ä½†å¯èƒ½è¿è¡Œæ—¶å‡ºé”™ï¼‰:<br/>";

        try {
          // è¿™äº›æ“ä½œåœ¨ TypeScript ä¸­ä½¿ç”¨ any æ—¶ç¼–è¯‘é€šè¿‡
          // ä½†è¿è¡Œæ—¶å¯èƒ½å‡ºé”™
          demo.innerHTML += `1. è°ƒç”¨æ–¹æ³•: ${anyData.nonExistingMethod?.() || "æ–¹æ³•ä¸å­˜åœ¨"}<br/>`;
        } catch (e) {
          demo.innerHTML += `1. è°ƒç”¨æ–¹æ³•: âŒ è¿è¡Œæ—¶é”™è¯¯: ${e.message}<br/>`;
        }

        try {
          demo.innerHTML += `2. è®¿é—®å±æ€§: ${anyData.someProperty || "å±æ€§ä¸å­˜åœ¨"}<br/>`;
        } catch (e) {
          demo.innerHTML += `2. è®¿é—®å±æ€§: âŒ è¿è¡Œæ—¶é”™è¯¯: ${e.message}<br/>`;
        }

        try {
          demo.innerHTML += `3. å­—ç¬¦ä¸²æ“ä½œ: ${anyData.toUpperCase?.() || "ä¸æ˜¯å­—ç¬¦ä¸²"}<br/>`;
        } catch (e) {
          demo.innerHTML += `3. å­—ç¬¦ä¸²æ“ä½œ: âŒ è¿è¡Œæ—¶é”™è¯¯: ${e.message}<br/>`;
        }

        demo.innerHTML += "<br/>ğŸ’¡ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåº”è¯¥ä½¿ç”¨ unknown è€Œä¸æ˜¯ anyï¼";
      }

      function clearDemo() {
        document.getElementById("typeCheckDemo").innerHTML = "// è¾“å…¥ä¸€äº› JSON æ•°æ®è¿›è¡Œç±»å‹æ£€æŸ¥æ¼”ç¤º";
      }

      // ç”Ÿæˆéšæœº unknown æ•°æ®ç”¨äºæ¼”ç¤º
      function getRandomUnknownData() {
        const types = [
          "Hello World", // string
          42, // number
          true, // boolean
          [1, 2, 3], // array
          { name: "John", age: 30 }, // object
          null, // null
          undefined, // undefined
        ];

        return types[Math.floor(Math.random() * types.length)];
      }

      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
      window.addEventListener("load", function () {
        console.log("=== TypeScript unknown ç±»å‹æ¼”ç¤º ===");
        console.log("unknown æä¾›äº†ç±»å‹å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†åŠ¨æ€æ•°æ®");
      });

      // æ¨¡æ‹Ÿ TypeScript ç±»å‹æ£€æŸ¥çš„æ¦‚å¿µ
      function demonstrateTypeSafety() {
        console.log("ğŸ”’ unknown å¼ºåˆ¶ç±»å‹æ£€æŸ¥ï¼Œany è·³è¿‡ç±»å‹æ£€æŸ¥");
      }
    </script>
  </body>
</html>
