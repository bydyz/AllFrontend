<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScript never ç±»å‹è¯¦è§£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.5rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1.2rem;
      }

      .content-wrapper {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        gap: 30px;
        margin-bottom: 40px;
      }

      .explanation {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .demo-area {
        flex: 1;
        min-width: 350px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      h2 {
        color: #667eea;
        margin: 20px 0 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f0f0f0;
      }

      h3 {
        color: #2c3e50;
        margin: 15px 0 10px;
      }

      p {
        margin-bottom: 15px;
      }

      .code-example {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: "Courier New", monospace;
        line-height: 1.5;
        border-left: 4px solid #667eea;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th,
      .comparison-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }

      .comparison-table th {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        font-weight: 600;
      }

      .comparison-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .type-hierarchy {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 10px;
        margin: 20px 0;
        border: 2px solid #667eea;
      }

      .hierarchy-level {
        margin: 15px 0;
        padding: 15px;
        background: white;
        border-radius: 6px;
        border-left: 4px solid;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .top-type {
        border-left-color: #4caf50;
      }
      .never-type {
        border-left-color: #f44336;
      }
      .bottom-type {
        border-left-color: #ff9800;
      }

      .demo-container {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #e9ecef;
      }

      .demo-result {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 6px;
        margin: 10px 0;
        font-family: "Courier New", monospace;
        min-height: 100px;
      }

      .controls {
        display: flex;
        gap: 10px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      button {
        padding: 10px 15px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        flex: 1;
        min-width: 120px;
      }

      button:hover {
        background: #5a6fd8;
        transform: translateY(-2px);
      }

      .note {
        background: #fff8e1;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #ffc107;
        margin: 20px 0;
      }

      .warning {
        background: #ffebee;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #f44336;
        margin: 20px 0;
      }

      .success {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #4caf50;
        margin: 20px 0;
      }

      .usage-scenarios {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .scenario-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #667eea;
      }

      .exhaustiveness-checking {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #2196f3;
      }

      .checking-step {
        margin: 10px 0;
        padding: 10px;
        background: white;
        border-radius: 4px;
        border-left: 3px solid #2196f3;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        color: white;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          flex-direction: column;
        }
      }

      .type-comparison {
        display: flex;
        gap: 20px;
        margin: 20px 0;
      }

      .type-column {
        flex: 1;
        min-width: 300px;
      }

      .type-header {
        background: #667eea;
        color: white;
        padding: 10px;
        border-radius: 6px 6px 0 0;
        font-weight: bold;
        text-align: center;
      }

      .type-content {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 0 0 6px 6px;
        font-family: "Courier New", monospace;
        overflow-x: auto;
      }

      .never-demo {
        border-left: 4px solid #f44336;
      }

      .void-demo {
        border-left: 4px solid #ff9800;
      }

      .visual-representation {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 25px 0;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .type-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        margin: 0 20px;
        text-align: center;
      }

      .any-circle {
        background: #4caf50;
      }

      .never-circle {
        background: #f44336;
      }

      .arrow {
        font-size: 2rem;
        color: #667eea;
      }

      .practical-examples {
        background: #f3e5f5;
        padding: 25px;
        border-radius: 8px;
        margin: 20px 0;
        border: 2px solid #9c27b0;
      }

      .example-item {
        margin: 15px 0;
        padding: 15px;
        background: white;
        border-radius: 6px;
        border-left: 4px solid #9c27b0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>TypeScript never ç±»å‹è¯¦è§£</h1>
        <p class="subtitle">æ·±å…¥ç†è§£"ä¸å¯èƒ½"ç±»å‹çš„æ„ä¹‰ä¸åº”ç”¨</p>
      </header>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>ä»€ä¹ˆæ˜¯ never ç±»å‹ï¼Ÿ</h2>

          <p><code>never</code> ç±»å‹è¡¨ç¤º<strong>æ°¸è¿œä¸ä¼šå‘ç”Ÿ</strong>çš„å€¼ï¼Œæ˜¯ TypeScript ä¸­çš„<strong>åº•éƒ¨ç±»å‹ï¼ˆBottom Typeï¼‰</strong>ã€‚</p>

          <div class="code-example">
            // never ç±»å‹çš„åŸºæœ¬ç‰¹æ€§<br />
            function throwError(message: string): never {<br />
            &nbsp;&nbsp;throw new Error(message);<br />
            }<br /><br />

            function infiniteLoop(): never {<br />
            &nbsp;&nbsp;while (true) {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;// æ— é™å¾ªç¯ï¼Œæ°¸è¿œä¸ä¼šè¿”å›<br />
            &nbsp;&nbsp;}<br />
            }<br /><br />

            // never ç±»å‹çš„å˜é‡ä¸èƒ½è¢«èµ‹å€¼<br />
            let impossible: never;<br />
            // impossible = 123; // âŒ é”™è¯¯<br />
            // impossible = 'hello'; // âŒ é”™è¯¯
          </div>

          <div class="note">
            <strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong><br />
            â€¢ è¡¨ç¤ºæ°¸è¿œä¸ä¼šå‡ºç°çš„å€¼<br />
            â€¢ æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹<br />
            â€¢ ä¸èƒ½æœ‰ä»»ä½•å€¼<br />
            â€¢ ç”¨äºä¸å¯èƒ½çš„æƒ…å†µå’Œç©·å°½æ£€æŸ¥
          </div>

          <h3>ç±»å‹å±‚æ¬¡ç»“æ„</h3>

          <div class="type-hierarchy">
            <div class="hierarchy-level top-type">
              <strong>é¡¶éƒ¨ç±»å‹</strong> - any, unknown<br />
              <em>å¯ä»¥åŒ…å«ä»»ä½•å€¼</em>
            </div>
            <div class="hierarchy-level">
              <strong>å…·ä½“ç±»å‹</strong> - string, number, object ç­‰<br />
              <em>ç‰¹å®šçš„å€¼èŒƒå›´</em>
            </div>
            <div class="hierarchy-level never-type">
              <strong>åº•éƒ¨ç±»å‹</strong> - never<br />
              <em>ä¸åŒ…å«ä»»ä½•å€¼</em>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>never çš„å¯è§†åŒ–ç†è§£</h2>

          <div class="visual-representation">
            <div class="type-circle any-circle">any<br />æ‰€æœ‰å€¼</div>
            <div class="arrow">â†’</div>
            <div class="type-circle" style="background: #2196f3">å…·ä½“ç±»å‹<br />ç‰¹å®šå€¼</div>
            <div class="arrow">â†’</div>
            <div class="type-circle never-circle">never<br />æ²¡æœ‰å€¼</div>
          </div>

          <div class="demo-container">
            <h3>never ç±»å‹æ£€æµ‹</h3>
            <div class="demo-result" id="neverDetectionDemo">// æµ‹è¯• never ç±»å‹çš„è¡Œä¸º</div>
            <div class="controls">
              <button onclick="testNeverAssignment()">æµ‹è¯•èµ‹å€¼</button>
              <button onclick="testNeverFunctions()">æµ‹è¯•å‡½æ•°</button>
              <button onclick="testExhaustiveness()">æµ‹è¯•ç©·å°½æ£€æŸ¥</button>
              <button onclick="clearDemo()">æ¸…ç©ºæ¼”ç¤º</button>
            </div>
          </div>
        </div>
      </div>

      <table class="comparison-table">
        <tr>
          <th>ç±»å‹</th>
          <th>æè¿°</th>
          <th>åŒ…å«çš„å€¼</th>
          <th>ä½¿ç”¨åœºæ™¯</th>
        </tr>
        <tr>
          <td><strong>never</strong></td>
          <td>æ°¸è¿œä¸ä¼šå‘ç”Ÿçš„å€¼</td>
          <td>0 ä¸ªå€¼</td>
          <td>é”™è¯¯å¤„ç†ã€ç©·å°½æ£€æŸ¥</td>
        </tr>
        <tr>
          <td><strong>void</strong></td>
          <td>æ²¡æœ‰è¿”å›å€¼</td>
          <td>undefined (æˆ–æ²¡æœ‰å€¼)</td>
          <td>æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°</td>
        </tr>
        <tr>
          <td><strong>unknown</strong></td>
          <td>æœªçŸ¥ç±»å‹</td>
          <td>æ‰€æœ‰å€¼</td>
          <td>å®‰å…¨å¤„ç†åŠ¨æ€æ•°æ®</td>
        </tr>
        <tr>
          <td><strong>any</strong></td>
          <td>ä»»ä½•ç±»å‹</td>
          <td>æ‰€æœ‰å€¼</td>
          <td>è¿ç§»æ—§ä»£ç </td>
        </tr>
      </table>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>never ç±»å‹çš„ä¸»è¦ä½¿ç”¨åœºæ™¯</h2>

          <div class="usage-scenarios">
            <div class="scenario-card">
              <h4>ğŸš¨ é”™è¯¯å¤„ç†å‡½æ•°</h4>
              <p>æ€»æ˜¯æŠ›å‡ºé”™è¯¯çš„å‡½æ•°</p>
              <div class="code-example">
                function throwError(message: string): never {<br />
                &nbsp;&nbsp;throw new Error(message);<br />
                }<br /><br />

                function fail(): never {<br />
                &nbsp;&nbsp;return throwError("Something failed");<br />
                }
              </div>
            </div>

            <div class="scenario-card">
              <h4>â™¾ï¸ æ— é™å¾ªç¯</h4>
              <p>æ°¸è¿œä¸ä¼šè¿”å›çš„å‡½æ•°</p>
              <div class="code-example">
                function infiniteLoop(): never {<br />
                &nbsp;&nbsp;while (true) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;console.log("Running forever...");<br />
                &nbsp;&nbsp;}<br />
                }<br /><br />

                function server(): never {<br />
                &nbsp;&nbsp;infiniteLoop(); // æœåŠ¡å™¨æ°¸ä¸åœæ­¢<br />
                }
              </div>
            </div>

            <div class="scenario-card">
              <h4>ğŸ”’ ç©·å°½æ£€æŸ¥</h4>
              <p>ç¡®ä¿å¤„ç†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µ</p>
              <div class="code-example">
                function assertNever(x: never): never {<br />
                &nbsp;&nbsp;throw new Error(`Unexpected value: ${x}`);<br />
                }<br /><br />

                // åœ¨ switch è¯­å¥ä¸­ç¡®ä¿å¤„ç†æ‰€æœ‰æƒ…å†µ
              </div>
            </div>
          </div>

          <h3>never ä¸ void çš„åŒºåˆ«</h3>

          <div class="type-comparison">
            <div class="type-column">
              <div class="type-header never-demo">never</div>
              <div class="type-content">
                // å‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›<br />
                function throwError(): never {<br />
                &nbsp;&nbsp;throw new Error();<br />
                &nbsp;&nbsp;// è¿™é‡Œæ²¡æœ‰è¿”å›è¯­å¥<br />
                }<br /><br />

                let result = throwError();<br />
                // result çš„ç±»å‹æ˜¯ never<br />
                // è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ
              </div>
            </div>

            <div class="type-column">
              <div class="type-header void-demo">void</div>
              <div class="type-content">
                // å‡½æ•°æ²¡æœ‰è¿”å›å€¼<br />
                function logMessage(): void {<br />
                &nbsp;&nbsp;console.log("Hello");<br />
                &nbsp;&nbsp;// éšå¼è¿”å› undefined<br />
                }<br /><br />

                let message = logMessage();<br />
                // message çš„ç±»å‹æ˜¯ void (undefined)<br />
                // è¿™è¡Œä»£ç ä¼šæ­£å¸¸æ‰§è¡Œ
              </div>
            </div>
          </div>
        </div>

        <div class="demo-area">
          <h2>ç©·å°½æ£€æŸ¥ï¼ˆExhaustiveness Checkingï¼‰</h2>

          <div class="exhaustiveness-checking">
            <h4>ç¡®ä¿å¤„ç†æ‰€æœ‰å¯èƒ½çš„è”åˆç±»å‹</h4>

            <div class="checking-step">
              <strong>1. å®šä¹‰è”åˆç±»å‹</strong>
              <div class="code-example">
                type Shape =<br />
                &nbsp;&nbsp;| { kind: 'circle'; radius: number }<br />
                &nbsp;&nbsp;| { kind: 'square'; side: number }<br />
                &nbsp;&nbsp;| { kind: 'triangle'; base: number; height: number };
              </div>
            </div>

            <div class="checking-step">
              <strong>2. å®ç°å¤„ç†å‡½æ•°</strong>
              <div class="code-example">
                function getArea(shape: Shape): number {<br />
                &nbsp;&nbsp;switch (shape.kind) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'circle':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Math.PI * shape.radius ** 2;<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'square':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return shape.side ** 2;<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'triangle':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return (shape.base * shape.height) / 2;<br />
                &nbsp;&nbsp;&nbsp;&nbsp;default:<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// è¿™é‡Œ shape çš„ç±»å‹æ˜¯ never<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return assertNever(shape);<br />
                &nbsp;&nbsp;}<br />
                }
              </div>
            </div>

            <div class="checking-step">
              <strong>3. æ·»åŠ æ–°çš„å½¢çŠ¶ç±»å‹</strong>
              <div class="code-example">
                // å¦‚æœæ·»åŠ æ–°çš„å½¢çŠ¶ç±»å‹<br />
                type Shape =<br />
                &nbsp;&nbsp;| { kind: 'circle'; radius: number }<br />
                &nbsp;&nbsp;| { kind: 'square'; side: number }<br />
                &nbsp;&nbsp;| { kind: 'triangle'; base: number; height: number }<br />
                &nbsp;&nbsp;| { kind: 'rectangle'; width: number; height: number }; // æ–°å¢<br /><br />

                // TypeScript ä¼šç«‹å³æŠ¥é”™ï¼<br />
                // åœ¨ default åˆ†æ”¯ä¸­ï¼Œshape çš„ç±»å‹æ˜¯ { kind: 'rectangle', ... }<br />
                // ä¸æ˜¯ neverï¼Œæ‰€ä»¥ä¼šç¼–è¯‘é”™è¯¯
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>never åœ¨ç±»å‹è¿ç®—ä¸­çš„ä½œç”¨</h2>

          <h3>1. æ¡ä»¶ç±»å‹ä¸­çš„ never</h3>
          <div class="code-example">
            // ä»ç±»å‹ä¸­è¿‡æ»¤æ‰ null å’Œ undefined<br />
            type NonNullable&lt;T&gt; = T extends null | undefined ? never : T;<br /><br />

            type A = NonNullable&lt;string | null&gt;; // string<br />
            type B = NonNullable&lt;number | undefined&gt;; // number<br />
            type C = NonNullable&lt;null | undefined&gt;; // never
          </div>

          <h3>2. æ˜ å°„ç±»å‹ä¸­çš„ never</h3>
          <div class="code-example">
            // ä»å¯¹è±¡ç±»å‹ä¸­ç§»é™¤æŸäº›å±æ€§<br />
            type Exclude&lt;T, U&gt; = T extends U ? never : T;<br /><br />

            type User = {<br />
            &nbsp;&nbsp;id: number;<br />
            &nbsp;&nbsp;name: string;<br />
            &nbsp;&nbsp;password: string;<br />
            &nbsp;&nbsp;email: string;<br />
            };<br /><br />

            type PublicUser = Pick&lt;User, Exclude&lt;keyof User, 'password'&gt;&gt;;<br />
            // { id: number; name: string; email: string }
          </div>

          <h3>3. å‡½æ•°é‡è½½ä¸­çš„ never</h3>
          <div class="code-example">
            // è¡¨ç¤ºä¸å¯èƒ½çš„é‡è½½æƒ…å†µ<br />
            function parseInput(input: string): number;<br />
            function parseInput(input: number): string;<br />
            function parseInput(input: never): never; // ä¸å¯èƒ½çš„æƒ…å†µ<br />
            <br />
            function parseInput(input: string | number): string | number {<br />
            &nbsp;&nbsp;if (typeof input === 'string') {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;return parseInt(input);<br />
            &nbsp;&nbsp;}<br />
            &nbsp;&nbsp;return input.toString();<br />
            }
          </div>
        </div>

        <div class="demo-area">
          <h2>å®é™…åº”ç”¨ç¤ºä¾‹</h2>

          <div class="practical-examples">
            <div class="example-item">
              <h4>ğŸš¦ çŠ¶æ€æœºå®ç°</h4>
              <div class="code-example">
                type State = 'idle' | 'loading' | 'success' | 'error';<br /><br />

                function handleState(state: State): never {<br />
                &nbsp;&nbsp;switch (state) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'idle':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('å¼€å§‹åŠ è½½...');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return handleState('loading');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'loading':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return handleState('success');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'success':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('æ“ä½œæˆåŠŸï¼');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return; // æ­£å¸¸è¿”å›<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'error':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error('æ“ä½œå¤±è´¥');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;default:<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return assertNever(state);<br />
                &nbsp;&nbsp;}<br />
                }
              </div>
            </div>

            <div class="example-item">
              <h4>ğŸ›¡ï¸ è¾“å…¥éªŒè¯</h4>
              <div class="code-example">
                function validateInput(input: unknown): string {<br />
                &nbsp;&nbsp;if (typeof input === 'string') {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return input;<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;if (typeof input === 'number') {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;return input.toString();<br />
                &nbsp;&nbsp;}<br />
                &nbsp;&nbsp;// å…¶ä»–ç±»å‹éƒ½æ˜¯æ— æ•ˆçš„<br />
                &nbsp;&nbsp;return throwValidationError(input);<br />
                }<br /><br />

                function throwValidationError(value: never): never {<br />
                &nbsp;&nbsp;throw new Error(`Invalid input type: ${typeof value}`);<br />
                }
              </div>
            </div>

            <div class="example-item">
              <h4>ğŸ¯ è·¯ç”±å®ˆå«</h4>
              <div class="code-example">
                type UserRole = 'admin' | 'user' | 'guest';<br /><br />

                function checkAccess(role: UserRole, route: string): boolean {<br />
                &nbsp;&nbsp;switch (role) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'admin':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true; // ç®¡ç†å‘˜å¯ä»¥è®¿é—®æ‰€æœ‰è·¯ç”±<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'user':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return !route.startsWith('/admin');<br />
                &nbsp;&nbsp;&nbsp;&nbsp;case 'guest':<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return route === '/login' || route === '/register';<br />
                &nbsp;&nbsp;&nbsp;&nbsp;default:<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return assertNever(role);<br />
                &nbsp;&nbsp;}<br />
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="explanation">
          <h2>é«˜çº§æ¨¡å¼å’ŒæŠ€å·§</h2>

          <h3>1. è‡ªå®šä¹‰é”™è¯¯ç±»å‹</h3>
          <div class="code-example">
            // åˆ›å»ºè‡ªå®šä¹‰çš„ never è¿”å›å‡½æ•°<br />
            function panic(message: string): never {<br />
            &nbsp;&nbsp;throw new Error(`PANIC: ${message}`);<br />
            }<br /><br />

            function unreachable(): never {<br />
            &nbsp;&nbsp;return panic('This code should be unreachable');<br />
            }<br /><br />

            // ä½¿ç”¨ç¤ºä¾‹<br />
            function processValue(value: string | number) {<br />
            &nbsp;&nbsp;if (typeof value === 'string') {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;return value.toUpperCase();<br />
            &nbsp;&nbsp;}<br />
            &nbsp;&nbsp;if (typeof value === 'number') {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;return value.toFixed(2);<br />
            &nbsp;&nbsp;}<br />
            &nbsp;&nbsp;return unreachable(); // ç¡®ä¿ç¼–è¯‘æ—¶æ£€æŸ¥<br />
            }
          </div>

          <h3>2. ç±»å‹çº§åˆ«çš„æ–­è¨€</h3>
          <div class="code-example">
            // ç¡®ä¿æŸä¸ªç±»å‹æ˜¯ never<br />
            type IsNever&lt;T&gt; = [T] extends [never] ? true : false;<br /><br />

            type A = IsNever&lt;never&gt;; // true<br />
            type B = IsNever&lt;string&gt;; // false<br />
            type C = IsNever&lt;any&gt;; // false<br /><br />

            // åœ¨å¤æ‚ç±»å‹ç³»ç»Ÿä¸­ä½¿ç”¨<br />
            type Cleanup&lt;T&gt; = T extends never ? never : T;<br />
            type D = Cleanup&lt;string | never&gt;; // string
          </div>

          <h3>3. é€’å½’ç±»å‹çš„ç»ˆæ­¢æ¡ä»¶</h3>
          <div class="code-example">
            // ä½¿ç”¨ never ä½œä¸ºé€’å½’çš„ç»ˆæ­¢æ¡ä»¶<br />
            type DeepReadonly&lt;T&gt; =<br />
            &nbsp;&nbsp;T extends never ? T :<br />
            &nbsp;&nbsp;T extends object ? { readonly [K in keyof T]: DeepReadonly&lt;T[K]&gt; } : T;<br /><br />

            type User = {<br />
            &nbsp;&nbsp;profile: {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;name: string;<br />
            &nbsp;&nbsp;&nbsp;&nbsp;settings: { theme: string };<br />
            &nbsp;&nbsp;};<br />
            };<br /><br />

            type ReadonlyUser = DeepReadonly&lt;User&gt;;<br />
            // æ‰€æœ‰å±æ€§éƒ½æ˜¯ readonly
          </div>
        </div>

        <div class="demo-area">
          <h2>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>

          <div class="demo-container">
            <h3>é—®é¢˜ï¼šè¯¯ç”¨ never å¯¼è‡´ç±»å‹é”™è¯¯</h3>
            <div class="code-example">
              // âŒ é”™è¯¯çš„ä½¿ç”¨æ–¹å¼<br />
              function badExample(value: string): never {<br />
              &nbsp;&nbsp;if (value === 'test') {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return; // âŒ è¿™é‡Œè¿”å›äº† undefined<br />
              &nbsp;&nbsp;}<br />
              &nbsp;&nbsp;// âŒ å‡½æ•°å¯èƒ½æ­£å¸¸è¿”å›<br />
              }<br /><br />

              // âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼<br />
              function goodExample(value: string): never {<br />
              &nbsp;&nbsp;throw new Error(value); // âœ… æ€»æ˜¯æŠ›å‡ºé”™è¯¯<br />
              }<br /><br />

              function anotherGoodExample(): never {<br />
              &nbsp;&nbsp;while (true) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;// âœ… æ— é™å¾ªç¯ï¼Œæ°¸ä¸è¿”å›<br />
              &nbsp;&nbsp;}<br />
              }
            </div>
          </div>

          <div class="demo-container">
            <h3>è§£å†³æ–¹æ¡ˆï¼šæ­£ç¡®çš„ç©·å°½æ£€æŸ¥æ¨¡å¼</h3>
            <div class="code-example">
              // æ ‡å‡†çš„ç©·å°½æ£€æŸ¥å‡½æ•°<br />
              function assertNever(value: never, message?: string): never {<br />
              &nbsp;&nbsp;throw new Error(message || `Unexpected value: ${value}`);<br />
              }<br /><br />

              // å¸¦è°ƒè¯•ä¿¡æ¯çš„ç‰ˆæœ¬<br />
              function exhaustiveCheck(<br />
              &nbsp;&nbsp;value: never,<br />
              &nbsp;&nbsp;context?: string<br />
              ): never {<br />
              &nbsp;&nbsp;const contextInfo = context ? ` in ${context}` : '';<br />
              &nbsp;&nbsp;throw new Error(<br />
              &nbsp;&nbsp;&nbsp;&nbsp;`Exhaustiveness check failed${contextInfo}. ` +<br />
              &nbsp;&nbsp;&nbsp;&nbsp;`Unexpected value: ${JSON.stringify(value)}`<br />
              &nbsp;&nbsp;);<br />
              }
            </div>
          </div>

          <div class="success">
            <strong>æœ€ä½³å®è·µæ€»ç»“ï¼š</strong><br />
            â€¢ ä½¿ç”¨ <code>never</code> è¡¨ç¤ºä¸å¯èƒ½çš„æƒ…å†µ<br />
            â€¢ åœ¨ switch è¯­å¥ä¸­ä½¿ç”¨ç©·å°½æ£€æŸ¥ç¡®ä¿ç±»å‹å®‰å…¨<br />
            â€¢ åˆ›å»ºè‡ªå®šä¹‰çš„ never è¿”å›å‡½æ•°æé«˜ä»£ç å¯è¯»æ€§<br />
            â€¢ åœ¨æ¡ä»¶ç±»å‹ä¸­ä½¿ç”¨ never è¿›è¡Œç±»å‹è¿‡æ»¤
          </div>
        </div>
      </div>

      <footer>
        <p>TypeScript never ç±»å‹è¯¦è§£ &copy; 2023 - æ·±å…¥ç†è§£"ä¸å¯èƒ½"ç±»å‹çš„æ„ä¹‰ä¸åº”ç”¨</p>
      </footer>
    </div>

    <script>
      // æ¼”ç¤º never ç±»å‹çš„è¡Œä¸º
      function testNeverAssignment() {
        const demo = document.getElementById("neverDetectionDemo");
        demo.innerHTML = "";

        demo.innerHTML += "ğŸ§ª never ç±»å‹èµ‹å€¼æµ‹è¯•:<br/><br/>";

        // æ¨¡æ‹Ÿ TypeScript çš„ç±»å‹æ£€æŸ¥
        demo.innerHTML += "1. å°è¯•ç»™ never ç±»å‹å˜é‡èµ‹å€¼:<br/>";
        demo.innerHTML += "   let x: never;<br/>";
        demo.innerHTML += "   x = 123;        // âŒ TypeScript ç¼–è¯‘é”™è¯¯<br/>";
        demo.innerHTML += '   x = "hello";    // âŒ TypeScript ç¼–è¯‘é”™è¯¯<br/>';
        demo.innerHTML += "   x = {};         // âŒ TypeScript ç¼–è¯‘é”™è¯¯<br/><br/>";

        demo.innerHTML += "2. never ç±»å‹å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹:<br/>";
        demo.innerHTML += "   function fail(): never { throw new Error(); }<br/>";
        demo.innerHTML += "   let a: string = fail();  // âœ… å…è®¸<br/>";
        demo.innerHTML += "   let b: number = fail();  // âœ… å…è®¸<br/>";
        demo.innerHTML += "   let c: object = fail();  // âœ… å…è®¸<br/><br/>";

        demo.innerHTML += "ğŸ’¡ never æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼";
      }

      function testNeverFunctions() {
        const demo = document.getElementById("neverDetectionDemo");
        demo.innerHTML = "";

        demo.innerHTML += "ğŸš¨ never è¿”å›å‡½æ•°æµ‹è¯•:<br/><br/>";

        demo.innerHTML += "1. æŠ›å‡ºé”™è¯¯çš„å‡½æ•°:<br/>";
        demo.innerHTML += "   function throwError(): never {<br/>";
        demo.innerHTML += '       throw new Error("Something went wrong");<br/>';
        demo.innerHTML += "   }<br/>";
        demo.innerHTML += "   // è°ƒç”¨åä»£ç ä¸ä¼šç»§ç»­æ‰§è¡Œ<br/><br/>";

        demo.innerHTML += "2. æ— é™å¾ªç¯å‡½æ•°:<br/>";
        demo.innerHTML += "   function infiniteLoop(): never {<br/>";
        demo.innerHTML += "       while (true) {<br/>";
        demo.innerHTML += "           // æ°¸ä¸è¿”å›<br/>";
        demo.innerHTML += "       }<br/>";
        demo.innerHTML += "   }<br/>";
        demo.innerHTML += "   // è°ƒç”¨åæ°¸è¿œä¸ä¼šè¿”å›<br/><br/>";

        demo.innerHTML += "3. ç±»å‹ä¿æŠ¤:<br/>";
        demo.innerHTML += "   function assertNever(x: never): never {<br/>";
        demo.innerHTML += "       throw new Error(`Unexpected value: ${x}`);<br/>";
        demo.innerHTML += "   }<br/>";
        demo.innerHTML += "   // ç”¨äºç©·å°½æ£€æŸ¥ï¼Œç¡®ä¿å¤„ç†æ‰€æœ‰æƒ…å†µ";
      }

      function testExhaustiveness() {
        const demo = document.getElementById("neverDetectionDemo");
        demo.innerHTML = "";

        demo.innerHTML += "ğŸ”’ ç©·å°½æ£€æŸ¥æ¼”ç¤º:<br/><br/>";

        demo.innerHTML += "1. å®šä¹‰å½¢çŠ¶ç±»å‹:<br/>";
        demo.innerHTML += "   type Shape = <br/>";
        demo.innerHTML += '     | { kind: "circle", radius: number }<br/>';
        demo.innerHTML += '     | { kind: "square", side: number };<br/><br/>';

        demo.innerHTML += "2. å®ç°é¢ç§¯è®¡ç®—:<br/>";
        demo.innerHTML += "   function getArea(shape: Shape): number {<br/>";
        demo.innerHTML += "       switch (shape.kind) {<br/>";
        demo.innerHTML += '           case "circle":<br/>';
        demo.innerHTML += "               return Math.PI * shape.radius ** 2;<br/>";
        demo.innerHTML += '           case "square":<br/>';
        demo.innerHTML += "               return shape.side ** 2;<br/>";
        demo.innerHTML += "           default:<br/>";
        demo.innerHTML += "               return assertNever(shape);<br/>";
        demo.innerHTML += "       }<br/>";
        demo.innerHTML += "   }<br/><br/>";

        demo.innerHTML += "3. æ·»åŠ æ–°å½¢çŠ¶:<br/>";
        demo.innerHTML += "   type Shape = <br/>";
        demo.innerHTML += '     | { kind: "circle", radius: number }<br/>';
        demo.innerHTML += '     | { kind: "square", side: number }<br/>';
        demo.innerHTML += '     | { kind: "triangle", base: number, height: number };<br/><br/>';

        demo.innerHTML += "   // TypeScript ç«‹å³æŠ¥é”™ï¼<br/>";
        demo.innerHTML += "   // default åˆ†æ”¯ä¸­çš„ shape ä¸æ˜¯ never ç±»å‹<br/>";
        demo.innerHTML += "   // æç¤ºæˆ‘ä»¬éœ€è¦å¤„ç†æ–°çš„ triangle æƒ…å†µ";
      }

      function clearDemo() {
        document.getElementById("neverDetectionDemo").innerHTML = "// æµ‹è¯• never ç±»å‹çš„è¡Œä¸º";
      }

      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
      window.addEventListener("load", function () {
        console.log("=== TypeScript never ç±»å‹æ¼”ç¤º ===");
        console.log("never ç±»å‹è¡¨ç¤ºæ°¸è¿œä¸ä¼šå‘ç”Ÿçš„å€¼");
      });

      // æ¨¡æ‹Ÿ assertNever å‡½æ•°
      function assertNever(value, message = `Unexpected value: ${value}`) {
        throw new Error(message);
      }

      // æ¼”ç¤ºç©·å°½æ£€æŸ¥çš„å®é™…æ•ˆæœ
      function demonstrateExhaustiveCheck() {
        const shape = { kind: "circle", radius: 5 };

        switch (shape.kind) {
          case "circle":
            console.log("Circle area:", Math.PI * shape.radius ** 2);
            break;
          case "square":
            console.log("Square area:", shape.side ** 2);
            break;
          default:
            // å¦‚æœæ·»åŠ äº†æ–°å½¢çŠ¶è€Œæ²¡æœ‰å¤„ç†ï¼Œè¿™é‡Œä¼šæŠ›å‡ºé”™è¯¯
            assertNever(shape);
        }
      }
    </script>
  </body>
</html>
